{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/component/PurchaseOrderExpenses.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/component/PurchaseOrderExpenses.vue","mtime":1661667901199},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNvbXB1dGVkLCByZWFjdGl2ZSwgcmVmLCB3YXRjaCB9IGZyb20gIkB2dWUvY29tcG9zaXRpb24tYXBpL2Rpc3QvdnVlLWNvbXBvc2l0aW9uLWFwaSI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IHsgbWRpUGx1cyB9IGZyb20gJ0BtZGkvanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGl0ZW1OdW1iZXI6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICB2YXIgZXhwZW5zZXMgPSByZWFjdGl2ZSh7CiAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICBhbW91bnQ6IG51bGwsCiAgICAgIHBhaWRfdG86IG51bGwKICAgIH0pOwogICAgdmFyIGlzRGlzYWJsZWQgPSByZWYodHJ1ZSk7CiAgICB2YXIgZXJyb3JzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5lcnJvcnM7CiAgICB9KTsKCiAgICB2YXIgZm9ybWF0UHJpY2UgPSBmdW5jdGlvbiBmb3JtYXRQcmljZSh2YWx1ZSkgewogICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkudG9GaXhlZCgyKS50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICcsJyk7CiAgICB9OwoKICAgIHdhdGNoKGV4cGVuc2VzLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChleHBlbnNlcy5kZXNjcmlwdGlvbiAmJiBleHBlbnNlcy5hbW91bnQgJiYgZXhwZW5zZXMucGFpZF90bykgewogICAgICAgIGlzRGlzYWJsZWQudmFsdWUgPSBmYWxzZTsKICAgICAgICBmb3JtYXRQcmljZShleHBlbnNlcy5hbW91bnQpOwogICAgICB9IGVsc2UgaXNEaXNhYmxlZC52YWx1ZSA9IHRydWU7CgogICAgICBlbWl0KCdleHBlbnNlQWRkZWQnLCBfb2JqZWN0U3ByZWFkKHt9LCBleHBlbnNlcyksIHByb3BzLml0ZW1OdW1iZXIpOwogICAgfSk7CgogICAgdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gZGVib3VuY2UoZnVuYykgewogICAgICB2YXIgdGltZW91dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogNTAwOwogICAgICB2YXIgdGltZXI7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICAgIH0KCiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgZnVuYy5hcHBseShfdGhpcywgYXJncyk7CiAgICAgICAgfSwgdGltZW91dCk7CiAgICAgIH07CiAgICB9OwoKICAgIHZhciBtb25leUZvcm1hdCA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgZXhwZW5zZXMuYW1vdW50ID0gZm9ybWF0UHJpY2UoZXhwZW5zZXMuYW1vdW50KTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgZXhwZW5zZXM6IGV4cGVuc2VzLAogICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgZm9ybWF0UHJpY2U6IGZvcm1hdFByaWNlLAogICAgICBpY29uczogewogICAgICAgIG1kaVBsdXM6IG1kaVBsdXMKICAgICAgfSwKICAgICAgbW9uZXlGb3JtYXQ6IG1vbmV5Rm9ybWF0CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA,SACAA,OADA,QAEA,SAFA;AAIA;EACAC;IACAC;MACAC,YADA;MAEAC;IAFA;EADA,CADA;EAOAC,KAPA,iBAOAJ,KAPA,QAOA;IAAA;;IAAA;IACA;MAAAK;MAAAC;MAAAC;IAAA;IACA;IACA;MAAA;IAAA;;IAEA;MAAA,yBACAC,OADA,CACA,CADA,EAEAC,QAFA,GAGAC,OAHA,CAGA,uBAHA,EAGA,GAHA;IAAA;;IAKAC,MACAC,QADA,EAEA;MACA;QACAC;QACAC;MACA,CAHA,MAGAD;;MAEAE;IACA,CATA;;IAYA;MAAA;MACA;MAEA;QAAA;UAAAC;QAAA;;QACAC;QACAC;UACAC;QACA,CAFA,EAEAC,OAFA;MAGA,CALA;IAMA,CATA;;IAWA;MACAR;IACA,CAFA;IAIA;MACAA,kBADA;MAEAC,sBAFA;MAGAQ,cAHA;MAIAP,wBAJA;MAKAQ;QACAvB;MADA,CALA;MAQAwB;IARA;EAUA;AAtDA","names":["mdiPlus","props","itemNumber","type","default","setup","description","amount","paid_to","toFixed","toString","replace","watch","expenses","isDisabled","formatPrice","emit","args","clearTimeout","timer","func","timeout","errors","icons","moneyFormat"],"sourceRoot":"src/views/pages/purchase-orders/component","sources":["PurchaseOrderExpenses.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-row>\n      <v-col cols=\"3\">\n        <v-text-field\n          v-model=\"expenses.description\"\n          label=\"Description\"\n          hide-details=\"auto\"\n          dense\n          :error-messages=\"errors.description\"\n        />\n      </v-col>\n      <v-col cols=\"3\">\n        <v-text-field\n          v-model=\"expenses.paid_to\"\n          label=\"Paid To\"\n          hide-details=\"auto\"\n          dense\n          :error-messages=\"errors.paid_to\"\n        />\n      </v-col>\n      <v-col cols=\"3\">\n        <v-text-field\n          v-model=\"expenses.amount\"\n          label=\"Amount Paid\"\n          hide-details=\"auto\"\n          dense\n          :error-messages=\"errors.amount\"\n          @input=\"moneyFormat('total')\"\n        />\n      </v-col>\n\n      <v-col cols=\"1\">\n        <v-btn\n          class=\"mx-2\"\n          x-small\n          fab\n          :disabled=\"isDisabled\"\n          @click=\"$emit('addExpensesRow')\"\n        >\n          <v-icon dark>\n            {{ icons.mdiPlus }}\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-card>\n</template>\n<script>\nimport {computed, reactive, ref, watch} from \"@vue/composition-api/dist/vue-composition-api\";\nimport store from \"@/store\";\nimport {\n  mdiPlus\n} from '@mdi/js'\n\nexport default {\n  props: {\n    itemNumber: {\n      type: Number,\n      default: 0,\n    },\n  },\n  setup(props, {emit}) {\n    const expenses = reactive({description: null, amount: null, paid_to: null})\n    const isDisabled = ref(true)\n    const errors = computed(() => store.getters.errors)\n\n    const formatPrice = value => parseFloat(value)\n      .toFixed(2)\n      .toString()\n      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n\n    watch(\n      expenses,\n      () => {\n        if (expenses.description && expenses.amount && expenses.paid_to) {\n          isDisabled.value = false\n          formatPrice(expenses.amount)\n        } else isDisabled.value = true\n\n        emit('expenseAdded', {...expenses}, props.itemNumber)\n      },\n    )\n\n    const debounce = (func, timeout = 500) => {\n      let timer\n\n      return (...args) => {\n        clearTimeout(timer)\n        timer = setTimeout(() => {\n          func.apply(this, args)\n        }, timeout)\n      }\n    }\n\n    const moneyFormat = debounce(() => {\n      expenses.amount = formatPrice(expenses.amount)\n    })\n\n    return {\n      expenses,\n      isDisabled,\n      errors,\n      formatPrice,\n      icons: {\n        mdiPlus,\n      },\n      moneyFormat,\n    }\n  }\n}\n</script>\n"]}]}