{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/master-files/salesman/SalesmanForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/master-files/salesman/SalesmanForm.vue","mtime":1662897006543},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdG9SZWYsIGNvbXB1dGVkLCByZWYsIHdhdGNoIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGkvZGlzdC92dWUtY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHNhbGVzbWFuOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CgogICAgdmFyIGZvcm1hdFByaWNlID0gZnVuY3Rpb24gZm9ybWF0UHJpY2UodmFsdWUpIHsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpLnRvRml4ZWQoMikudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAnLCcpOwogICAgfTsKCiAgICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiBkZWJvdW5jZShmdW5jKSB7CiAgICAgIHZhciB0aW1lb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiA1MDA7CiAgICAgIHZhciB0aW1lcjsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgfQoKICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmdW5jLmFwcGx5KF90aGlzLCBhcmdzKTsKICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgfTsKICAgIH07CgogICAgdmFyIHNhbGVzbWFuUHJvcCA9IHRvUmVmKHByb3BzLCAnc2FsZXNtYW4nKTsKICAgIHZhciBzYWxlc21hbkRhdGEgPSByZWYoewogICAgICBzYWxlc21hbl9jb2RlOiBudWxsLAogICAgICBzYWxlc21hbl9uYW1lOiBudWxsLAogICAgICBxdW90YTogbnVsbCwKICAgICAgbm90ZXM6IG51bGwsCiAgICAgIGlzX2FjdGl2ZTogZmFsc2UKICAgIH0pOwogICAgdmFyIG1vbmV5Rm9ybWF0ID0gZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICBzYWxlc21hbkRhdGEudmFsdWUucXVvdGEgPSBmb3JtYXRQcmljZShzYWxlc21hbkRhdGEudmFsdWUucXVvdGEpOwogICAgfSk7CgogICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0JykgewogICAgICBzYWxlc21hbkRhdGEudmFsdWUgPSBzYWxlc21hblByb3AudmFsdWU7CgogICAgICBpZiAoc2FsZXNtYW5EYXRhLnZhbHVlLmlzX2FjdGl2ZSA9PT0gJ0luYWN0aXZlJykgewogICAgICAgIHNhbGVzbWFuRGF0YS52YWx1ZS5pc19hY3RpdmUgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIHNhbGVzbWFuRGF0YS52YWx1ZS5pc19hY3RpdmUgPSAxOwogICAgICB9CiAgICB9CgogICAgd2F0Y2goc2FsZXNtYW5Qcm9wLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0JykgewogICAgICAgIHNhbGVzbWFuRGF0YS52YWx1ZSA9IHNhbGVzbWFuUHJvcC52YWx1ZTsKCiAgICAgICAgaWYgKHNhbGVzbWFuRGF0YS52YWx1ZS5pc19hY3RpdmUgPT09ICdJbmFjdGl2ZScpIHsKICAgICAgICAgIHNhbGVzbWFuRGF0YS52YWx1ZS5pc19hY3RpdmUgPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzYWxlc21hbkRhdGEudmFsdWUuaXNfYWN0aXZlID0gMTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2FsZXNtYW5EYXRhLnZhbHVlID0gewogICAgICAgICAgc2FsZXNtYW5fbmFtZTogbnVsbCwKICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICAgICAgbW9kdWxlOiBudWxsLAogICAgICAgICAgbm90ZXM6IG51bGwsCiAgICAgICAgICBxdW90YTogbnVsbCwKICAgICAgICAgIGlzX2FjdGl2ZTogZmFsc2UKICAgICAgICB9OwogICAgICB9CiAgICB9KTsKICAgIHZhciBlcnJvcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5TYWxlc21hblN0b3JlLmVycm9yczsKICAgIH0pOwoKICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGVtaXQoJ2NsaWNrZWQnLCBmYWxzZSk7CiAgICB9OwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIGlmIChzYWxlc21hbkRhdGEudmFsdWUuaWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc21hblN0b3JlL2NyZWF0ZScsIHNhbGVzbWFuRGF0YS52YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBlbWl0KCdjbGlja2VkJywgewogICAgICAgICAgICAgIGFsZXJ0VHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGFsZXJ0TWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBBZGRlZCBhIFNhbGVzbWFuLicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc21hblN0b3JlL2xpc3QnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNtYW5TdG9yZS91cGRhdGUnLCBzYWxlc21hbkRhdGEudmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZW1pdCgnY2xpY2tlZCcsIHsKICAgICAgICAgICAgICBhbGVydFR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBhbGVydE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgdXBkYXRlZCBhIFNhbGVzbWFuLicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc21hblN0b3JlL2xpc3QnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBjYW5jZWw6IGNhbmNlbCwKICAgICAgbW9uZXlGb3JtYXQ6IG1vbmV5Rm9ybWF0LAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgc2FsZXNtYW5EYXRhOiBzYWxlc21hbkRhdGEsCiAgICAgIHN1Ym1pdDogc3VibWl0CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHt9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+HA,SACAA,KADA,EAEAC,QAFA,EAGAC,GAHA,EAGAC,KAHA,QAIA,+CAJA;AAKA;AAEA;EACAC;IACAC;MACAC,YADA;MAEAC,cAFA;MAGAC;IAHA,CADA;IAMAC;MACAH,YADA;MAEAC,eAFA;MAGAC;IAHA;EANA,CADA;EAaAE,KAbA,iBAaAN,KAbA,QAaA;IAAA;;IAAA;;IACA;MAAA,yBACAO,OADA,CACA,CADA,EAEAC,QAFA,GAGAC,OAHA,CAGA,uBAHA,EAGA,GAHA;IAAA;;IAIA;MAAA;MACA;MAEA;QAAA;UAAAC;QAAA;;QACAC;QACAC;UACAC;QACA,CAFA,EAEAC,OAFA;MAGA,CALA;IAMA,CATA;;IAWA;IAEA;MACAC,mBADA;MAEAC,mBAFA;MAGAC,WAHA;MAIAC,WAJA;MAKAC;IALA;IAQA;MACAC;IACA,CAFA;;IAIA;MACAA;;MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA;;IAEArB;MACA;QACAqB;;QAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;MACA,CARA,MAQA;QACAA;UACAJ,mBADA;UAEAK,iBAFA;UAGAC,YAHA;UAIAJ,WAJA;UAKAD,WALA;UAMAE;QANA;MAQA;IACA,CAnBA;IAqBA;MAAA;IAAA;;IAEA;MACAI;IACA,CAFA;;IAIA;MACA;QACAC,gEACA;UACA;YACAD;cACAE,oBADA;cAEAC;YAFA;YAIAF;UACA;QACA,CATA;MAWA,CAZA,MAYA;QACAA,gEACA;UACA;YACAD;cACAE,oBADA;cAEAC;YAFA;YAIAF;UACA;QACA,CATA;MAWA;IACA,CA1BA;;IA4BA;MACAG,cADA;MAEAC,wBAFA;MAGAC,cAHA;MAIAT,0BAJA;MAKAU;IALA;EAOA,CAnHA;EAoHAjC,YApHA;EAsHAkC;AAtHA","names":["toRef","computed","ref","watch","props","mode","type","required","default","salesman","setup","toFixed","toString","replace","args","clearTimeout","timer","func","timeout","salesman_code","salesman_name","quota","notes","is_active","salesmanData","description","module","emit","store","alertType","alertMessage","cancel","moneyFormat","errors","submit","methods"],"sourceRoot":"src/views/pages/master-files/salesman","sources":["SalesmanForm.vue"],"sourcesContent":["<template>\n  <v-form>\n    <v-row>\n      <v-col\n        cols=\"4\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Salesman Code</label>\n      </v-col>\n\n      <v-col\n        cols=\"7\"\n        md=\"7\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"salesmanData.salesman_code\"\n          outlined\n          dense\n          :error-messages=\"errors.salesman_code\"\n          placeholder=\"Salesman Code\"\n          hide-details=\"auto\"\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"4\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Salesman Name</label>\n      </v-col>\n\n      <v-col\n        cols=\"7\"\n      >\n        <v-textarea\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"salesmanData.salesman_name\"\n          outlined\n          dense\n          rows=\"2\"\n          :error-messages=\"errors.salesman_name\"\n          placeholder=\"Salesman Name\"\n          hide-details=\"auto\"\n        ></v-textarea>\n      </v-col>\n      <v-col\n        cols=\"4\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Quota</label>\n      </v-col>\n\n      <v-col\n        cols=\"7\"\n      >\n        <v-currency-field\n          v-model=\"salesmanData.quota\"\n          label=\"Quota\"\n          :error-messages=\"errors.quota\"\n          filled\n        />\n      </v-col>\n      <v-col\n        cols=\"4\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Notes</label>\n      </v-col>\n\n      <v-col\n        cols=\"7\"\n      >\n        <v-textarea\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"salesmanData.notes\"\n          rows=\"3\"\n          outlined\n          dense\n          :error-messages=\"errors.notes\"\n          placeholder=\"Notes\"\n          hide-details=\"auto\"\n        ></v-textarea>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n        md=\"3\"\n      >\n      </v-col>\n\n      <v-col\n        cols=\"7\"\n        md=\"7\"\n      >\n        <v-checkbox\n          v-model=\"salesmanData.is_active\"\n          label=\"Active\"\n          :error-messages=\"errors.is_active\"\n          hide-details=\"auto\"\n          class=\"me-3 mt-1\"\n        >\n        </v-checkbox>\n      </v-col>\n      <v-col\n        offset-md=\"3\"\n        cols=\"12\"\n      >\n        <v-btn\n          color=\"primary\"\n          @click=\"submit\"\n        >\n          Submit\n        </v-btn>\n        <v-btn\n          type=\"reset\"\n          outlined\n          class=\"mx-2\"\n          @click=\"cancel\"\n        >\n          Cancel\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-form>\n</template>\n\n<script>\nimport {\n  toRef,\n  computed,\n  ref, watch,\n} from '@vue/composition-api/dist/vue-composition-api'\nimport store from '@/store'\n\nexport default {\n  props: {\n      mode: {\n        type: String,\n        required: true,\n        default: null,\n      },\n      salesman: {\n        type: Object,\n        required: false,\n        default: null,\n      },\n  },\n  setup(props, { emit }) {\n    const formatPrice = value => parseFloat(value)\n      .toFixed(2)\n      .toString()\n      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n    const debounce = (func, timeout = 500) => {\n      let timer\n\n      return (...args) => {\n        clearTimeout(timer)\n        timer = setTimeout(() => {\n          func.apply(this, args)\n        }, timeout)\n      }\n    }\n\n    const salesmanProp = toRef(props, 'salesman')\n\n    const salesmanData = ref({\n      salesman_code: null,\n      salesman_name: null,\n      quota: null,\n      notes: null,\n      is_active: false,\n    })\n\n    const moneyFormat = debounce(() => {\n      salesmanData.value.quota = formatPrice(salesmanData.value.quota)\n    })\n\n    if (props.mode === 'edit') {\n      salesmanData.value = salesmanProp.value\n\n      if (salesmanData.value.is_active === 'Inactive') {\n        salesmanData.value.is_active = 0\n      } else {\n        salesmanData.value.is_active = 1\n      }\n    }\n\n    watch(salesmanProp, value => {\n      if (props.mode === 'edit') {\n        salesmanData.value = salesmanProp.value\n\n        if (salesmanData.value.is_active === 'Inactive') {\n          salesmanData.value.is_active = 0\n        } else {\n          salesmanData.value.is_active = 1\n        }\n      } else {\n        salesmanData.value = {\n          salesman_name: null,\n          description: null,\n          module: null,\n          notes: null,\n          quota: null,\n          is_active: false,\n        }\n      }\n    })\n\n    const errors = computed(() => store.state.SalesmanStore.errors)\n\n    const cancel = () => {\n      emit('clicked', false)\n    }\n\n    const submit = () => {\n      if (salesmanData.value.id === undefined) {\n        store.dispatch('SalesmanStore/create', salesmanData.value).then(\n          response => {\n            if (response.status === undefined) {\n              emit('clicked', {\n                alertType: 'success',\n                alertMessage: 'Successfully Added a Salesman.',\n              })\n              store.dispatch('SalesmanStore/list')\n            }\n          },\n        )\n      } else {\n        store.dispatch('SalesmanStore/update', salesmanData.value).then(\n          response => {\n            if (response.status === undefined) {\n              emit('clicked', {\n                alertType: 'success',\n                alertMessage: 'Successfully updated a Salesman.',\n              })\n              store.dispatch('SalesmanStore/list')\n            }\n          },\n        )\n      }\n    }\n\n    return {\n      cancel,\n      moneyFormat,\n      errors,\n      salesmanData,\n      submit,\n    }\n  },\n  computed: {\n  },\n  methods: {\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}