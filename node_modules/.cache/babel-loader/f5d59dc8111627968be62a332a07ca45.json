{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js!/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/clients/ClientsListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/clients/ClientsListTable.vue","mtime":1656541982216},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js","mtime":1650363913040},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1kaUFjY291bnRFZGl0LCBtZGlEZWxldGVDaXJjbGUgfSBmcm9tICJAbWRpL2pzIjsKaW1wb3J0IHsgR0VUX0NVU1RPTUVSUywgUkVNT1ZFX0NVU1RPTUVSIH0gZnJvbSAiQC9zdG9yZS9hY3Rpb25zLnR5cGUiOwppbXBvcnQgeyByZWYsIG5leHRUaWNrIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBjb21wdXRlZCwgb25Nb3VudGVkIH0gZnJvbSAiQHZ1ZS9jb21wb3NpdGlvbi1hcGkvZGlzdC92dWUtY29tcG9zaXRpb24tYXBpIjsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHNlYXJjaCA9IHJlZignJyk7CiAgICB2YXIgZGlhbG9nRGVsZXRlID0gcmVmKGZhbHNlKTsKICAgIHZhciBoZWFkZXJzID0gcmVmKFt7CiAgICAgIHRleHQ6ICdOYW1lJywKICAgICAgYWxpZ246ICdzdGFydCcsCiAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6ICduYW1lJwogICAgfSwgewogICAgICB0ZXh0OiAnQ29udGFjdCBQZXJzb24nLAogICAgICB2YWx1ZTogJ2NvbnRhY3RfcGVyc29uJwogICAgfSwgewogICAgICB0ZXh0OiAnRW1haWwnLAogICAgICB2YWx1ZTogJ2VtYWlsJwogICAgfSwgewogICAgICB0ZXh0OiAnVGluJywKICAgICAgdmFsdWU6ICd0aW4nCiAgICB9LCB7CiAgICAgIHRleHQ6ICdDb250YWN0IE51bWJlcicsCiAgICAgIHZhbHVlOiAnY29udGFjdF9ubycKICAgIH0sIHsKICAgICAgdGV4dDogJ0FjdGlvbnMnLAogICAgICB2YWx1ZTogJ2FjdGlvbnMnLAogICAgICBzb3J0YWJsZTogZmFsc2UKICAgIH1dKTsKICAgIHZhciBkZWZhdWx0SXRlbSA9IHJlZih7CiAgICAgIG5hbWU6ICcnLAogICAgICBjb250YWN0X3BlcnNvbjogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgdGluOiAnJywKICAgICAgY29udGFjdF9ubzogJycsCiAgICAgIGRlbGl2ZXJ5X2FkZHJlc3M6ICcnCiAgICB9KTsKICAgIHZhciBkZWxldGVkSW5kZXggPSByZWYoLTEpOwogICAgdmFyIGRlbGV0ZWRJdGVtID0gcmVmKHsKICAgICAgbmFtZTogJycsCiAgICAgIGNvbnRhY3RfcGVyc29uOiAnJywKICAgICAgZW1haWw6ICcnLAogICAgICB0aW46ICcnLAogICAgICBjb250YWN0X25vOiAnJywKICAgICAgZGVsaXZlcnlfYWRkcmVzczogJycKICAgIH0pOwogICAgdmFyIGN1c3RvbWVycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnMuY3VzdG9tZXJzOwogICAgfSk7CiAgICB2YXIgY3VzdG9tZXIgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmN1c3RvbWVyOwogICAgfSk7CiAgICB2YXIgZXJyb3JzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5lcnJvcnM7CiAgICB9KTsKICAgIHZhciBsb2FkaW5nID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVycy5sb2FkaW5nOwogICAgfSk7CgogICAgdmFyIGluaXRpYWxpemUgPSBmdW5jdGlvbiBpbml0aWFsaXplKCkgewogICAgICBzdG9yZS5kaXNwYXRjaChHRVRfQ1VTVE9NRVJTKTsKICAgIH07CgogICAgdmFyIGRlbGV0ZUl0ZW0gPSBmdW5jdGlvbiBkZWxldGVJdGVtKGl0ZW0pIHsKICAgICAgZGVsZXRlZEluZGV4LnZhbHVlID0gY3VzdG9tZXJzLnZhbHVlLmluZGV4T2YoaXRlbSk7CiAgICAgIGRlbGV0ZWRJdGVtLnZhbHVlID0gX29iamVjdFNwcmVhZCh7fSwgaXRlbSk7CiAgICAgIGRpYWxvZ0RlbGV0ZS52YWx1ZSA9IHRydWU7CiAgICB9OwoKICAgIHZhciBkZWxldGVJdGVtQ29uZmlybSA9IGZ1bmN0aW9uIGRlbGV0ZUl0ZW1Db25maXJtKCkgewogICAgICBzdG9yZS5kaXNwYXRjaChSRU1PVkVfQ1VTVE9NRVIsIGRlbGV0ZWRJdGVtLnZhbHVlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBjdXN0b21lcnMudmFsdWUuc3BsaWNlKGRlbGV0ZWRJbmRleC52YWx1ZSwgMSk7CiAgICAgICAgY2xvc2VEZWxldGUoKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHZhciBjbG9zZURlbGV0ZSA9IGZ1bmN0aW9uIGNsb3NlRGVsZXRlKCkgewogICAgICBkaWFsb2dEZWxldGUudmFsdWUgPSBmYWxzZTsKICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGRlbGV0ZWRJdGVtLnZhbHVlID0gX29iamVjdFNwcmVhZCh7fSwgZGVmYXVsdEl0ZW0udmFsdWUpOwogICAgICAgIGRlbGV0ZWRJbmRleC52YWx1ZSA9IC0xOwogICAgICB9KTsKICAgIH07CgogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgaW5pdGlhbGl6ZSgpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBtZGlBY2NvdW50RWRpdDogbWRpQWNjb3VudEVkaXQsCiAgICAgIG1kaURlbGV0ZUNpcmNsZTogbWRpRGVsZXRlQ2lyY2xlLAogICAgICBkZWZhdWx0SXRlbTogZGVmYXVsdEl0ZW0sCiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsCiAgICAgIGRpYWxvZ0RlbGV0ZTogZGlhbG9nRGVsZXRlLAogICAgICBzZWFyY2g6IHNlYXJjaCwKICAgICAgY3VzdG9tZXJzOiBjdXN0b21lcnMsCiAgICAgIGN1c3RvbWVyOiBjdXN0b21lciwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGRlbGV0ZUl0ZW06IGRlbGV0ZUl0ZW0sCiAgICAgIGRlbGV0ZUl0ZW1Db25maXJtOiBkZWxldGVJdGVtQ29uZmlybSwKICAgICAgY2xvc2U6IGNsb3NlLAogICAgICBjbG9zZURlbGV0ZTogY2xvc2VEZWxldGUsCiAgICAgIGluaXRpYWxpemU6IGluaXRpYWxpemUsCiAgICAgIGRlbGV0ZWRJdGVtOiBkZWxldGVkSXRlbSwKICAgICAgZGVsZXRlZEluZGV4OiBkZWxldGVkSW5kZXgsCiAgICAgIGxvYWRpbmc6IGxvYWRpbmcKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA,SACAA,aADA,EAEAC,eAFA,QAGA,sBAHA;AAIA;AACA;AACA;AAEA;EACAC,KADA,mBACA;IACA;IACA;IACA,mBACA;MACAC,YADA;MAEAC,cAFA;MAGAC,eAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;IAAA,CAVA,EAWA;MAAAH;MAAAG;MAAAD;IAAA,CAXA;IAcA;MACAE,QADA;MAEAC,kBAFA;MAGAC,SAHA;MAIAC,OAJA;MAKAC,cALA;MAMAC;IANA;IAQA;IACA;MACAL,QADA;MAEAC,kBAFA;MAGAC,SAHA;MAIAC,OAJA;MAKAC,cALA;MAMAC;IANA;IASA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;;IAEA;MACAC;IACA,CAFA;;IAIA;MACAC;MACAC;MACAC;IACA,CAJA;;IAMA;MACAH;QACAI;QACAC;MACA,CAHA;IAIA,CALA;;IAOA;MACAF;MACAG;QACAJ;QACAD;MACA,CAHA;IAIA,CANA;;IAQAM;MACAC;IACA,CAFA;IAIA;MACAC,8BADA;MAEAC,gCAFA;MAGAC,wBAHA;MAIAC,gBAJA;MAKAT,0BALA;MAMAU,cANA;MAOAT,oBAPA;MAQAU,kBARA;MASAC,cATA;MAUAC,sBAVA;MAWAC,oCAXA;MAYAC,YAZA;MAaAb,wBAbA;MAcAG,sBAdA;MAeAN,wBAfA;MAgBAD,0BAhBA;MAiBAkB;IAjBA;EAmBA;AAzFA","names":["GET_CUSTOMERS","REMOVE_CUSTOMER","setup","text","align","sortable","value","name","contact_person","email","tin","contact_no","delivery_address","store","deletedIndex","deletedItem","dialogDelete","customers","closeDelete","nextTick","onMounted","initialize","mdiAccountEdit","mdiDeleteCircle","defaultItem","headers","search","customer","errors","deleteItem","deleteItemConfirm","close","loading"],"sourceRoot":"src/views/pages/sales/clients","sources":["ClientsListTable.vue"],"sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"customers\"\n      sort-by=\"name\"\n      class=\"elevation-1\"\n      :search=\"search\"\n      :loading=\"loading\"\n    >\n      <template #item.name=\"{ item }\">\n        <router-link :to=\"{ name: 'sales-client', params: { id: item.id } }\">\n          {{ item.name }}\n        </router-link>\n      </template>\n      <template v-slot:top>\n        <v-toolbar\n          color=\"teal\"\n          outlined\n        >\n          <v-toolbar-title>Clients</v-toolbar-title>\n          <v-divider\n            class=\"mx-4\"\n            inset\n            vertical\n          ></v-divider>\n          <v-spacer></v-spacer>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n            class=\"mr-4\"\n          ></v-text-field>\n          <router-link :to=\"{ name: 'create-sales-client' }\">\n            <v-btn\n              color=\"primary\"\n              dark\n              class=\"mb-2\"\n            >\n              Add New Client\n            </v-btn>\n          </router-link>\n          <v-dialog\n            v-model=\"dialogDelete\"\n            max-width=\"500px\"\n          >\n            <v-card>\n              <v-card-title class=\"text-h3\">\n                Are you sure you want to delete this client?\n              </v-card-title>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"closeDelete\"\n                >\n                  Cancel\n                </v-btn>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"deleteItemConfirm\"\n                >\n                  OK\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <router-link :to=\"{ name: 'update-sales-client', params: { id: item.id } }\">\n          <v-icon\n            small\n            class=\"mr-2\"\n          >\n            {{ mdiAccountEdit }}\n          </v-icon>\n        </router-link>\n        <v-icon\n          small\n          @click=\"deleteItem(item)\"\n        >\n          {{ mdiDeleteCircle }}\n        </v-icon>\n      </template>\n      <template v-slot:no-data>\n        <v-btn\n          color=\"primary\"\n          @click=\"initialize\"\n        >\n          Reset\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport {mdiAccountEdit, mdiDeleteCircle} from \"@mdi/js\";\nimport {\n  GET_CUSTOMERS,\n  REMOVE_CUSTOMER\n} from \"@/store/actions.type\";\nimport {ref, nextTick} from '@vue/composition-api'\nimport {computed, onMounted} from \"@vue/composition-api/dist/vue-composition-api\";\nimport store from '@/store'\n\nexport default {\n  setup() {\n    const search = ref('')\n    const dialogDelete = ref(false)\n    const headers = ref([\n      {\n        text: 'Name',\n        align: 'start',\n        sortable: false,\n        value: 'name',\n      },\n      {text: 'Contact Person', value: 'contact_person'},\n      {text: 'Email', value: 'email'},\n      {text: 'Tin', value: 'tin'},\n      {text: 'Contact Number', value: 'contact_no'},\n      {text: 'Actions', value: 'actions', sortable: false},\n    ])\n\n    const defaultItem = ref({\n      name: '',\n      contact_person: '',\n      email: '',\n      tin: '',\n      contact_no: '',\n      delivery_address: '',\n    })\n    const deletedIndex = ref(-1)\n    const deletedItem = ref({\n      name: '',\n      contact_person: '',\n      email: '',\n      tin: '',\n      contact_no: '',\n      delivery_address: '',\n    })\n\n    const customers = computed(() => store.getters.customers)\n    const customer = computed(() => store.getters.customer)\n    const errors = computed(() => store.getters.errors)\n    const loading = computed(() => store.getters.loading)\n\n    const initialize = () => {\n      store.dispatch(GET_CUSTOMERS)\n    }\n\n    const deleteItem = (item) => {\n      deletedIndex.value = customers.value.indexOf(item)\n      deletedItem.value = {...item}\n      dialogDelete.value = true\n    }\n\n    const deleteItemConfirm = () => {\n      store.dispatch(REMOVE_CUSTOMER, deletedItem.value).then(() => {\n        customers.value.splice(deletedIndex.value, 1)\n        closeDelete()\n      })\n    }\n\n    const closeDelete = () => {\n      dialogDelete.value = false\n      nextTick(() => {\n        deletedItem.value = {...defaultItem.value}\n        deletedIndex.value = -1\n      })\n    }\n\n    onMounted(() => {\n      initialize()\n    })\n\n    return {\n      mdiAccountEdit,\n      mdiDeleteCircle,\n      defaultItem,\n      headers,\n      dialogDelete,\n      search,\n      customers,\n      customer,\n      errors,\n      deleteItem,\n      deleteItemConfirm,\n      close,\n      closeDelete,\n      initialize,\n      deletedItem,\n      deletedIndex,\n      loading,\n    }\n  },\n}\n</script>\n"]}]}