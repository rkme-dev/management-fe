{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/user-access-management/access-levels/AccessLevelForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/user-access-management/access-levels/AccessLevelForm.vue","mtime":1659104134240},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgd2F0Y2gsIG9uTW91bnRlZCwgcmVmLCB0b1JlZiwgY29tcHV0ZWQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaS9kaXN0L3Z1ZS1jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBtZGlBY2NvdW50T3V0bGluZSwgbWRpQ2VsbHBob25lLCBtZGlFbWFpbE91dGxpbmUsIG1kaUxvY2tPdXRsaW5lIH0gZnJvbSAnQG1kaS9qcyc7CmltcG9ydCBVc2VyQWNjZXNzTWFuYWdlbWVudFNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL1VzZXJBY2Nlc3NNYW5hZ2VtZW50U2VydmljZSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBhY2Nlc3NMZXZlbDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdDsKICAgIHZhciBlcnJvcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5Vc2VyQWNjZXNzTWFuYWdlbWVudFN0b3JlLmVycm9yczsKICAgIH0pOwogICAgdmFyIHNlcnZpY2UgPSBuZXcgVXNlckFjY2Vzc01hbmFnZW1lbnRTZXJ2aWNlKCk7CiAgICB2YXIgcm9sZU9wdGlvbnMgPSByZWYoW10pOwogICAgdmFyIGFjY2Vzc0xldmVsRGF0YSA9IHRvUmVmKHByb3BzLCAnYWNjZXNzTGV2ZWwnKTsKICAgIHZhciBhYmlsaXRpZXNPcHRpb25zID0gcmVmKFtdKTsKICAgIHZhciBhYmlsaXRpZXNTZWxlY3RlZCA9IHJlZihbXSk7CiAgICB3YXRjaChhY2Nlc3NMZXZlbERhdGEsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgX3ZhbHVlJHJvbGVzOwoKICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUgPSB2YWx1ZS5hYmlsaXRpZXMubWFwKGZ1bmN0aW9uIChhYmlsaXR5KSB7CiAgICAgICAgcmV0dXJuIGFiaWxpdHkuaWQ7CiAgICAgIH0pOwogICAgICBhY2Nlc3NMZXZlbERhdGEudmFsdWUucm9sZV9pZHMgPSAoX3ZhbHVlJHJvbGVzID0gdmFsdWUucm9sZXMpID09PSBudWxsIHx8IF92YWx1ZSRyb2xlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZhbHVlJHJvbGVzLm1hcChmdW5jdGlvbiAocm9sZSkgewogICAgICAgIHJldHVybiByb2xlLmlkOwogICAgICB9KTsKICAgIH0pOwogICAgb25Nb3VudGVkKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0QWJpbGl0aWVzKHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB2YXIgX2FjY2Vzc0xldmVsRGF0YSR2YWx1OwoKICAgICAgICAgICAgICAgIGFiaWxpdGllc09wdGlvbnMudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUgPSAoX2FjY2Vzc0xldmVsRGF0YSR2YWx1ID0gYWNjZXNzTGV2ZWxEYXRhLnZhbHVlLmFiaWxpdGllcykgPT09IG51bGwgfHwgX2FjY2Vzc0xldmVsRGF0YSR2YWx1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjZXNzTGV2ZWxEYXRhJHZhbHUubWFwKGZ1bmN0aW9uIChhYmlsaXR5KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhYmlsaXR5LmlkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0Um9sZXModHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHZhciBfYWNjZXNzTGV2ZWxEYXRhJHZhbHUyOwoKICAgICAgICAgICAgICAgIHJvbGVPcHRpb25zLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIGFjY2Vzc0xldmVsRGF0YS52YWx1ZS5yb2xlX2lkcyA9IChfYWNjZXNzTGV2ZWxEYXRhJHZhbHUyID0gYWNjZXNzTGV2ZWxEYXRhLnZhbHVlLnJvbGVzKSA9PT0gbnVsbCB8fCBfYWNjZXNzTGV2ZWxEYXRhJHZhbHUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjZXNzTGV2ZWxEYXRhJHZhbHUyLm1hcChmdW5jdGlvbiAocm9sZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcm9sZS5pZDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7CgogICAgdmFyIGNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgZW1pdCgnY2xpY2tlZCcsIGZhbHNlKTsKICAgIH07CgogICAgdmFyIHN1Ym1pdCA9IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgaWYgKGFjY2Vzc0xldmVsRGF0YS52YWx1ZS5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIF9hY2Nlc3NMZXZlbERhdGEkdmFsdTM7CgogICAgICAgIHZhciBmb3JtRGF0YSA9IHsKICAgICAgICAgIGFiaWxpdHlfaWRzOiBhYmlsaXRpZXNTZWxlY3RlZC52YWx1ZSwKICAgICAgICAgIG5hbWU6IGFjY2Vzc0xldmVsRGF0YS52YWx1ZS5uYW1lLAogICAgICAgICAgcm9sZV9pZHM6IChfYWNjZXNzTGV2ZWxEYXRhJHZhbHUzID0gYWNjZXNzTGV2ZWxEYXRhLnZhbHVlLnJvbGVfaWRzKSAhPT0gbnVsbCAmJiBfYWNjZXNzTGV2ZWxEYXRhJHZhbHUzICE9PSB2b2lkIDAgPyBfYWNjZXNzTGV2ZWxEYXRhJHZhbHUzIDogW10KICAgICAgICB9OwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdVc2VyQWNjZXNzTWFuYWdlbWVudFN0b3JlL2NyZWF0ZUFjY2Vzc0xldmVsJywgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZW1pdCgnY2xpY2tlZCcsIHsKICAgICAgICAgICAgICBhbGVydFR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBhbGVydE1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgQ3JlYXRlZCBBY2Nlc3MgTGV2ZWwuJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnVXNlckFjY2Vzc01hbmFnZW1lbnRTdG9yZS91cGRhdGVBY2Nlc3NMZXZlbCcsIHsKICAgICAgICAgIGlkOiBhY2Nlc3NMZXZlbERhdGEudmFsdWUuaWQsCiAgICAgICAgICBhYmlsaXR5X2lkczogYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUsCiAgICAgICAgICByb2xlX2lkczogYWNjZXNzTGV2ZWxEYXRhLnZhbHVlLnJvbGVfaWRzCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgnVXNlckFjY2Vzc01hbmFnZW1lbnRTdG9yZS9nZXRBY2Nlc3NMZXZlbHMnKTsKICAgICAgICAgIGVtaXQoJ2NsaWNrZWQnLCBmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQ6IGFiaWxpdGllc1NlbGVjdGVkLAogICAgICBhYmlsaXRpZXNPcHRpb25zOiBhYmlsaXRpZXNPcHRpb25zLAogICAgICBjYW5jZWw6IGNhbmNlbCwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpQWNjb3VudE91dGxpbmU6IG1kaUFjY291bnRPdXRsaW5lLAogICAgICAgIG1kaUVtYWlsT3V0bGluZTogbWRpRW1haWxPdXRsaW5lLAogICAgICAgIG1kaUNlbGxwaG9uZTogbWRpQ2VsbHBob25lLAogICAgICAgIG1kaUxvY2tPdXRsaW5lOiBtZGlMb2NrT3V0bGluZQogICAgICB9LAogICAgICBhY2Nlc3NMZXZlbERhdGE6IGFjY2Vzc0xldmVsRGF0YSwKICAgICAgcm9sZU9wdGlvbnM6IHJvbGVPcHRpb25zLAogICAgICBzdWJtaXQ6IHN1Ym1pdAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICBtZXRob2RzOiB7fQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA,SACAA,KADA,EAEAC,SAFA,EAGAC,GAHA,EAIAC,KAJA,EAIAC,QAJA,QAKA,+CALA;AAMA,SACAC,iBADA,EAEAC,YAFA,EAGAC,eAHA,EAIAC,cAJA,QAKA,SALA;AAMA;AACA;AAEA;EACAC;IACAC;MACAC,YADA;MAEAC,eAFA;MAGAC;IAHA;EADA,CADA;EAQAC,KARA,iBAQAL,KARA,QAQA;IAAA;IACA;MAAA;IAAA;IACA;IACA;IACA;IACA;IACA;IAEAT;MAAA;;MACAe;QAAA;MAAA;MACAC;QAAA;MAAA;IACA,CAHA;IAKAf;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACAgB,2BACAC,IADA,CACA;gBAAA;;gBACAC;gBACAJ;kBAAA;gBAAA;cACA,CAJA,CADA;;YAAA;cAAA;cAAA,OAOAE,uBACAC,IADA,CACA;gBAAA;;gBACAE;gBACAJ;kBAAA;gBAAA;cACA,CAJA,CAPA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;IAcA;MACAK;IACA,CAFA;;IAIA;MACA;QAAA;;QACA;UACAC,oCADA;UAEAC,gCAFA;UAGAC;QAHA;QAKAC,6EACA;UACA;YACAJ;cACAK,oBADA;cAEAC;YAFA;UAIA;QACA,CARA;MAUA,CAhBA,MAgBA;QACAF;UACAG,4BADA;UAEAN,oCAFA;UAGAE;QAHA,GAIAN,IAJA,CAKA;UACAO;UACAJ;QACA,CARA;MAUA;IACA,CA7BA;;IA+BA;MACAN,oCADA;MAEAI,kCAFA;MAGAU,cAHA;MAIAC,cAJA;MAKAC;QACA1B,oCADA;QAEAE,gCAFA;QAGAD,0BAHA;QAIAE;MAJA,CALA;MAWAQ,gCAXA;MAYAI,wBAZA;MAaAY;IAbA;EAeA,CArFA;EAsFA5B,YAtFA;EAwFA6B;AAxFA","names":["watch","onMounted","ref","toRef","computed","mdiAccountOutline","mdiCellphone","mdiEmailOutline","mdiLockOutline","props","accessLevel","type","required","default","setup","abilitiesSelected","accessLevelData","service","then","abilitiesOptions","roleOptions","emit","ability_ids","name","role_ids","store","alertType","alertMessage","id","cancel","errors","icons","submit","methods"],"sourceRoot":"src/views/pages/user-access-management/access-levels","sources":["AccessLevelForm.vue"],"sourcesContent":["<template>\n  <v-form>\n    <v-row>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Access Level Name</label>\n      </v-col>\n\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"accessLevelData.name\"\n          hide-details=\"auto\"\n          :prepend-inner-icon=\"icons.mdiAccountOutline\"\n          outlined\n          dense\n          :error-messages=\"errors.name\"\n          placeholder=\"Access Level Name\"\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Roles</label>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-select\n          v-model=\"accessLevelData.role_ids\"\n          dense\n          outlined\n          multiple\n          :prepend-inner-icon=\"icons.mdiHumanEdit\"\n          item-text=\"title\"\n          item-value=\"id\"\n          label=\"Role\"\n          :items=\"roleOptions\"\n          hide-details=\"auto\"\n        ></v-select>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Abilities</label>\n      </v-col>\n\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-treeview\n          v-model=\"abilitiesSelected\"\n          selectable\n          selected-color=\"primary\"\n          item-disabled=\"locked\"\n          item-key=\"id\"\n          item-text=\"name\"\n          item-children=\"abilities\"\n          hide-details=\"auto\"\n          :items=\"abilitiesOptions\"\n        ></v-treeview>\n      </v-col>\n      <v-col\n        offset-md=\"3\"\n        cols=\"12\"\n      >\n        <v-btn\n          color=\"primary\"\n          @click=\"submit\"\n        >\n          Submit\n        </v-btn>\n        <v-btn\n          type=\"reset\"\n          outlined\n          class=\"mx-2\"\n          @click=\"cancel\"\n        >\n          Cancel\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-form>\n</template>\n\n<script>\nimport {\n  watch,\n  onMounted,\n  ref,\n  toRef, computed,\n} from '@vue/composition-api/dist/vue-composition-api'\nimport {\n  mdiAccountOutline,\n  mdiCellphone,\n  mdiEmailOutline,\n  mdiLockOutline,\n} from '@mdi/js'\nimport UserAccessManagementService from '@/service/UserAccessManagementService'\nimport store from '@/store'\n\nexport default {\n  props: {\n    accessLevel: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const errors = computed(() => store.state.UserAccessManagementStore.errors)\n    const service = new UserAccessManagementService()\n    const roleOptions = ref([])\n    const accessLevelData = toRef(props, 'accessLevel')\n    const abilitiesOptions = ref([])\n    const abilitiesSelected = ref([])\n\n    watch(accessLevelData, value => {\n      abilitiesSelected.value = value.abilities.map(ability => ability.id)\n      accessLevelData.value.role_ids = value.roles?.map(role => role.id)\n    })\n\n    onMounted(async () => {\n      await service.getAbilities(true)\n        .then(response => {\n          abilitiesOptions.value = response.data\n          abilitiesSelected.value = accessLevelData.value.abilities?.map(ability => ability.id)\n        })\n\n      await service.getRoles(true)\n        .then(response => {\n          roleOptions.value = response.data\n          accessLevelData.value.role_ids = accessLevelData.value.roles?.map(role => role.id)\n        })\n    })\n\n    const cancel = () => {\n      emit('clicked', false)\n    }\n\n    const submit = () => {\n      if (accessLevelData.value.id === undefined) {\n        const formData = {\n          ability_ids: abilitiesSelected.value,\n          name: accessLevelData.value.name,\n          role_ids: accessLevelData.value.role_ids ?? [],\n        }\n        store.dispatch('UserAccessManagementStore/createAccessLevel', formData).then(\n          response => {\n            if (response.status === undefined) {\n              emit('clicked', {\n                alertType: 'success',\n                alertMessage: 'Successfully Created Access Level.',\n              })\n            }\n          },\n        )\n      } else {\n        store.dispatch('UserAccessManagementStore/updateAccessLevel', {\n          id: accessLevelData.value.id,\n          ability_ids: abilitiesSelected.value,\n          role_ids: accessLevelData.value.role_ids,\n        }).then(\n          () => {\n            store.dispatch('UserAccessManagementStore/getAccessLevels')\n            emit('clicked', false)\n          },\n        )\n      }\n    }\n\n    return {\n      abilitiesSelected,\n      abilitiesOptions,\n      cancel,\n      errors,\n      icons: {\n        mdiAccountOutline,\n        mdiEmailOutline,\n        mdiCellphone,\n        mdiLockOutline,\n      },\n      accessLevelData,\n      roleOptions,\n      submit,\n    }\n  },\n  computed: {\n  },\n  methods: {\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}