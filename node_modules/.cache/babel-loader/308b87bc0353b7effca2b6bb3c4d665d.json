{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/purchase-order/PurchaseOrderInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/purchase-order/PurchaseOrderInfo.vue","mtime":1659098301272},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiwgd2F0Y2ggfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IENSRUFURV9QVVJDSEFTRV9PUkRFUiwgR0VUX1BST0RVQ1RTX0JZX1NVUFBMSUVSLCBHRVRfU1VQUExJRVJTLCBVUERBVEVfUFVSQ0hBU0VfT1JERVIgfSBmcm9tICdAL3N0b3JlL2FjdGlvbnMudHlwZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaW5mb3JtYXRpb25EYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgc2t1OiAnJywKICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgIGluX3N0b2NrOiAnJywKICAgICAgICAgIHRvdGFsOiAnJywKICAgICAgICAgIHBhaWRfYW1vdW50OiAnJwogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzKSB7CiAgICBzdG9yZS5kaXNwYXRjaChHRVRfU1VQUExJRVJTKTsKICAgIHZhciBlcnJvcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmVycm9yczsKICAgIH0pOwogICAgdmFyIG9wdGlvbnNMb2NhbCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmluZm9ybWF0aW9uRGF0YTsKICAgIH0pOwogICAgdmFyIHNob3dBbGVydCA9IHJlZihmYWxzZSk7CiAgICB2YXIgYnV0dG9uTGFiZWwgPSBwcm9wcy5tb2RlID09PSAnY3JlYXRlJyA/ICdTYXZlJyA6ICdVcGRhdGUnOwogICAgdmFyIHN1cHBsaWVycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnMuc3VwcGxpZXJzOwogICAgfSk7CiAgICB2YXIgcHJvZHVjdHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLnByb2R1Y3RzOwogICAgfSk7CiAgICB2YXIgc2VsZWN0ZWRTdXBwbGllciA9IHJlZignJyk7CiAgICB2YXIgc2VsZWN0ZWRQcm9kdWN0ID0gcmVmKCcnKTsKCiAgICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkgewogICAgICByb3V0ZXIucHVzaCgnL3B1cmNoYXNlLW9yZGVycycpOwogICAgfTsKCiAgICB2YXIgcmVzb2x2ZUZvcm1TdWNjZXNzID0gZnVuY3Rpb24gcmVzb2x2ZUZvcm1TdWNjZXNzKCkgewogICAgICBzaG93QWxlcnQudmFsdWUgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBnb0JhY2soKTsKICAgICAgfSwgNTAwMCk7CiAgICB9OwoKICAgIHdhdGNoKHNlbGVjdGVkU3VwcGxpZXIsIGZ1bmN0aW9uIChzdXBwbGllcikgewogICAgICBzdG9yZS5kaXNwYXRjaChHRVRfUFJPRFVDVFNfQllfU1VQUExJRVIsIHN1cHBsaWVyKTsKICAgIH0pOwoKICAgIHZhciBzYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIGN1cnJlbnRGb3JtID0gb3B0aW9uc0xvY2FsLnZhbHVlOwogICAgICBjdXJyZW50Rm9ybS5pdGVtcyA9IFt7CiAgICAgICAgcXVhbnRpdHk6IDEsCiAgICAgICAgcHJvZHVjdF9pZDogc2VsZWN0ZWRQcm9kdWN0LnZhbHVlLAogICAgICAgIHN1cHBsaWVyX2lkOiBzZWxlY3RlZFN1cHBsaWVyLnZhbHVlCiAgICAgIH1dOwogICAgICB2YXIgZm9ybSA9IGN1cnJlbnRGb3JtOwoKICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICd1cGRhdGUnKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goVVBEQVRFX1BVUkNIQVNFX09SREVSLCBmb3JtKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIHJlc29sdmVGb3JtU3VjY2VzcygpOwogICAgICAgICAgfQogICAgICAgIH0pOyAvLyBzdG9yZS5kaXNwYXRjaChHRVRfUFVSQ0hBU0VfT1JERVJTLCBmb3JtKS50aGVuKGRhdGEgPT4gewogICAgICAgIC8vICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgIC8vICAgICByZXNvbHZlRm9ybVN1Y2Nlc3MoKQogICAgICAgIC8vICAgfQogICAgICAgIC8vIH0pCiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy5tb2RlID09PSAnY3JlYXRlJykgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKENSRUFURV9QVVJDSEFTRV9PUkRFUiwgZm9ybSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICByZXNvbHZlRm9ybVN1Y2Nlc3MoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBzZWxlY3RlZFN1cHBsaWVyOiBzZWxlY3RlZFN1cHBsaWVyLAogICAgICBzZWxlY3RlZFByb2R1Y3Q6IHNlbGVjdGVkUHJvZHVjdCwKICAgICAgc3VwcGxpZXJzOiBzdXBwbGllcnMsCiAgICAgIHByb2R1Y3RzOiBwcm9kdWN0cywKICAgICAgb3B0aW9uc0xvY2FsOiBvcHRpb25zTG9jYWwsCiAgICAgIGdvQmFjazogZ29CYWNrLAogICAgICBzYXZlOiBzYXZlLAogICAgICBzaG93QWxlcnQ6IHNob3dBbGVydCwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGJ1dHRvbkxhYmVsOiBidXR0b25MYWJlbAogICAgfTsKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA,SACAA,qBADA,EAEAC,wBAFA,EAEAC,aAFA,EAGAC,qBAHA,QAIA,sBAJA;AAMA;EACAC;IACAC;MACAC,YADA;MAEAC;QAAA;UACAC,QADA;UAEAC,OAFA;UAGAC,eAHA;UAIAC,YAJA;UAKAC,SALA;UAMAC;QANA;MAAA;IAFA,CADA;IAYAC;MACAR;IADA;EAZA,CADA;EAiBAS,KAjBA,iBAiBAX,KAjBA,EAiBA;IACAY;IAEA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;IACA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;IACA;;IAEA;MACAC;IACA,CAFA;;IAIA;MACAC;MACAC;QACAC;MACA,CAFA,EAEA,IAFA;IAGA,CALA;;IAOAC;MACAL;IACA,CAFA;;IAIA;MACA;MACAM;QACAC,WADA;QAEAC,iCAFA;QAGAC;MAHA;MAKA;;MAEA;QACAT;UACA;YACAU;UACA;QACA,CAJA,EADA,CAOA;QACA;QACA;QACA;QACA;MACA;;MAEA;QACAV;UACA;YACAU;UACA;QACA,CAJA;MAKA;IACA,CA9BA;;IAgCA;MACAC,kCADA;MAEAC,gCAFA;MAGAC,oBAHA;MAIAC,kBAJA;MAKAC,0BALA;MAMAX,cANA;MAOAY,UAPA;MAQAd,oBARA;MASAe,cATA;MAUAC;IAVA;EAYA;AAxFA","names":["CREATE_PURCHASE_ORDER","GET_PRODUCTS_BY_SUPPLIER","GET_SUPPLIERS","UPDATE_PURCHASE_ORDER","props","informationData","type","default","name","sku","description","in_stock","total","paid_amount","mode","setup","store","router","showAlert","setTimeout","goBack","watch","currentForm","quantity","product_id","supplier_id","resolveFormSuccess","selectedSupplier","selectedProduct","suppliers","products","optionsLocal","save","errors","buttonLabel"],"sourceRoot":"src/views/pages/purchase-orders/purchase-order","sources":["PurchaseOrderInfo.vue"],"sourcesContent":["<template>\n  <v-card\n    flat\n    class=\"pa-3 mt-2\"\n  >\n    <v-alert\n      v-show=\"showAlert\"\n      dense\n      text\n      type=\"success\"\n    >\n      Successfully <strong>{{ mode }}d</strong> a purchase order. You will be automatically\n      redirected in a bit.\n    </v-alert>\n    <v-form class=\"multi-col-validation\">\n      <v-card-text class=\"pt-5\">\n        <v-row>\n          <v-col\n            cols=\"12\"\n            sm=\"6\"\n          >\n            <v-select\n              v-model=\"selectedSupplier\"\n              :items=\"suppliers\"\n              label=\"Select a Supplier\"\n              item-text=\"name\"\n              item-value=\"id\"\n              dense\n            ></v-select>\n          </v-col>\n\n          <v-col\n            cols=\"12\"\n            sm=\"6\"\n          >\n            <v-select\n              v-show=\"selectedSupplier\"\n              v-model=\"selectedProduct\"\n              :items=\"products\"\n              label=\"Select a Product\"\n              item-text=\"name\"\n              item-value=\"id\"\n              dense\n            ></v-select>\n          </v-col>\n          <div\n            v-show=\"selectedSupplier && selectedProduct\"\n            class=\"h-full w-full\"\n          >\n            <v-col\n              cols=\"12\"\n            >\n              <v-text-field\n                v-model=\"optionsLocal.payment_method\"\n                outlined\n                dense\n                label=\"Description\"\n                :readonly=\"mode === 'show'\"\n                hide-details=\"auto\"\n                :persistent-placeholder=\"mode === 'show'\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"6\">\n              <v-text-field\n                v-model=\"optionsLocal.total\"\n                outlined\n                dense\n                label=\"Total Amount Payable\"\n                :readonly=\"mode === 'show'\"\n                hide-details=\"auto\"\n                :persistent-placeholder=\"mode === 'show'\"\n              ></v-text-field>\n            </v-col>\n            <v-col\n              cols=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"optionsLocal.paid_amount\"\n                outlined\n                dense\n                label=\"Paid Amount\"\n                :readonly=\"mode === 'show'\"\n                hide-details=\"auto\"\n                :persistent-placeholder=\"mode === 'show'\"\n              ></v-text-field>\n            </v-col>\n          </div>\n        </v-row>\n      </v-card-text>\n\n      <v-card-text>\n        <v-btn\n          v-show=\"mode === 'create' || mode === 'update'\"\n          outlined\n          class=\"mt-3 mr-3\"\n          color=\"primary\"\n          @click=\"save\"\n        >\n          {{ buttonLabel }}\n        </v-btn>\n        <v-btn\n          outlined\n          class=\"mt-3\"\n          type=\"reset\"\n          @click.prevent=\"goBack\"\n        >\n          Back to List\n        </v-btn>\n      </v-card-text>\n    </v-form>\n  </v-card>\n</template>\n\n<script>\nimport { computed, ref, watch } from '@vue/composition-api'\nimport router from '@/router'\nimport store from '@/store'\nimport {\n  CREATE_PURCHASE_ORDER,\n  GET_PRODUCTS_BY_SUPPLIER, GET_SUPPLIERS,\n  UPDATE_PURCHASE_ORDER,\n} from '@/store/actions.type'\n\nexport default {\n  props: {\n    informationData: {\n      type: Object,\n      default: () => ({\n        name: '',\n        sku: '',\n        description: '',\n        in_stock: '',\n        total: '',\n        paid_amount: '',\n      }),\n    },\n    mode: {\n      type: String,\n    },\n  },\n  setup(props) {\n    store.dispatch(GET_SUPPLIERS)\n\n    const errors = computed(() => store.getters.errors)\n    const optionsLocal = computed(() => props.informationData)\n    const showAlert = ref(false)\n    const buttonLabel = props.mode === 'create' ? 'Save' : 'Update'\n    const suppliers = computed(() => store.getters.suppliers)\n    const products = computed(() => store.getters.products)\n    const selectedSupplier = ref('')\n    const selectedProduct = ref('')\n\n    const goBack = () => {\n      router.push('/purchase-orders')\n    }\n\n    const resolveFormSuccess = () => {\n      showAlert.value = true\n      setTimeout(() => {\n        goBack()\n      }, 5000)\n    }\n\n    watch(selectedSupplier, supplier => {\n      store.dispatch(GET_PRODUCTS_BY_SUPPLIER, supplier)\n    })\n\n    const save = () => {\n      const currentForm = optionsLocal.value\n      currentForm.items = [{\n        quantity: 1,\n        product_id: selectedProduct.value,\n        supplier_id: selectedSupplier.value,\n      }]\n      const form = currentForm\n\n      if (props.mode === 'update') {\n        store.dispatch(UPDATE_PURCHASE_ORDER, form).then(data => {\n          if (data != null) {\n            resolveFormSuccess()\n          }\n        })\n\n        // store.dispatch(GET_PURCHASE_ORDERS, form).then(data => {\n        //   if (data != null) {\n        //     resolveFormSuccess()\n        //   }\n        // })\n      }\n\n      if (props.mode === 'create') {\n        store.dispatch(CREATE_PURCHASE_ORDER, form).then(data => {\n          if (data != null) {\n            resolveFormSuccess()\n          }\n        })\n      }\n    }\n\n    return {\n      selectedSupplier,\n      selectedProduct,\n      suppliers,\n      products,\n      optionsLocal,\n      goBack,\n      save,\n      showAlert,\n      errors,\n      buttonLabel,\n    }\n  },\n}\n</script>\n"]}]}