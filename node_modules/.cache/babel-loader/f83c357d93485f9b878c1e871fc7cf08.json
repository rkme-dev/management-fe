{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/SalesOrderForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/SalesOrderForm.vue","mtime":1663479585595},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1662812531040},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1662812546066}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNvbXB1dGVkLCByZWYsIHRvUmVmLCB3YXRjaCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHsgbWRpSW5mb3JtYXRpb24sIG1kaUFjY291bnRQbHVzT3V0bGluZSB9IGZyb20gJ0BtZGkvanMnOwppbXBvcnQgQ3VzdG9tZXJGb3JtIGZyb20gJ0Avdmlld3MvcGFnZXMvbWFzdGVyLWZpbGVzL2N1c3RvbWVycy9DdXN0b21lckZvcm0udnVlJzsKaW1wb3J0IFNhbGVzT3JkZXJJdGVtcyBmcm9tICdAL3ZpZXdzL3BhZ2VzL3NhbGVzL1NhbGVPcmRlckl0ZW1zLnZ1ZSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTYWxlc09yZGVyRm9ybScsCiAgY29tcG9uZW50czogewogICAgQ3VzdG9tZXJGb3JtOiBDdXN0b21lckZvcm0sCiAgICBTYWxlc09yZGVySXRlbXM6IFNhbGVzT3JkZXJJdGVtcwogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICdDcmVhdGUnOwogICAgICB9CiAgICB9LAogICAgZGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgX2RhdGFQcm9wJHZhbHVlOwoKICAgIHZhciBlbWl0ID0gX3JlZi5lbWl0OwogICAgdmFyIGN1c3RvbWVyTW9kYWwgPSByZWYoZmFsc2UpOwogICAgdmFyIG1vZGVEYXRhID0gdG9SZWYocHJvcHMsICdtb2RlJyk7CiAgICB2YXIgZGF0YVByb3AgPSB0b1JlZihwcm9wcywgJ2RhdGEnKTsKICAgIHZhciBmb3JtRGF0YSA9IHJlZih7CiAgICAgIGRhdGVNb2RhbDogZmFsc2UsCiAgICAgIGN1c3RvbWVyX25hbWU6IG51bGwsCiAgICAgIGN1c3RvbWVyX2lkOiBudWxsLAogICAgICBkYXRlX3Bvc3RlZDogbnVsbCwKICAgICAgc2FsZXNfb3JkZXJfbnVtYmVyOiBudWxsLAogICAgICBkb2N1bWVudF9pZDogbnVsbCwKICAgICAgYWRkcmVzczogbnVsbCwKICAgICAgcmVtYXJrczogbnVsbCwKICAgICAgYXJlYTogbnVsbCwKICAgICAgc2FsZXNtYW5faWRfMTogbnVsbCwKICAgICAgc2FsZXNtYW5faWRfMjogbnVsbCwKICAgICAgdGVybV9pZDogbnVsbCwKICAgICAgdmF0X2lkOiBudWxsCiAgICB9KTsKICAgIHZhciBvcmRlckl0ZW1zID0gcmVmKFtdKTsKICAgIHN0b3JlLmRpc3BhdGNoKCdUZXJtU3RvcmUvbGlzdCcpOwogICAgc3RvcmUuZGlzcGF0Y2goJ1ZhdFN0b3JlL2xpc3QnKTsKICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc21hblN0b3JlL2xpc3QnKTsKICAgIHN0b3JlLmRpc3BhdGNoKCdEb2N1bWVudFN0b3JlL2xpc3QnKTsKICAgIHZhciB0ZXJtcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlRlcm1TdG9yZS50ZXJtczsKICAgIH0pOwogICAgdmFyIHZhdHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5WYXRTdG9yZS52YXRzOwogICAgfSk7CiAgICB2YXIgZG9jdW1lbnRzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUuRG9jdW1lbnRTdG9yZS5kb2N1bWVudHMubWFwKGZ1bmN0aW9uIChkb2N1bWVudCkgewogICAgICAgIGRvY3VtZW50LnRpdGxlID0gIiIuY29uY2F0KGRvY3VtZW50LmRvY3VtZW50X25hbWUsICIgLSAiKS5jb25jYXQoZG9jdW1lbnQubW9kdWxlKTsKICAgICAgICByZXR1cm4gZG9jdW1lbnQ7CiAgICAgIH0pOwogICAgfSk7CiAgICB2YXIgdHlwZXMgPSByZWYoWydSZWd1bGFyJywgJ0Rpc3RyaWJ1dG9yJ10pOwoKICAgIHZhciBmb3JtYXREYXRlID0gZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlcykgewogICAgICBpZiAoIWRhdGVzKSByZXR1cm4gbnVsbDsKCiAgICAgIHZhciBfZGF0ZXMkc3BsaXQgPSBkYXRlcy5zcGxpdCgnLScpLAogICAgICAgICAgX2RhdGVzJHNwbGl0MiA9IF9zbGljZWRUb0FycmF5KF9kYXRlcyRzcGxpdCwgMyksCiAgICAgICAgICB5ZWFyID0gX2RhdGVzJHNwbGl0MlswXSwKICAgICAgICAgIG1vbnRoID0gX2RhdGVzJHNwbGl0MlsxXSwKICAgICAgICAgIGRheSA9IF9kYXRlcyRzcGxpdDJbMl07CgogICAgICByZXR1cm4gIiIuY29uY2F0KG1vbnRoLCAiLyIpLmNvbmNhdChkYXksICIvIikuY29uY2F0KHllYXIpOwogICAgfTsKCiAgICB2YXIgZGF0ZVBvc3RlZCA9IHJlZihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSk7CiAgICBmb3JtRGF0YS52YWx1ZSA9IChfZGF0YVByb3AkdmFsdWUgPSBkYXRhUHJvcC52YWx1ZSkgIT09IG51bGwgJiYgX2RhdGFQcm9wJHZhbHVlICE9PSB2b2lkIDAgPyBfZGF0YVByb3AkdmFsdWUgOiBmb3JtRGF0YS52YWx1ZTsKICAgIHdhdGNoKGRhdGFQcm9wLCBmdW5jdGlvbiAoKSB7CiAgICAgIGZvcm1EYXRhLnZhbHVlID0gZGF0YVByb3AudmFsdWU7CiAgICB9KTsKCiAgICB2YXIgZmV0Y2hPcmRlckl0ZW1zID0gZnVuY3Rpb24gZmV0Y2hPcmRlckl0ZW1zKGl0ZW1zKSB7CiAgICAgIG9yZGVySXRlbXMudmFsdWUgPSBpdGVtczsKICAgIH07CgogICAgdmFyIHNhbGVzT3JkZXJUb3RhbEFtb3VudCA9IHJlZigwKTsKICAgIHdhdGNoKG9yZGVySXRlbXMsIGZ1bmN0aW9uICgpIHsKICAgICAgb3JkZXJJdGVtcy52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uIChvcmRlckl0ZW0pIHsKICAgICAgICBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUgPSBwYXJzZUZsb2F0KHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSArIG9yZGVySXRlbS50b3RhbF9hbW91bnQpOwogICAgICB9KTsKICAgIH0pOwoKICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGVtaXQoKTsKICAgIH07CgogICAgdmFyIHNob3dDdXN0b21lck1vZGFsID0gZnVuY3Rpb24gc2hvd0N1c3RvbWVyTW9kYWwoKSB7CiAgICAgIGN1c3RvbWVyTW9kYWwudmFsdWUgPSB0cnVlOwogICAgfTsKCiAgICB2YXIgb25TZWxlY3RDdXN0b21lciA9IGZ1bmN0aW9uIG9uU2VsZWN0Q3VzdG9tZXIoY3VzdG9tZXIpIHsKICAgICAgaWYgKGN1c3RvbWVyICE9PSBudWxsICYmIGN1c3RvbWVyICE9PSB2b2lkIDAgJiYgY3VzdG9tZXIuaWQpIHsKICAgICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9uYW1lID0gY3VzdG9tZXIubmFtZTsKICAgICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9pZCA9IGN1c3RvbWVyLmlkOwogICAgICAgIGZvcm1EYXRhLnZhbHVlLmRvY3VtZW50X2lkID0gY3VzdG9tZXIuZG9jdW1lbnRfaWQ7CiAgICAgICAgZm9ybURhdGEudmFsdWUuYWRkcmVzcyA9IGN1c3RvbWVyLmFkZHJlc3M7CiAgICAgICAgZm9ybURhdGEudmFsdWUucmVtYXJrcyA9IGN1c3RvbWVyLnJlbWFya3M7CiAgICAgICAgZm9ybURhdGEudmFsdWUuYXJlYSA9IGN1c3RvbWVyLmFyZWE7CiAgICAgICAgZm9ybURhdGEudmFsdWUuc2FsZXNtYW5faWRfMSA9IGN1c3RvbWVyLnNhbGVzbWFuX2lkXzE7CiAgICAgICAgZm9ybURhdGEudmFsdWUuc2FsZXNtYW5faWRfMiA9IGN1c3RvbWVyLnNhbGVzbWFuX2lkXzI7CiAgICAgICAgZm9ybURhdGEudmFsdWUudGVybV9pZCA9IGN1c3RvbWVyLnRlcm1faWQ7CiAgICAgICAgZm9ybURhdGEudmFsdWUudmF0X2lkID0gY3VzdG9tZXIudmF0X2lkOwogICAgICAgIGZvcm1EYXRhLnZhbHVlLnR5cGUgPSBjdXN0b21lci50eXBlOwogICAgICB9CgogICAgICBjdXN0b21lck1vZGFsLnZhbHVlID0gZmFsc2U7CiAgICB9OwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0NyZWF0ZScpIHsKICAgICAgICB2YXIgcGF5bG9hZCA9IGZvcm1EYXRhLnZhbHVlOwogICAgICAgIHBheWxvYWQuZGF0ZV9wb3N0ZWQgPSBkYXRlUG9zdGVkLnZhbHVlOwogICAgICAgIHBheWxvYWQub3JkZXJfaXRlbXMgPSBvcmRlckl0ZW1zLnZhbHVlOwogICAgICAgIHBheWxvYWQuYW1vdW50ID0gc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlOwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc09yZGVyU3RvcmUvY3JlYXRlJywgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBlbWl0KCdzdWJtaXQnLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICB2YXIgZXJyb3JzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUuU2FsZXNPcmRlclN0b3JlLmVycm9yczsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50OiBzYWxlc09yZGVyVG90YWxBbW91bnQsCiAgICAgIGRvY3VtZW50czogZG9jdW1lbnRzLAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgdGVybXM6IHRlcm1zLAogICAgICB0eXBlczogdHlwZXMsCiAgICAgIHZhdHM6IHZhdHMsCiAgICAgIGZldGNoT3JkZXJJdGVtczogZmV0Y2hPcmRlckl0ZW1zLAogICAgICBzYWxlc21hbnM6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gc3RvcmUuc3RhdGUuU2FsZXNtYW5TdG9yZS5zYWxlc21hbnM7CiAgICAgIH0pLAogICAgICBzdWJtaXQ6IHN1Ym1pdCwKICAgICAgZGF0ZVBvc3RlZDogZGF0ZVBvc3RlZCwKICAgICAgb25TZWxlY3RDdXN0b21lcjogb25TZWxlY3RDdXN0b21lciwKICAgICAgc2hvd0N1c3RvbWVyTW9kYWw6IHNob3dDdXN0b21lck1vZGFsLAogICAgICBjYW5jZWw6IGNhbmNlbCwKICAgICAgY3VzdG9tZXJNb2RhbDogY3VzdG9tZXJNb2RhbCwKICAgICAgZm9ybURhdGE6IGZvcm1EYXRhLAogICAgICBpY29uczogewogICAgICAgIG1kaUluZm9ybWF0aW9uOiBtZGlJbmZvcm1hdGlvbiwKICAgICAgICBtZGlBY2NvdW50UGx1c091dGxpbmU6IG1kaUFjY291bnRQbHVzT3V0bGluZQogICAgICB9CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6SA,SACAA,QADA,EACAC,GADA,EACAC,KADA,EACAC,KADA,QAEA,sBAFA;AAGA,SACAC,cADA,EAEAC,qBAFA,QAGA,SAHA;AAIA;AACA;AACA;AAEA;EACAC,sBADA;EAEAC;IACAC,0BADA;IAEAC;EAFA,CAFA;EAMAC;IACAC;MACAC,YADA;MAEAC,cAFA;MAGAC;QAAA;MAAA;IAHA,CADA;IAMAC;MACAH,YADA;MAEAC,eAFA;MAGAC;IAHA;EANA,CANA;EAkBAE,KAlBA,iBAkBAN,KAlBA,QAkBA;IAAA;;IAAA;IACA;IACA;IACA;IACA;MACAO,gBADA;MAEAC,mBAFA;MAGAC,iBAHA;MAIAC,iBAJA;MAKAC,wBALA;MAMAC,iBANA;MAOAC,aAPA;MAQAC,aARA;MASAC,UATA;MAUAC,mBAVA;MAWAC,mBAXA;MAYAC,aAZA;MAaAC;IAbA;IAeA;IAEAC;IACAA;IACAA;IACAA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;QACAC;QAEA;MACA,CAJA;IAAA;IAKA,iBACA,SADA,EAEA,aAFA;;IAKA;MACA;;MACA;MAAA;MAAA;MAAA;MAAA;;MAEA;IACA,CALA;;IAOA;IAEAC;IAEA7B;MACA6B;IACA,CAFA;;IAIA;MACAC;IACA,CAFA;;IAIA;IAEA9B;MACA8B;QACAC;MACA,CAFA;IAGA,CAJA;;IAMA;MACAC;IACA,CAFA;;IAIA;MACAC;IACA,CAFA;;IAIA;MACA;QACAJ;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;MACA;;MAEAI;IACA,CAhBA;;IAkBA;MACA;QACA;QACAC;QACAA;QACAA;QAEAP,uDACA;UACA;YACAK;UACA;QACA,CALA;MAOA;IACA,CAfA;;IAiBA;MAAA;IAAA;IAEA;MACAD,4CADA;MAEAI,oBAFA;MAGAC,cAHA;MAIAC,YAJA;MAKAC,YALA;MAMAC,UANA;MAOAC,gCAPA;MAQAC;QAAA;MAAA,EARA;MASAC,cATA;MAUAC,sBAVA;MAWAC,kCAXA;MAYAC,oCAZA;MAaAC,cAbA;MAcAb,4BAdA;MAeAJ,kBAfA;MAgBAkB;QACA9C,8BADA;QAEAC;MAFA;IAhBA;EAqBA;AApJA","names":["computed","ref","toRef","watch","mdiInformation","mdiAccountPlusOutline","name","components","CustomerForm","SalesOrderItems","props","mode","type","required","default","data","setup","dateModal","customer_name","customer_id","date_posted","sales_order_number","document_id","address","remarks","area","salesman_id_1","salesman_id_2","term_id","vat_id","store","document","formData","orderItems","salesOrderTotalAmount","emit","customerModal","payload","documents","errors","terms","types","vats","fetchOrderItems","salesmans","submit","datePosted","onSelectCustomer","showCustomerModal","cancel","icons"],"sourceRoot":"src/views/pages/sales","sources":["SalesOrderForm.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"pa-6\">\n      {{ mode }} Sales Order\n    </v-card-title>\n    <v-card-text>\n      <v-form>\n        <v-row>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"primary\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Information\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-menu\n              v-model=\"formData.dateModal\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              max-width=\"290px\"\n              min-width=\"auto\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"datePosted\"\n                  label=\"Date\"\n                  persistent-hint\n                  :prepend-icon=\"icons.mdiCalendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                ></v-text-field>\n              </template>\n\n              <v-date-picker\n                v-model=\"datePosted\"\n                no-title\n                color=\"primary\"\n                @input=\"formData.dateModal = false\"\n              ></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.sales_order_number\"\n              outlined\n              :error-messages=\"errors.sales_order_number\"\n              dense\n              hide-details=\"auto\"\n              label=\"Sales Order Number\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.document_id\"\n              :items=\"documents\"\n              item-text=\"title\"\n              item-value=\"id\"\n              label=\"Document\"\n              :error-messages=\"errors.document_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"4\"\n            class=\"pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.customer_name\"\n              outlined\n              readonly\n              :error-messages=\"errors.customer_id\"\n              dense\n              hide-details=\"auto\"\n              label=\"Customer\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"2\"\n          >\n            <v-btn\n              class=\"md4\"\n              color=\"primary\"\n              x-small\n              dark\n              @click=\"showCustomerModal\"\n            >\n              Get Customer\n              <v-icon>\n                {{ icons.mdiAccountPlusOutline }}\n              </v-icon>\n            </v-btn>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.type\"\n              :items=\"types\"\n              label=\"Customer Type\"\n              :error-messages=\"errors.type\"\n              readonly\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.area\"\n              outlined\n              dense\n              :error-messages=\"errors.area\"\n              hide-details=\"auto\"\n              label=\"Area\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.term_id\"\n              :items=\"terms\"\n\n              label=\"Term\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :error-messages=\"errors.term_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.vat_id\"\n              :items=\"vats\"\n              item-text=\"code\"\n              item-value=\"id\"\n\n              label=\"Vat\"\n              :error-messages=\"errors.vat_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_1\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n\n              label=\"Agent 1\"\n              :error-messages=\"errors.salesman_id_1\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_2\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n\n              label=\"Agent 2\"\n              :error-messages=\"errors.salesman_id_2\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.address\"\n              outlined\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.address\"\n              hide-details=\"auto\"\n              label=\"Address\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.remarks\"\n              outlined\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.remarks\"\n              hide-details=\"auto\"\n              label=\"Remarks\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.promo_code\"\n              outlined\n              dense\n              :error-messages=\"errors.promo_code\"\n              hide-details=\"auto\"\n              label=\"Promo Code\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n        <sales-order-items\n          class=\"mt-6\"\n          @addItem=\"fetchOrderItems\"\n        ></sales-order-items>\n        <v-row>\n          <v-col\n            cols=\"auto\"\n            class=\"d-flex\"\n          >\n            <v-btn\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"submit\"\n            >\n              Save\n            </v-btn>\n            <v-btn\n              outlined\n              class=\"me-3 mt-4\"\n              type=\"reset\"\n              @click.prevent=\"cancel\"\n            >\n              Cancel\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n      <v-dialog\n        v-model=\"customerModal\"\n        fullscreen\n        hide-overlay\n        width=\"1100px\"\n        height=\"500px\"\n        transition=\"dialog-bottom-transition\"\n      >\n        <customer-form\n          :mode=\"'Selecting'\"\n          @submit=\"onSelectCustomer\"\n          @clicked=\"cancel\"\n        ></customer-form>\n      </v-dialog>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport {\n  computed, ref, toRef, watch,\n} from '@vue/composition-api'\nimport {\n  mdiInformation,\n  mdiAccountPlusOutline,\n} from '@mdi/js'\nimport CustomerForm from '@/views/pages/master-files/customers/CustomerForm.vue'\nimport SalesOrderItems from '@/views/pages/sales/SaleOrderItems.vue'\nimport store from '@/store'\n\nexport default {\n  name: 'SalesOrderForm',\n  components: {\n    CustomerForm,\n    SalesOrderItems,\n  },\n  props: {\n    mode: {\n      type: String,\n      required: true,\n      default: (() => 'Create'),\n    },\n    data: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const customerModal = ref(false)\n    const modeData = toRef(props, 'mode')\n    const dataProp = toRef(props, 'data')\n    const formData = ref({\n      dateModal: false,\n      customer_name: null,\n      customer_id: null,\n      date_posted: null,\n      sales_order_number: null,\n      document_id: null,\n      address: null,\n      remarks: null,\n      area: null,\n      salesman_id_1: null,\n      salesman_id_2: null,\n      term_id: null,\n      vat_id: null,\n    })\n    const orderItems = ref([])\n\n    store.dispatch('TermStore/list')\n    store.dispatch('VatStore/list')\n    store.dispatch('SalesmanStore/list')\n    store.dispatch('DocumentStore/list')\n    const terms = computed(() => store.state.TermStore.terms)\n    const vats = computed(() => store.state.VatStore.vats)\n    const documents = computed(() => store.state.DocumentStore.documents.map(document => {\n      document.title = `${document.document_name} - ${document.module}`\n\n      return document\n    }))\n    const types = ref([\n      'Regular',\n      'Distributor',\n    ])\n\n    const formatDate = dates => {\n      if (!dates) return null\n      const [year, month, day] = dates.split('-')\n\n      return `${month}/${day}/${year}`\n    }\n\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n\n    formData.value = dataProp.value ?? formData.value\n\n    watch(dataProp, () => {\n      formData.value = dataProp.value\n    })\n\n    const fetchOrderItems = items => {\n      orderItems.value = items\n    }\n\n    const salesOrderTotalAmount = ref(0)\n\n    watch(orderItems, () => {\n      orderItems.value.forEach(orderItem => {\n        salesOrderTotalAmount.value = parseFloat(salesOrderTotalAmount.value + orderItem.total_amount)\n      })\n    })\n\n    const cancel = () => {\n      emit()\n    }\n\n    const showCustomerModal = () => {\n      customerModal.value = true\n    }\n\n    const onSelectCustomer = customer => {\n      if (customer?.id) {\n        formData.value.customer_name = customer.name\n        formData.value.customer_id = customer.id\n        formData.value.document_id = customer.document_id\n        formData.value.address = customer.address\n        formData.value.remarks = customer.remarks\n        formData.value.area = customer.area\n        formData.value.salesman_id_1 = customer.salesman_id_1\n        formData.value.salesman_id_2 = customer.salesman_id_2\n        formData.value.term_id = customer.term_id\n        formData.value.vat_id = customer.vat_id\n        formData.value.type = customer.type\n      }\n\n      customerModal.value = false\n    }\n\n    const submit = () => {\n      if (modeData.value === 'Create') {\n        const payload = formData.value\n        payload.date_posted = datePosted.value\n        payload.order_items = orderItems.value\n        payload.amount = salesOrderTotalAmount.value\n\n        store.dispatch('SalesOrderStore/create', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      }\n    }\n\n    const errors = computed(() => store.state.SalesOrderStore.errors)\n\n    return {\n      salesOrderTotalAmount,\n      documents,\n      errors,\n      terms,\n      types,\n      vats,\n      fetchOrderItems,\n      salesmans: computed(() => store.state.SalesmanStore.salesmans),\n      submit,\n      datePosted,\n      onSelectCustomer,\n      showCustomerModal,\n      cancel,\n      customerModal,\n      formData,\n      icons: {\n        mdiInformation,\n        mdiAccountPlusOutline,\n      },\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}