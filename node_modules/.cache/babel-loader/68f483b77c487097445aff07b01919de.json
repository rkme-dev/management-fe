{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/user-access-management/users/UserAbilitiesForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/user-access-management/users/UserAbilitiesForm.vue","mtime":1662204120478},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtZGlBbGVydE91dGxpbmUsIG1kaUNsb3VkVXBsb2FkT3V0bGluZSwgbWRpSHVtYW5FZGl0IH0gZnJvbSAnQG1kaS9qcyc7CmltcG9ydCB7IHRvUmVmLCBvbk1vdW50ZWQsIHJlZiwgd2F0Y2ggfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBVc2VyQWNjZXNzTWFuYWdlbWVudFNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL1VzZXJBY2Nlc3NNYW5hZ2VtZW50U2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXNlckFiaWxpdGllc0Zvcm1WdWUnLAogIHByb3BzOiB7CiAgICB1c2VyOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBsb2FkaW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMpIHsKICAgIHZhciBzZXJ2aWNlID0gbmV3IFVzZXJBY2Nlc3NNYW5hZ2VtZW50U2VydmljZSgpOwogICAgdmFyIHVzZXJEYXRhID0gdG9SZWYocHJvcHMsICd1c2VyJyk7CiAgICB2YXIgYWJpbGl0aWVzT3B0aW9ucyA9IHJlZihbXSk7CiAgICB2YXIgcm9sZU9wdGlvbnMgPSByZWYoW10pOwogICAgdmFyIGFiaWxpdGllc1NlbGVjdGVkID0gcmVmKFtdKTsKICAgIHZhciBsb2FkaW5nTG9jYWxlID0gdG9SZWYocHJvcHMsICdsb2FkaW5nJyk7CiAgICB2YXIgc2hvd0FsZXJ0ID0gcmVmKGZhbHNlKTsKICAgIHZhciBsb2FkaW5nQWJpbGl0aWVzID0gcmVmKHRydWUpOwogICAgdmFyIHJvbGVBYmlsaXR5SWRzID0gcmVmKFtdKTsKCiAgICB2YXIgYXJyYXlDb2x1bW4gPSBmdW5jdGlvbiBhcnJheUNvbHVtbihhcnJheSwgY29sdW1uKSB7CiAgICAgIGlmIChhcnJheSA9PT0gdW5kZWZpbmVkIHx8IGFycmF5ID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICByZXR1cm4gYXJyYXkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1bY29sdW1uXTsKICAgICAgfSk7CiAgICB9OwoKICAgIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKHVzZXJEYXRhLnZhbHVlLmRlcGFydG1lbnRfaWQgPT09IG51bGwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0QWJpbGl0aWVzKHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBhYmlsaXRpZXNPcHRpb25zLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIGFiaWxpdGllc1NlbGVjdGVkLnZhbHVlID0gdXNlckRhdGEudmFsdWUuYWJpbGl0aWVzLm1hcChmdW5jdGlvbiAoYWJpbGl0eSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYWJpbGl0eS5pZDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbG9hZGluZ0FiaWxpdGllcy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmdldFJvbGVzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHJvbGVPcHRpb25zLnZhbHVlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0RGVwYXJ0bWVudEFiaWxpdGllcyh1c2VyRGF0YS52YWx1ZS5kZXBhcnRtZW50X2lkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgYWJpbGl0aWVzT3B0aW9ucy52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBhYmlsaXRpZXNTZWxlY3RlZC52YWx1ZSA9IHVzZXJEYXRhLnZhbHVlLmFiaWxpdGllcy5tYXAoZnVuY3Rpb24gKGFiaWxpdHkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFiaWxpdHkuaWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxvYWRpbmdBYmlsaXRpZXMudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0RGVwYXJ0bWVudFJvbGVzKHVzZXJEYXRhLnZhbHVlLmRlcGFydG1lbnRfaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICByb2xlT3B0aW9ucy52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZQogICAgICAgICAgICAgIGNoZWNrQWJpbGl0aWVzKHVzZXJEYXRhLnZhbHVlKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKCiAgICB2YXIgY2hlY2tBYmlsaXRpZXMgPSBmdW5jdGlvbiBjaGVja0FiaWxpdGllcyh2YWx1ZSkgewogICAgICB2YXIgX2FycmF5Q29sdW1uOwoKICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUgPSB2YWx1ZS5hYmlsaXRpZXMubWFwKGZ1bmN0aW9uIChhYmlsaXR5KSB7CiAgICAgICAgcmV0dXJuIGFiaWxpdHkuaWQ7CiAgICAgIH0pOwogICAgICB2YXIgcm9sZVNlbGVjdGVkID0gcm9sZU9wdGlvbnMudmFsdWUuZmluZChmdW5jdGlvbiAocm9sZSkgewogICAgICAgIHJldHVybiByb2xlLmlkID09PSB2YWx1ZS5yb2xlX2lkOwogICAgICB9KTsKICAgICAgcm9sZUFiaWxpdHlJZHMudmFsdWUgPSAoX2FycmF5Q29sdW1uID0gYXJyYXlDb2x1bW4ocm9sZVNlbGVjdGVkID09PSBudWxsIHx8IHJvbGVTZWxlY3RlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcm9sZVNlbGVjdGVkLmFiaWxpdGllcywgJ2lkJykpICE9PSBudWxsICYmIF9hcnJheUNvbHVtbiAhPT0gdm9pZCAwID8gX2FycmF5Q29sdW1uIDogW107CiAgICAgIGFiaWxpdGllc09wdGlvbnMudmFsdWUuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlLCBpbmRleCkgewogICAgICAgIHZhciBjb3VudE9mQWJpbGl0eSA9IDA7CiAgICAgICAgbW9kdWxlLmFiaWxpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIChhYmlsaXR5LCBzdWJJbmRleCkgewogICAgICAgICAgaWYgKHJvbGVBYmlsaXR5SWRzLnZhbHVlLmluY2x1ZGVzKGFiaWxpdHkuaWQpID09PSBmYWxzZSkgewogICAgICAgICAgICBpZiAoKGFiaWxpdHkgPT09IG51bGwgfHwgYWJpbGl0eSA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWJpbGl0eS5mcm9tUm9sZSkgIT09IHVuZGVmaW5lZCAmJiAoYWJpbGl0eSA9PT0gbnVsbCB8fCBhYmlsaXR5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhYmlsaXR5LmZyb21Sb2xlKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHZhciBmaW5kSW5kZXggPSBhYmlsaXRpZXNTZWxlY3RlZC52YWx1ZS5maW5kSW5kZXgoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaWQgPT09IGFiaWxpdHkuaWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUuc3BsaWNlKGZpbmRJbmRleCwgMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFiaWxpdGllc09wdGlvbnMudmFsdWVbaW5kZXhdLmFiaWxpdGllc1tzdWJJbmRleF0ubG9ja2VkID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhYmlsaXRpZXNPcHRpb25zLnZhbHVlW2luZGV4XS5hYmlsaXRpZXNbc3ViSW5kZXhdLmZyb21Sb2xlID0gdHJ1ZTsKICAgICAgICAgICAgYWJpbGl0aWVzT3B0aW9ucy52YWx1ZVtpbmRleF0uYWJpbGl0aWVzW3N1YkluZGV4XS5sb2NrZWQgPSB0cnVlOwogICAgICAgICAgICBhYmlsaXRpZXNTZWxlY3RlZC52YWx1ZS5wdXNoKGFiaWxpdHkuaWQpOwogICAgICAgICAgICBjb3VudE9mQWJpbGl0eSArPSAxOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGFiaWxpdGllc09wdGlvbnMudmFsdWVbaW5kZXhdLmxvY2tlZCA9IG1vZHVsZS5hYmlsaXRpZXMubGVuZ3RoID09PSBjb3VudE9mQWJpbGl0eTsKICAgICAgfSk7CiAgICB9OwoKICAgIHdhdGNoKHVzZXJEYXRhLnZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgY2hlY2tBYmlsaXRpZXModmFsdWUpOwogICAgfSk7IC8vIHdhdGNoKGFiaWxpdGllc1NlbGVjdGVkLCB2YWx1ZSA9PiB7CiAgICAvLyAgIGNvbnNvbGUubG9nKHZhbHVlKQogICAgLy8gfSwgdHJ1ZSkKCiAgICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkgewogICAgICByb3V0ZXIucHVzaCgnL3VzZXJzJyk7CiAgICB9OwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdVc2VyQWNjZXNzTWFuYWdlbWVudFN0b3JlL3VwZGF0ZVVzZXInLCB7CiAgICAgICAgcm9sZV9pZDogdXNlckRhdGEudmFsdWUucm9sZV9pZCwKICAgICAgICBhYmlsaXRpZXM6IGFiaWxpdGllc1NlbGVjdGVkLnZhbHVlLAogICAgICAgIGlkOiB1c2VyRGF0YS52YWx1ZS5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUgPSByZXNwb25zZS5kYXRhLmFiaWxpdGllcy5tYXAoZnVuY3Rpb24gKGFiaWxpdHkpIHsKICAgICAgICAgICAgcmV0dXJuIGFiaWxpdHkuaWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNob3dBbGVydC52YWx1ZSA9IHRydWU7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2hvd0FsZXJ0LnZhbHVlID0gZmFsc2U7CiAgICAgICAgICB9LCAxNTAwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBhYmlsaXRpZXNPcHRpb25zOiBhYmlsaXRpZXNPcHRpb25zLAogICAgICBhYmlsaXRpZXNTZWxlY3RlZDogYWJpbGl0aWVzU2VsZWN0ZWQsCiAgICAgIGxvYWRpbmdBYmlsaXRpZXM6IGxvYWRpbmdBYmlsaXRpZXMsCiAgICAgIGxvYWRpbmdMb2NhbGU6IGxvYWRpbmdMb2NhbGUsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpQWxlcnRPdXRsaW5lOiBtZGlBbGVydE91dGxpbmUsCiAgICAgICAgbWRpQ2xvdWRVcGxvYWRPdXRsaW5lOiBtZGlDbG91ZFVwbG9hZE91dGxpbmUsCiAgICAgICAgbWRpSHVtYW5FZGl0OiBtZGlIdW1hbkVkaXQKICAgICAgfSwKICAgICAgZ29CYWNrOiBnb0JhY2ssCiAgICAgIHJvbGVPcHRpb25zOiByb2xlT3B0aW9ucywKICAgICAgc2hvd0FsZXJ0OiBzaG93QWxlcnQsCiAgICAgIHN1Ym1pdDogc3VibWl0LAogICAgICB1c2VyRGF0YTogdXNlckRhdGEKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA,SACAA,KADA,EAEAC,SAFA,EAGAC,GAHA,EAIAC,KAJA,QAKA,sBALA;AAMA;AACA;AACA;AAEA;EACAC,4BADA;EAEAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,aADA;MAEAG,aAFA;MAGAF;IAHA;EALA,CAFA;EAaAG,KAbA,iBAaAN,KAbA,EAaA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IACA;MACA;QACA;MACA;;MAEA;QAAA;MAAA;IACA,CANA;;IAQAJ;MAAA;QAAA;UAAA;YAAA;cAAA,MACAW,qCADA;gBAAA;gBAAA;cAAA;;cAAA;cAAA,OAEAC,2BACAC,IADA,CACA;gBACAC;gBACAC;kBAAA;gBAAA;gBACAC;cACA,CALA,CAFA;;YAAA;cAAA;cAAA,OASAJ,mBACAC,IADA,CACA;gBACAI;cACA,CAHA,CATA;;YAAA;cAAA;cAAA;;YAAA;cAAA;cAAA,OAcAL,6DACAC,IADA,CACA;gBACAC;gBACAC;kBAAA;gBAAA;gBACAC;cACA,CALA,CAdA;;YAAA;cAAA;cAAA,OAqBAJ,yDACAC,IADA,CACA;gBACAI;cACA,CAHA,CArBA;;YAAA;cA2BA;cACAC;;YA5BA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;IA+BA;MAAA;;MACAH;QAAA;MAAA;MACA;QAAA;MAAA;MACAI;MAEAL;QACA;QAEAM;UACA;YACA;cACA;gBAAA;cAAA;cAEAL;YACA;;YAEAD;UACA,CARA,MAQA;YACAA;YACAA;YACAC;YACAM;UACA;QACA,CAfA;QAiBAP;MACA,CArBA;IAsBA,CA3BA;;IA6BAZ;MACAgB;IACA,CAFA,EA9EA,CAkFA;IACA;IACA;;IAEA;MACAI;IACA,CAFA;;IAIA;MACAC;QACAC,+BADA;QAEAC,kCAFA;QAGAC;MAHA,GAIAb,IAJA,CAKA;QACA;UACAE;YAAA;UAAA;UACAY;UACAC;YACAD;UACA,CAFA,EAEA,IAFA;QAGA;MACA,CAbA;IAeA,CAhBA;;IAkBA;MACAb,kCADA;MAEAC,oCAFA;MAGAC,kCAHA;MAIAa,4BAJA;MAKAC;QACAC,gCADA;QAEAC,4CAFA;QAGAC;MAHA,CALA;MAUAC,cAVA;MAWAjB,wBAXA;MAYAU,oBAZA;MAaAQ,cAbA;MAcAxB;IAdA;EAgBA;AAzIA","names":["toRef","onMounted","ref","watch","name","props","user","type","required","loading","default","setup","userData","service","then","abilitiesOptions","abilitiesSelected","loadingAbilities","roleOptions","checkAbilities","roleAbilityIds","module","countOfAbility","router","store","role_id","abilities","id","showAlert","setTimeout","loadingLocale","icons","mdiAlertOutline","mdiCloudUploadOutline","mdiHumanEdit","goBack","submit"],"sourceRoot":"src/views/pages/user-access-management/users","sources":["UserAbilitiesForm.vue"],"sourcesContent":["<template>\n  <v-card\n    flat\n    class=\"pa-3 mt-2\"\n  >\n    <v-alert\n      v-show=\"showAlert\"\n      dense\n      text\n      type=\"success\"\n      dismissible\n    >\n      Successfully updated\n    </v-alert>\n    <v-card-text>\n      <v-progress-linear\n        v-if=\"loadingLocale || loadingAbilities\"\n        indeterminate\n        color=\"primary\"\n      ></v-progress-linear>\n      <v-form\n        v-if=\"!loadingLocale && !loadingAbilities\"\n        class=\"multi-col-validation mt-6\"\n      >\n        <v-row>\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n          >\n            <v-select\n              v-model=\"userData.role_id\"\n              dense\n              outlined\n              :prepend-inner-icon=\"icons.mdiHumanEdit\"\n              item-text=\"title\"\n              item-value=\"id\"\n              label=\"Role\"\n              :items=\"roleOptions\"\n            ></v-select>\n          </v-col>\n\n          <v-col\n            cols=\"12\"\n            md=\"9\"\n          >\n            <v-treeview\n              v-model=\"abilitiesSelected\"\n              selectable\n              hoverable\n              selected-color=\"primary\"\n              item-disabled=\"locked\"\n              item-key=\"id\"\n              item-text=\"name\"\n              item-children=\"abilities\"\n              :items=\"abilitiesOptions\"\n            ></v-treeview>\n          </v-col>\n\n          <v-col cols=\"12\">\n            <v-btn\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"submit\"\n            >\n              Save changes\n            </v-btn>\n            <v-btn\n              color=\"info\"\n              outlined\n              class=\"mt-3\"\n              type=\"reset\"\n              @click.prevent=\"goBack\"\n            >\n              Back to Users Page\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </v-card-text>\n  </v-card>\n</template>\n<script>\nimport { mdiAlertOutline, mdiCloudUploadOutline, mdiHumanEdit } from '@mdi/js'\nimport {\n  toRef,\n  onMounted,\n  ref,\n  watch,\n} from '@vue/composition-api'\nimport router from '@/router'\nimport store from '@/store'\nimport UserAccessManagementService from '@/service/UserAccessManagementService'\n\nexport default {\n  name: 'UserAbilitiesFormVue',\n  props: {\n    user: {\n      type: Object,\n      required: true,\n    },\n    loading: {\n      type: Boolean,\n      default: true,\n      required: true,\n    },\n  },\n  setup(props) {\n    const service = new UserAccessManagementService()\n    const userData = toRef(props, 'user')\n    const abilitiesOptions = ref([])\n    const roleOptions = ref([])\n    const abilitiesSelected = ref([])\n    const loadingLocale = toRef(props, 'loading')\n    const showAlert = ref(false)\n    const loadingAbilities = ref(true)\n    const roleAbilityIds = ref([])\n    const arrayColumn = (array, column) => {\n      if (array === undefined || array === null) {\n        return []\n      }\n\n      return array.map(item => item[column])\n    }\n\n    onMounted(async () => {\n      if (userData.value.department_id === null) {\n        await service.getAbilities(true)\n          .then(response => {\n            abilitiesOptions.value = response.data\n            abilitiesSelected.value = userData.value.abilities.map(ability => ability.id)\n            loadingAbilities.value = false\n          })\n\n        await service.getRoles()\n          .then(response => {\n            roleOptions.value = response.data\n          })\n      } else {\n        await service.getDepartmentAbilities(userData.value.department_id)\n          .then(response => {\n            abilitiesOptions.value = response.data\n            abilitiesSelected.value = userData.value.abilities.map(ability => ability.id)\n            loadingAbilities.value = false\n          })\n\n        await service.getDepartmentRoles(userData.value.department_id)\n          .then(response => {\n            roleOptions.value = response.data\n          })\n      }\n\n      // eslint-disable-next-line no-use-before-define\n      checkAbilities(userData.value)\n    })\n\n    const checkAbilities = value => {\n      abilitiesSelected.value = value.abilities.map(ability => ability.id)\n      const roleSelected = roleOptions.value.find(role => role.id === value.role_id)\n      roleAbilityIds.value = arrayColumn(roleSelected?.abilities, 'id') ?? []\n\n      abilitiesOptions.value.forEach((module, index) => {\n        let countOfAbility = 0\n\n        module.abilities.forEach((ability, subIndex) => {\n          if (roleAbilityIds.value.includes(ability.id) === false) {\n            if (ability?.fromRole !== undefined && ability?.fromRole === true) {\n              const findIndex = abilitiesSelected.value.findIndex(id => id === ability.id)\n\n              abilitiesSelected.value.splice(findIndex, 1)\n            }\n\n            abilitiesOptions.value[index].abilities[subIndex].locked = false\n          } else {\n            abilitiesOptions.value[index].abilities[subIndex].fromRole = true\n            abilitiesOptions.value[index].abilities[subIndex].locked = true\n            abilitiesSelected.value.push(ability.id)\n            countOfAbility += 1\n          }\n        })\n\n        abilitiesOptions.value[index].locked = module.abilities.length === countOfAbility\n      })\n    }\n\n    watch(userData.value, value => {\n      checkAbilities(value)\n    })\n\n    // watch(abilitiesSelected, value => {\n    //   console.log(value)\n    // }, true)\n\n    const goBack = () => {\n      router.push('/users')\n    }\n\n    const submit = () => {\n      store.dispatch('UserAccessManagementStore/updateUser', {\n        role_id: userData.value.role_id,\n        abilities: abilitiesSelected.value,\n        id: userData.value.id,\n      }).then(\n        response => {\n          if (response.status === undefined) {\n            abilitiesSelected.value = response.data.abilities.map(ability => ability.id)\n            showAlert.value = true\n            setTimeout(() => {\n              showAlert.value = false\n            }, 1500)\n          }\n        },\n      )\n    }\n\n    return {\n      abilitiesOptions,\n      abilitiesSelected,\n      loadingAbilities,\n      loadingLocale,\n      icons: {\n        mdiAlertOutline,\n        mdiCloudUploadOutline,\n        mdiHumanEdit,\n      },\n      goBack,\n      roleOptions,\n      showAlert,\n      submit,\n      userData,\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}