{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/drs/components/DrListSelection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/drs/components/DrListSelection.vue","mtime":1664972738676},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1662812531040},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1662812546066}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBjb21wdXRlZCwgcmVmLCB0b1JlZiwgd2F0Y2ggfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEckxpc3RTZWxlY3Rpb24nLAogIHByb3BzOiB7CiAgICBjdXN0b21lcklkOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICB2YXIgaWQgPSB0b1JlZihwcm9wcywgJ2N1c3RvbWVySWQnKTsKICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvZHJMaXN0QnlDdXN0b21lcicsIGlkLnZhbHVlKTsKICAgIHZhciBzZWxlY3RlZERycyA9IHJlZihbXSk7CiAgICB2YXIgbGlzdCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlNhbGVzRHJTdG9yZS5pdGVtczsKICAgIH0pOwogICAgdmFyIGxvYWRpbmcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5TYWxlc0RyU3RvcmUubG9hZGluZzsKICAgIH0pOwogICAgdmFyIHNob3dTdWJtaXQgPSByZWYoZmFsc2UpOwogICAgdmFyIHNlYXJjaCA9IHJlZigpOwogICAgd2F0Y2goc2VsZWN0ZWREcnMsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgY291bnRlciA9IDA7CiAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGRyKSB7CiAgICAgICAgaWYgKGRyLmFtb3VudF90b19wYXkgPiAwKSB7CiAgICAgICAgICBjb3VudGVyICs9IDE7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgc2hvd1N1Ym1pdC52YWx1ZSA9IGNvdW50ZXIgPT09IHZhbHVlLmxlbmd0aCAmJiB2YWx1ZS5sZW5ndGggIT09IDA7CiAgICB9KTsKCiAgICB2YXIgc3VibWl0ID0gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICBlbWl0KCdzZWxlY3RlZERycycsIHNlbGVjdGVkRHJzLnZhbHVlKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoOiBzZWFyY2gsCiAgICAgIHNob3dTdWJtaXQ6IHNob3dTdWJtaXQsCiAgICAgIHN1Ym1pdDogc3VibWl0LAogICAgICBsaXN0OiBsaXN0LAogICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICBzZWxlY3RlZERyczogc2VsZWN0ZWREcnMsCiAgICAgIGhlYWRlcnM6IFt7CiAgICAgICAgdGV4dDogJ0RhdGUnLAogICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogJ2NyZWF0ZWRfYXQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAnRFIgTm8nLAogICAgICAgIHZhbHVlOiAnc2FsZXNfZHJfbnVtYmVyJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ0JhbGFuY2UnLAogICAgICAgIHZhbHVlOiAnYW1vdW50JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1RvIFBheScsCiAgICAgICAgdmFsdWU6ICdhbW91bnRfdG9fcGF5JwogICAgICB9XQogICAgfTsKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,SACAA,QADA,EACAC,GADA,EACAC,KADA,EACAC,KADA,QAEA,sBAFA;AAGA;AAEA;EACAC,uBADA;EAEAC;IACAC;MACAC,YADA;MAEAC,cAFA;MAGAC;IAHA;EADA,CAFA;EASAC,KATA,iBASAL,KATA,QASA;IAAA;IACA;IACAM;IACA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;IACA;IAEAR;MACA;MAEAS;QACA;UACAC;QACA;MACA,CAJA;MAMAC;IACA,CAVA;;IAYA;MACAC;IACA,CAFA;;IAIA;MACAC,cADA;MAEAF,sBAFA;MAGAG,cAHA;MAIAC,UAJA;MAKAC,gBALA;MAMAC,wBANA;MAOAC,UACA;QACAC,YADA;QAEAC,cAFA;QAGAC,eAHA;QAIAZ;MAJA,CADA,EAOA;QAAAU;QAAAV;MAAA,CAPA,EAQA;QAAAU;QAAAV;MAAA,CARA,EASA;QAAAU;QAAAV;MAAA,CATA;IAPA;EAmBA;AArDA","names":["computed","ref","toRef","watch","name","props","customerId","type","required","default","setup","store","value","counter","showSubmit","emit","search","submit","list","loading","selectedDrs","headers","text","align","sortable"],"sourceRoot":"src/views/pages/sales/drs/components","sources":["DrListSelection.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-card-text>\n      <v-row>\n        <v-col cols=\"12\">\n          <v-data-table\n            v-model=\"selectedDrs\"\n            :items=\"list\"\n            :headers=\"headers\"\n            show-select\n            :loading=\"loading\"\n            :search=\"search\"\n          >\n            <template v-slot:top>\n              <v-toolbar\n                color=\"info\"\n                outlined\n              >\n                <v-toolbar-title>Sales DR List</v-toolbar-title>\n                <v-divider\n                  class=\"mx-4\"\n                  inset\n                  vertical\n                ></v-divider>\n                <v-spacer></v-spacer>\n                <v-text-field\n                  v-model=\"search\"\n                  append-icon=\"mdi-magnify\"\n                  label=\"Search\"\n                  single-line\n                  hide-details\n                  class=\"mr-4\"\n                ></v-text-field>\n              </v-toolbar>\n            </template>\n            <template #item.amount=\"{ item }\">\n              <v-currency-field\n                v-model=\"item.amount\"\n                disabled\n                prefix=\"PHP\"\n                class=\"text-green\"\n              >\n              </v-currency-field>\n            </template>\n            <template #item.amount_to_pay=\"{ item }\">\n              <v-currency-field\n                v-model=\"item.amount_to_pay\"\n                prefix=\"PHP\"\n                class=\"text-green\"\n              >\n              </v-currency-field>\n            </template>\n            <template #footer>\n              <v-row class=\"mb-2 mt-2\">\n                <v-col cols=\"8\"></v-col>\n                <v-col\n                  cols=\"2\"\n                  class=\"ml-auto\"\n                >\n                  <v-btn\n                    v-if=\"showSubmit\"\n                    color=\"info\"\n                    class=\"\"\n                    @click=\"submit\"\n                  >\n                    Submit\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </template>\n          </v-data-table>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport {\n  computed, ref, toRef, watch,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  name: 'DrListSelection',\n  props: {\n    customerId: {\n      type: Number,\n      required: true,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const id = toRef(props, 'customerId')\n    store.dispatch('SalesDrStore/drListByCustomer', id.value)\n    const selectedDrs = ref([])\n    const list = computed(() => store.state.SalesDrStore.items)\n    const loading = computed(() => store.state.SalesDrStore.loading)\n    const showSubmit = ref(false)\n    const search = ref()\n\n    watch(selectedDrs, value => {\n      let counter = 0\n\n      value.forEach(dr => {\n        if (dr.amount_to_pay > 0) {\n          counter += 1\n        }\n      })\n\n      showSubmit.value = counter === value.length && value.length !== 0\n    })\n\n    const submit = () => {\n      emit('selectedDrs', selectedDrs.value)\n    }\n\n    return {\n      search,\n      showSubmit,\n      submit,\n      list,\n      loading,\n      selectedDrs,\n      headers: [\n        {\n          text: 'Date',\n          align: 'start',\n          sortable: false,\n          value: 'created_at',\n        },\n        { text: 'DR No', value: 'sales_dr_number' },\n        { text: 'Balance', value: 'amount' },\n        { text: 'To Pay', value: 'amount_to_pay' },\n      ],\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}