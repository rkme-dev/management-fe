{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","mtime":1655105323889},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1654587530817},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1654587530760}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvbWFyay9wcm9qZWN0cy9lbmNvLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKdmFyIEF1dGhlbnRpY2F0aW9uU2VydmljZSA9IGZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uU2VydmljZSgpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0aGVudGljYXRpb25TZXJ2aWNlKTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhdXRoSGVhZGVyIiwgZnVuY3Rpb24gKCkgewogICAgdmFyIHVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpOwoKICAgIGlmICh1c2VyICE9PSBudWxsICYmIHVzZXIgIT09IHZvaWQgMCAmJiB1c2VyLmFjY2Vzc1Rva2VuKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh1c2VyLmFjY2Vzc1Rva2VuKQogICAgICB9OwogICAgfQoKICAgIHJldHVybiB7fTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhZG1pbkxvZ2luIiwgZnVuY3Rpb24gKHVzZXIpIHsKICAgIHJldHVybiBheGlvcy5wb3N0KCdhZG1pbi1sb2dpbicsIHsKICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICByZXNwb25zZS5kYXRhLmFjY2Vzc1Rva2VuID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgoKICAgICAgICByZXNwb25zZS5kYXRhLnJlZnJlc2hUb2tlbiA9IHJlc3BvbnNlLmRhdGEucmVmcmVzaF90b2tlbjsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsb2dvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwogIH0pOwp9OwoKZXhwb3J0IHsgQXV0aGVudGljYXRpb25TZXJ2aWNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/Users/mark/projects/enco-fe/src/service/AuthenticationService.js"],"names":["axios","AuthenticationService","user","JSON","parse","localStorage","getItem","accessToken","Authorization","post","email","password","then","response","data","access_token","refreshToken","refresh_token","setItem","stringify","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;IAEqBC,qB;;;sCACN,YAAM;AACjB,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;AAEA,QAAIJ,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEK,WAAV,EAAuB;AACrB,aAAO;AAAEC,QAAAA,aAAa,mBAAYN,IAAI,CAACK,WAAjB;AAAf,OAAP;AACD;;AAED,WAAO,EAAP;AACD,G;;sCAEY,UAAAL,IAAI;AAAA,WAAIF,KAAK,CACvBS,IADkB,CACb,aADa,EACE;AACnBC,MAAAA,KAAK,EAAER,IAAI,CAACQ,KADO;AAEnBC,MAAAA,QAAQ,EAAET,IAAI,CAACS;AAFI,KADF,EAKlBC,IALkB,CAKb,UAAAC,QAAQ,EAAI;AAChB,UAAIA,QAAQ,CAACC,IAAT,CAAcC,YAAlB,EAAgC;AAC9B;AACAF,QAAAA,QAAQ,CAACC,IAAT,CAAcP,WAAd,GAA4BM,QAAQ,CAACC,IAAT,CAAcC,YAA1C,CAF8B,CAG9B;;AACAF,QAAAA,QAAQ,CAACC,IAAT,CAAcE,YAAd,GAA6BH,QAAQ,CAACC,IAAT,CAAcG,aAA3C;AAEAZ,QAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeN,QAAQ,CAACC,IAAxB,CAA7B;AACD;;AAED,aAAOD,QAAQ,CAACC,IAAhB;AACD,KAhBkB,CAAJ;AAAA,G;;kCAkBR,YAAM;AACbT,IAAAA,YAAY,CAACe,UAAb,CAAwB,MAAxB;AACD,G;;;SA/BkBnB,qB","sourcesContent":["import axios from 'axios'\n\nexport default class AuthenticationService {\n  authHeader = () => {\n    const user = JSON.parse(localStorage.getItem('user'))\n\n    if (user?.accessToken) {\n      return { Authorization: `Bearer ${user.accessToken}` }\n    }\n\n    return {}\n  }\n\n  adminLogin = user => axios\n    .post('admin-login', {\n      email: user.email,\n      password: user.password,\n    })\n    .then(response => {\n      if (response.data.access_token) {\n        // eslint-disable-next-line no-param-reassign\n        response.data.accessToken = response.data.access_token\n        // eslint-disable-next-line no-param-reassign\n        response.data.refreshToken = response.data.refresh_token\n\n        localStorage.setItem('user', JSON.stringify(response.data))\n      }\n\n      return response.data\n    })\n\n  logout = () => {\n    localStorage.removeItem('user')\n  }\n}\n"]}]}