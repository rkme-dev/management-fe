{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js!/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/warehouse/raw-materials-release/components/RawMaterialAddSelector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/warehouse/raw-materials-release/components/RawMaterialAddSelector.vue","mtime":1659650011130},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js","mtime":1650363913040},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyByZWYsIHdhdGNoLCB0b1JlZiB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpL2Rpc3QvdnVlLWNvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCB7IG1kaU1pbnVzLCBtZGlQbHVzIH0gZnJvbSAnQG1kaS9qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmF3TWF0ZXJpYWxBZGRTZWxlY3RvcicsCiAgcHJvcHM6IHsKICAgIHByb2R1Y3REYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBpdGVtTnVtYmVyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHByb2R1Y3REcm9wZG93bjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBlbWl0ID0gX3JlZi5lbWl0OwogICAgdmFyIHByb2R1Y3QgPSB0b1JlZihwcm9wcywgJ3Byb2R1Y3REYXRhJyk7CiAgICB2YXIgcHJvZHVjdFNlbGVjdGlvbiA9IHJlZihbXSk7CiAgICB2YXIgaXNEaXNhYmxlZCA9IHJlZih0cnVlKTsKCiAgICBpZiAocHJvZHVjdC52YWx1ZS5pZCkgewogICAgICBpc0Rpc2FibGVkLnZhbHVlID0gZmFsc2U7CiAgICB9CgogICAgdmFyIGhhbmRsZUlzTnVtYmVyID0gZnVuY3Rpb24gaGFuZGxlSXNOdW1iZXIoZXZ0KSB7CiAgICAgIHZhciBldmVudCA9IGV2dCB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgIHZhciBjb2RlID0gZXZlbnQud2hpY2ggPyBldmVudC53aGljaCA6IGV2ZW50LmtleUNvZGU7CgogICAgICBpZiAoY29kZSA+IDMxICYmIChjb2RlIDwgNDggfHwgY29kZSA+IDU3KSAmJiBjb2RlICE9PSA0NikgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CgogICAgdmFyIGFkZFByb2R1Y3RSb3cgPSBmdW5jdGlvbiBhZGRQcm9kdWN0Um93KCkgewogICAgICBlbWl0KCdhZGRQcm9kdWN0Um93JywgcHJvZHVjdCk7CiAgICB9OwoKICAgIHZhciByZW1vdmVQcm9kdWN0ID0gZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdCgpIHsKICAgICAgZW1pdCgncmVtb3ZlUHJvZHVjdFJvdycsIHByb3BzLml0ZW1OdW1iZXIpOwogICAgfTsgLy8gZGlzYWJsZSBpdGVtIGluIGRyb3Bkb3duCgoKICAgIHZhciBoYW5kbGVEaXNhYmxlZEl0ZW0gPSBmdW5jdGlvbiBoYW5kbGVEaXNhYmxlZEl0ZW0oaXRlbSkgewogICAgICByZXR1cm4gISFpdGVtLmRpc2FibGVkOwogICAgfTsKCiAgICB3YXRjaChwcm9kdWN0LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChwcm9kdWN0LnZhbHVlLmlkKSB7CiAgICAgICAgaXNEaXNhYmxlZC52YWx1ZSA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICAgIHdhdGNoKHByb2R1Y3QudmFsdWUsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHByb2R1Y3QudmFsdWUudG90YWxfYm94ZXMpIHsKICAgICAgICB2YXIgcHJvZHVjdE1vZGVsID0gcHJvcHMucHJvZHVjdERyb3Bkb3duLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBwcm9kdWN0LnZhbHVlLnByb2R1Y3RfaWQ7CiAgICAgICAgfSk7CiAgICAgICAgcHJvZHVjdC52YWx1ZS50b3RhbF9waWVjZXMgPSBwYXJzZUludChwcm9kdWN0LnZhbHVlLnRvdGFsX2JveGVzLCAwKSAqIChwcm9kdWN0TW9kZWwgPT09IG51bGwgfHwgcHJvZHVjdE1vZGVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9kdWN0TW9kZWwuaXRlbXNfcGVyX2JveCk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9kdWN0LnZhbHVlLnByb2R1Y3RfaWQgJiYgcHJvZHVjdC52YWx1ZS50b3RhbF9waWVjZXMgJiYgcHJvZHVjdC52YWx1ZS50b3RhbF9ib3hlcykgewogICAgICAgIGlzRGlzYWJsZWQudmFsdWUgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpc0Rpc2FibGVkLnZhbHVlID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gewogICAgICBhZGRQcm9kdWN0Um93OiBhZGRQcm9kdWN0Um93LAogICAgICByZW1vdmVQcm9kdWN0OiByZW1vdmVQcm9kdWN0LAogICAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgICBwcm9kdWN0U2VsZWN0aW9uOiBwcm9kdWN0U2VsZWN0aW9uLAogICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICBpY29uczogewogICAgICAgIG1kaVBsdXM6IG1kaVBsdXMsCiAgICAgICAgbWRpTWludXM6IG1kaU1pbnVzCiAgICAgIH0sCiAgICAgIGhhbmRsZUlzTnVtYmVyOiBoYW5kbGVJc051bWJlciwKICAgICAgaGFuZGxlRGlzYWJsZWRJdGVtOiBoYW5kbGVEaXNhYmxlZEl0ZW0KICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AAEA,SACAA,QADA,EAEAC,OAFA,QAGA,SAHA;AAKA;EACAC,8BADA;EAEAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAG;IAFA,CALA;IASAC;MACAJ,WADA;MAEAG;QAAA;MAAA;IAFA;EATA,CAFA;EAgBAE,KAhBA,iBAgBAP,KAhBA,QAgBA;IAAA;IACA;IACA;IACA;;IAEA;MACAQ;IACA;;IAEA;MACA;MACA;;MAEA;QACAC;QAEA;MACA;;MAEA;IACA,CAXA;;IAaA;MACAC;IACA,CAFA;;IAIA;MACAA;IACA,CAFA,CA1BA,CA8BA;;;IACA;MAAA;IAAA;;IAEAC,MACAC,OADA,EAEA;MACA;QACAJ;MACA;IACA,CANA;IASAG,MACAC,aADA,EAEA;MACA;QACA;UAAA;QAAA;QAEAA;MACA;;MAEA;QACAJ;MACA,CAFA,MAEA;QACAA;MACA;IACA,CAdA;IAiBA;MACAK,4BADA;MAEAC,4BAFA;MAGAF,gBAHA;MAIAG,kCAJA;MAKAP,sBALA;MAMAQ;QACAlB,gBADA;QAEAD;MAFA,CANA;MAUAoB,8BAVA;MAWAC;IAXA;EAaA;AAxFA","names":["mdiMinus","mdiPlus","name","props","productData","type","required","itemNumber","default","productDropdown","setup","isDisabled","event","emit","watch","product","addProductRow","removeProduct","productSelection","icons","handleIsNumber","handleDisabledItem"],"sourceRoot":"src/views/pages/warehouse/raw-materials-release/components","sources":["RawMaterialAddSelector.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-row>\n      <v-col cols=\"3\">\n        <v-select\n          v-model=\"product.product_id\"\n          label=\"Raw Material\"\n          item-text=\"name\"\n          item-value=\"id\"\n          dense\n          :items=\"productDropdown\"\n          :item-disabled=\"handleDisabledItem\"\n        ></v-select>\n      </v-col>\n\n      <v-col cols=\"3\">\n        <v-text-field\n          v-model=\"product.total_boxes\"\n          label=\"Total Boxes\"\n          hide-details=\"auto\"\n          dense\n          @keypress=\"handleIsNumber\"\n        />\n      </v-col>\n\n      <v-col cols=\"3\">\n        <v-text-field\n          v-model=\"product.total_pieces\"\n          disabled\n          label=\"Total Pieces\"\n          hide-details=\"auto\"\n          dense\n          @keypress=\"handleIsNumber\"\n        />\n      </v-col>\n\n      <v-col cols=\"1\">\n        <v-btn\n          v-show=\"itemNumber !== productDropdown.length\"\n          class=\"mx-2\"\n          x-small\n          fab\n          :disabled=\"isDisabled\"\n          @click=\"addProductRow\"\n        >\n          <v-icon dark>\n            {{ icons.mdiPlus }}\n          </v-icon>\n        </v-btn>\n      </v-col>\n      <v-col cols=\"1\">\n        <v-btn\n          class=\"mx-2\"\n          x-small\n          fab\n          @click=\"removeProduct\"\n        >\n          <v-icon dark>\n            {{ icons.mdiMinus }}\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-card>\n</template>\n\n<script>\nimport { ref, watch, toRef } from '@vue/composition-api/dist/vue-composition-api'\n\nimport {\n  mdiMinus,\n  mdiPlus,\n} from '@mdi/js'\n\nexport default {\n  name: 'RawMaterialAddSelector',\n  props: {\n    productData: {\n      type: Object,\n      required: true,\n    },\n    itemNumber: {\n      type: Number,\n      default: 0,\n    },\n    productDropdown: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, { emit }) {\n    const product = toRef(props, 'productData')\n    const productSelection = ref([])\n    const isDisabled = ref(true)\n\n    if (product.value.id) {\n      isDisabled.value = false\n    }\n\n    const handleIsNumber = evt => {\n      const event = (evt) || window.event\n      const code = (event.which) ? event.which : event.keyCode\n\n      if ((code > 31 && (code < 48 || code > 57)) && code !== 46) {\n        event.preventDefault()\n\n        return false\n      }\n\n      return true\n    }\n\n    const addProductRow = () => {\n      emit('addProductRow', product)\n    }\n\n    const removeProduct = () => {\n      emit('removeProductRow', props.itemNumber)\n    }\n\n    // disable item in dropdown\n    const handleDisabledItem = item => (!!item.disabled)\n\n    watch(\n      product,\n      () => {\n        if (product.value.id) {\n          isDisabled.value = false\n        }\n      },\n    )\n\n    watch(\n      product.value,\n      () => {\n        if (product.value.total_boxes) {\n          const productModel = props.productDropdown.find(item => item.id === product.value.product_id)\n\n          product.value.total_pieces = parseInt(product.value.total_boxes, 0) * productModel?.items_per_box\n        }\n\n        if (product.value.product_id && product.value.total_pieces && product.value.total_boxes) {\n          isDisabled.value = false\n        } else {\n          isDisabled.value = true\n        }\n      },\n    )\n\n    return {\n      addProductRow,\n      removeProduct,\n      product,\n      productSelection,\n      isDisabled,\n      icons: {\n        mdiPlus,\n        mdiMinus,\n      },\n      handleIsNumber,\n      handleDisabledItem,\n    }\n  },\n}\n</script>\n"]}]}