{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/drs/SalesDrCreatePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/drs/SalesDrCreatePage.vue","mtime":1666288143030},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtZGlJbmZvcm1hdGlvbiB9IGZyb20gJ0BtZGkvanMnOwppbXBvcnQgT3JkZXJJdGVtc1NlbGVjdGlvbiBmcm9tICdAL3ZpZXdzL3BhZ2VzL3NhbGVzL2Rycy9jb21wb25lbnRzL09yZGVySXRlbXNTZWxlY3Rpb24udnVlJzsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTYWxlc0RyQ3JlYXRlUGFnZScsCiAgY29tcG9uZW50czogewogICAgT3JkZXJJdGVtc1NlbGVjdGlvbjogT3JkZXJJdGVtc1NlbGVjdGlvbgogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgc3RvcmUuZGlzcGF0Y2goJ1NhbGVzT3JkZXJTdG9yZS9hbGxPcmRlckl0ZW1zJyk7CiAgICBzdG9yZS5kaXNwYXRjaCgnVGVybVN0b3JlL2xpc3QnKTsKICAgIHN0b3JlLmRpc3BhdGNoKCdWYXRTdG9yZS9saXN0Jyk7CiAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNtYW5TdG9yZS9saXN0Jyk7CiAgICBzdG9yZS5kaXNwYXRjaCgnRG9jdW1lbnRTdG9yZS9saXN0Jyk7CiAgICB2YXIgb3JkZXJJdGVtcyA9IHJlZihbXSk7CiAgICB2YXIgdG90YWxBbW91bnQgPSByZWYoMCk7CiAgICB2YXIgbW9kZSA9IHJlZignY3JlYXRlJyk7CiAgICB2YXIgc2hvd09yZGVySXRlbXMgPSByZWYoZmFsc2UpOwogICAgdmFyIGhlYWRlcnMgPSBbewogICAgICB0ZXh0OiAnRGF0ZScsCiAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogJ2RhdGVfcG9zdGVkJwogICAgfSwgewogICAgICB0ZXh0OiAnU08gTm8nLAogICAgICB2YWx1ZTogJ3NhbGVzX29yZGVyX251bWJlcicsCiAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICB9LCB7CiAgICAgIHRleHQ6ICdQcm9kdWN0IE5hbWUnLAogICAgICB2YWx1ZTogJ3Byb2R1Y3RfbmFtZScsCiAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICB9LCB7CiAgICAgIHRleHQ6ICdBbW91bnQnLAogICAgICB2YWx1ZTogJ3RvdGFsX2Ftb3VudCcsCiAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICB9XTsKICAgIHZhciBjdXN0b21lciA9IHJlZih7fSk7CiAgICB2YXIgdHlwZXMgPSBbJ1JlZ3VsYXInLCAnRGlzdHJpYnV0b3InXTsKICAgIHZhciB0ZXJtcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlRlcm1TdG9yZS50ZXJtczsKICAgIH0pOwogICAgdmFyIHZhdHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5WYXRTdG9yZS52YXRzOwogICAgfSk7CiAgICB2YXIgZG9jdW1lbnRzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUuRG9jdW1lbnRTdG9yZS5kb2N1bWVudHMuZmlsdGVyKGZ1bmN0aW9uIChkb2N1bWVudEl0ZW0pIHsKICAgICAgICBpZiAoZG9jdW1lbnRJdGVtLm1vZHVsZSA9PT0gJ1NhbGVzJykgewogICAgICAgICAgZG9jdW1lbnRJdGVtLnRpdGxlID0gIiIuY29uY2F0KGRvY3VtZW50SXRlbS5kb2N1bWVudF9uYW1lKTsKICAgICAgICAgIHJldHVybiBkb2N1bWVudEl0ZW07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgdmFyIHNhbGVzbWFucyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlNhbGVzbWFuU3RvcmUuc2FsZXNtYW5zOwogICAgfSk7CiAgICB2YXIgZGF0ZVBvc3RlZCA9IHJlZihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSk7CiAgICB2YXIgZm9ybURhdGEgPSByZWYoewogICAgICBkYXRlTW9kYWw6IGZhbHNlLAogICAgICBjdXN0b21lcl9uYW1lOiBudWxsLAogICAgICBjdXN0b21lcl9pZDogbnVsbCwKICAgICAgZGF0ZV9wb3N0ZWQ6IG51bGwsCiAgICAgIHNhbGVzX29yZGVyX251bWJlcjogbnVsbCwKICAgICAgZG9jdW1lbnRfaWQ6IG51bGwsCiAgICAgIGFkZHJlc3M6IG51bGwsCiAgICAgIHJlbWFya3M6IG51bGwsCiAgICAgIGFyZWE6IG51bGwsCiAgICAgIHNhbGVzbWFuX2lkXzE6IG51bGwsCiAgICAgIHNhbGVzbWFuX2lkXzI6IG51bGwsCiAgICAgIHRlcm1faWQ6IG51bGwsCiAgICAgIHZhdF9pZDogbnVsbCwKICAgICAgc2FsZXNfZHJfaXRlbXM6IFtdCiAgICB9KTsKCiAgICB2YXIgc3VibWl0ID0gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgcGF5bG9hZCA9IGZvcm1EYXRhLnZhbHVlOwogICAgICBwYXlsb2FkLmRhdGVfcG9zdGVkID0gZGF0ZVBvc3RlZC52YWx1ZTsKICAgICAgcGF5bG9hZC5vcmRlcl9pdGVtX2lkcyA9IG9yZGVySXRlbXMudmFsdWUubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ub3JkZXJfaXRlbV9pZDsKICAgICAgfSk7CiAgICAgIHBheWxvYWQuYW1vdW50ID0gdG90YWxBbW91bnQudmFsdWU7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvY3JlYXRlJywgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJvdXRlci5wdXNoKCcvc2FsZXMtZHJzJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgdmFyIGVycm9ycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlNhbGVzRHJTdG9yZS5lcnJvcnM7CiAgICB9KTsKCiAgICB2YXIgZmV0Y2hUb3RhbEFtb3VudCA9IGZ1bmN0aW9uIGZldGNoVG90YWxBbW91bnQoYW1vdW50KSB7CiAgICAgIHRvdGFsQW1vdW50LnZhbHVlID0gYW1vdW50OwogICAgfTsKCiAgICB2YXIgZmV0Y2hPcmRlckl0ZW1zID0gZnVuY3Rpb24gZmV0Y2hPcmRlckl0ZW1zKGl0ZW1zKSB7CiAgICAgIG9yZGVySXRlbXMudmFsdWUgPSBpdGVtczsKCiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBvcmRlckl0ZW1zLnZhbHVlLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGlmIChvcmRlckl0ZW1zLnZhbHVlW2luZGV4XS5hcmVhKSB7CiAgICAgICAgICBmb3JtRGF0YS52YWx1ZS5hcmVhID0gb3JkZXJJdGVtcy52YWx1ZVtpbmRleF0uYXJlYTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgc2hvd09yZGVySXRlbXMudmFsdWUgPSBmYWxzZTsKICAgIH07CgogICAgdmFyIHNldEN1c3RvbWVyID0gZnVuY3Rpb24gc2V0Q3VzdG9tZXIoZGF0YSkgewogICAgICBjdXN0b21lci52YWx1ZSA9IGRhdGE7CiAgICAgIGZvcm1EYXRhLnZhbHVlLmN1c3RvbWVyX25hbWUgPSBjdXN0b21lci52YWx1ZS5uYW1lOwogICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9pZCA9IGN1c3RvbWVyLnZhbHVlLmlkOwogICAgICBmb3JtRGF0YS52YWx1ZS50eXBlID0gY3VzdG9tZXIudmFsdWUudHlwZTsKICAgIH07CgogICAgdmFyIGNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHNob3dPcmRlckl0ZW1zLnZhbHVlID0gZmFsc2U7CiAgICB9OwoKICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHJvdXRlci5wdXNoKCcvc2FsZXMtZHJzJyk7CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGNsb3NlOiBjbG9zZSwKICAgICAgY2FuY2VsOiBjYW5jZWwsCiAgICAgIGRhdGVQb3N0ZWQ6IGRhdGVQb3N0ZWQsCiAgICAgIGN1c3RvbWVyOiBjdXN0b21lciwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIHNhbGVzbWFuczogc2FsZXNtYW5zLAogICAgICB2YXRzOiB2YXRzLAogICAgICBkb2N1bWVudHM6IGRvY3VtZW50cywKICAgICAgdHlwZXM6IHR5cGVzLAogICAgICB0ZXJtczogdGVybXMsCiAgICAgIHN1Ym1pdDogc3VibWl0LAogICAgICBzZXRDdXN0b21lcjogc2V0Q3VzdG9tZXIsCiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsCiAgICAgIHNob3dPcmRlckl0ZW1zOiBzaG93T3JkZXJJdGVtcywKICAgICAgb3JkZXJJdGVtczogb3JkZXJJdGVtcywKICAgICAgZmV0Y2hPcmRlckl0ZW1zOiBmZXRjaE9yZGVySXRlbXMsCiAgICAgIGZldGNoVG90YWxBbW91bnQ6IGZldGNoVG90YWxBbW91bnQsCiAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YSwKICAgICAgdG90YWxBbW91bnQ6IHRvdGFsQW1vdW50LAogICAgICBtb2RlOiBtb2RlLAogICAgICBpY29uczogewogICAgICAgIG1kaUluZm9ybWF0aW9uOiBtZGlJbmZvcm1hdGlvbgogICAgICB9CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8XA;AACA;AACA;AACA;AACA;AAEA;EACAA,yBADA;EAEAC;IACAC;EADA,CAFA;EAKAC,KALA,mBAKA;IACAC;IACAA;IACAA;IACAA;IACAA;IAEA;IACA;IACA;IACA;IACA,eACA;MAAAC;MAAAC;MAAAC;IAAA,CADA,EAEA;MAAAF;MAAAE;MAAAD;IAAA,CAFA,EAGA;MAAAD;MAAAE;MAAAD;IAAA,CAHA,EAIA;MAAAD;MAAAE;MAAAD;IAAA,CAJA;IAMA;IACA,aACA,SADA,EAEA,aAFA;IAIA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;QACA;UACAE;UAEA;QACA;MACA,CANA;IAAA;IAOA;MAAA;IAAA;IACA;IACA;MACAC,gBADA;MAEAC,mBAFA;MAGAC,iBAHA;MAIAC,iBAJA;MAKAC,wBALA;MAMAC,iBANA;MAOAC,aAPA;MAQAC,aARA;MASAC,UATA;MAUAC,mBAVA;MAWAC,mBAXA;MAYAC,aAZA;MAaAC,YAbA;MAcAC;IAdA;;IAiBA;MACA;MACAC;MACAA;QAAA;MAAA;MACAA;MAEAnB,oDACA;QACA;UACAoB;QACA;MACA,CALA;IAOA,CAbA;;IAeA;MAAA;IAAA;;IAEA;MACAC;IACA,CAFA;;IAIA;MACAC;;MAEA;QACA;UACAC;UACA;QACA;MACA;;MAEAC;IACA,CAXA;;IAaA;MACAC;MAEAF;MACAA;MACAA;IACA,CANA;;IAQA;MACAC;IACA,CAFA;;IAIA;MACAJ;IACA,CAFA;;IAIA;MACAM,YADA;MAEAC,cAFA;MAGAC,sBAHA;MAIAH,kBAJA;MAKAI,cALA;MAMAC,oBANA;MAOAC,UAPA;MAQAC,oBARA;MASAC,YATA;MAUAC,YAVA;MAWAC,cAXA;MAYAC,wBAZA;MAaAC,gBAbA;MAcAb,8BAdA;MAeAF,sBAfA;MAgBAgB,gCAhBA;MAiBAC,kCAjBA;MAkBAhB,kBAlBA;MAmBAF,wBAnBA;MAoBAmB,UApBA;MAqBAC;QACAC;MADA;IArBA;EAyBA;AAlIA","names":["name","components","OrderItemsSelection","setup","store","text","sortable","value","documentItem","dateModal","customer_name","customer_id","date_posted","sales_order_number","document_id","address","remarks","area","salesman_id_1","salesman_id_2","term_id","vat_id","sales_dr_items","payload","router","totalAmount","orderItems","formData","showOrderItems","customer","close","cancel","datePosted","errors","salesmans","vats","documents","types","terms","submit","setCustomer","headers","fetchOrderItems","fetchTotalAmount","mode","icons","mdiInformation"],"sourceRoot":"src/views/pages/sales/drs","sources":["SalesDrCreatePage.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"pa-6\">\n      Create Sales DR\n    </v-card-title>\n    <v-card-text>\n      <v-form>\n        <v-row>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"success\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"success\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Sales Order Items\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col cols=\"12\">\n            <v-data-table\n              :headers=\"headers\"\n              :items=\"orderItems\"\n            >\n              <template v-slot:top>\n                <v-toolbar\n                  flat\n                  color=\"\"\n                >\n                  <v-card-text>\n                    <v-row class=\"mt-10\">\n                      <v-col\n                        cols=\"7\"\n                      >\n                      </v-col>\n                      <v-col\n                        cols=\"5\"\n                      >\n                        <v-currency-field\n                          v-model=\"totalAmount\"\n                          outlined\n                          class=\"text-green\"\n                          disabled\n                          dense\n                          hide-details=\"auto\"\n                          label=\"Sales Order Total Amount\"\n                        ></v-currency-field>\n                      </v-col>\n                      <v-col\n                        cols=\"4\"\n                        offset-md=\"4\"\n                      >\n                      </v-col>\n                    </v-row>\n                  </v-card-text>\n                </v-toolbar>\n              </template>\n              <template #item.total_amount=\"{ item }\">\n                <v-currency-field\n                  v-model=\"item.total_amount\"\n                  prefix=\"PHP\"\n                  class=\"text-green\"\n                  disabled\n                >\n                </v-currency-field>\n              </template>\n            </v-data-table>\n          </v-col>\n          <v-col cols=\"8\"></v-col>\n          <v-col cols=\"4\">\n            <v-btn\n              color=\"success\"\n              @click=\"showOrderItems=true\"\n            >\n              Get Sales Order Items\n            </v-btn>\n          </v-col>\n        </v-row>\n        <v-row v-if=\"customer.id\">\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"primary\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Information\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-menu\n              v-model=\"formData.dateModal\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              :disabled=\"formData.status === 'Posted'\"\n              max-width=\"290px\"\n              min-width=\"auto\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"datePosted\"\n                  label=\"Date\"\n                  persistent-hint\n                  :prepend-icon=\"icons.mdiCalendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                ></v-text-field>\n              </template>\n\n              <v-date-picker\n                v-model=\"datePosted\"\n                no-title\n                color=\"primary\"\n                @input=\"formData.dateModal = false\"\n              ></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.sales_dr_number\"\n              outlined\n              :disabled=\"formData.id !== undefined\"\n              :error-messages=\"errors.sales_dr_number\"\n              dense\n              hide-details=\"auto\"\n              label=\"Sales DR Number\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.document_id\"\n              :items=\"documents\"\n              item-text=\"title\"\n              item-value=\"id\"\n              label=\"Document\"\n              :disabled=\"formData.status === 'Posted'\"\n              :error-messages=\"errors.document_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"4\"\n            class=\"pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.customer_name\"\n              outlined\n              readonly\n              :error-messages=\"errors.customer_id\"\n              dense\n              hide-details=\"auto\"\n              label=\"Customer\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"2\"\n          >\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.type\"\n              :items=\"types\"\n              label=\"Customer Type\"\n              disabled\n              :error-messages=\"errors.type\"\n              readonly\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.area\"\n              outlined\n              dense\n              :disabled=\"formData.status === 'Posted'\"\n              :error-messages=\"errors.area\"\n              hide-details=\"auto\"\n              label=\"Area\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.term_id\"\n              :items=\"terms\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Term\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :error-messages=\"errors.term_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.vat_id\"\n              :items=\"vats\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Vat\"\n              :error-messages=\"errors.vat_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_1\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Agent 1\"\n              :error-messages=\"errors.salesman_id_1\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_2\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Agent 2\"\n              :error-messages=\"errors.salesman_id_2\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.address\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.address\"\n              hide-details=\"auto\"\n              label=\"Address\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.remarks\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.remarks\"\n              hide-details=\"auto\"\n              label=\"Remarks\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.promo_code\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              dense\n              :error-messages=\"errors.promo_code\"\n              hide-details=\"auto\"\n              label=\"Promo Code\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col\n            cols=\"auto\"\n            class=\"d-flex\"\n          >\n            <v-btn\n              v-if=\"customer.id\"\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"submit\"\n            >\n              <v-icon>\n                {{ icons.mdiContentSave }}\n              </v-icon>\n              Create\n            </v-btn>\n            <v-btn\n              outlined\n              class=\"me-3 mt-4\"\n              type=\"reset\"\n              color=\"info\"\n              @click.prevent=\"cancel\"\n            >\n              <v-icon>\n                {{ icons.mdiProgressClose }}\n              </v-icon>\n              Close\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </v-card-text>\n    <v-dialog\n      v-model=\"showOrderItems\"\n      fullscreen\n    >\n      <v-card>\n        <v-card-text>\n          <order-items-selection\n            class=\"mt-6\"\n            :mode=\"mode\"\n            :disabled=\"formData.status === 'Posted'\"\n            @totalAmount=\"fetchTotalAmount\"\n            @orderItems=\"fetchOrderItems\"\n            @setCustomer=\"setCustomer\"\n            @close=\"close\"\n          ></order-items-selection>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-card>\n</template>\n<script>\nimport { mdiInformation } from '@mdi/js'\nimport OrderItemsSelection from '@/views/pages/sales/drs/components/OrderItemsSelection.vue'\nimport { ref, computed } from '@vue/composition-api'\nimport store from '@/store'\nimport router from '@/router'\n\nexport default {\n  name: 'SalesDrCreatePage',\n  components: {\n    OrderItemsSelection,\n  },\n  setup() {\n    store.dispatch('SalesOrderStore/allOrderItems')\n    store.dispatch('TermStore/list')\n    store.dispatch('VatStore/list')\n    store.dispatch('SalesmanStore/list')\n    store.dispatch('DocumentStore/list')\n\n    const orderItems = ref([])\n    const totalAmount = ref(0)\n    const mode = ref('create')\n    const showOrderItems = ref(false)\n    const headers = [\n      { text: 'Date', sortable: true, value: 'date_posted' },\n      { text: 'SO No', value: 'sales_order_number', sortable: true },\n      { text: 'Product Name', value: 'product_name', sortable: true },\n      { text: 'Amount', value: 'total_amount', sortable: true },\n    ]\n    const customer = ref({})\n    const types = [\n      'Regular',\n      'Distributor',\n    ]\n    const terms = computed(() => store.state.TermStore.terms)\n    const vats = computed(() => store.state.VatStore.vats)\n    const documents = computed(() => store.state.DocumentStore.documents.filter(documentItem => {\n      if (documentItem.module === 'Sales') {\n        documentItem.title = `${documentItem.document_name}`\n\n        return documentItem\n      }\n    }))\n    const salesmans = computed(() => store.state.SalesmanStore.salesmans)\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n    const formData = ref({\n      dateModal: false,\n      customer_name: null,\n      customer_id: null,\n      date_posted: null,\n      sales_order_number: null,\n      document_id: null,\n      address: null,\n      remarks: null,\n      area: null,\n      salesman_id_1: null,\n      salesman_id_2: null,\n      term_id: null,\n      vat_id: null,\n      sales_dr_items: [],\n    })\n\n    const submit = () => {\n      const payload = formData.value\n      payload.date_posted = datePosted.value\n      payload.order_item_ids = orderItems.value.map(item => item.order_item_id)\n      payload.amount = totalAmount.value\n\n      store.dispatch('SalesDrStore/create', payload).then(\n        response => {\n          if (response.status === undefined) {\n            router.push('/sales-drs')\n          }\n        },\n      )\n    }\n\n    const errors = computed(() => store.state.SalesDrStore.errors)\n\n    const fetchTotalAmount = amount => {\n      totalAmount.value = amount\n    }\n\n    const fetchOrderItems = items => {\n      orderItems.value = items\n\n      for (let index = 0; index < orderItems.value.length; index++) {\n        if(orderItems.value[index].area) {\n          formData.value.area = orderItems.value[index].area\n          break\n        }\n      }\n\n      showOrderItems.value = false\n    }\n\n    const setCustomer = data => {\n      customer.value = data\n\n      formData.value.customer_name = customer.value.name\n      formData.value.customer_id = customer.value.id\n      formData.value.type = customer.value.type\n    }\n\n    const close = () => {\n      showOrderItems.value = false\n    }\n\n    const cancel = () => {\n      router.push('/sales-drs')\n    }\n\n    return {\n      close,\n      cancel,\n      datePosted,\n      customer,\n      errors,\n      salesmans,\n      vats,\n      documents,\n      types,\n      terms,\n      submit,\n      setCustomer,\n      headers,\n      showOrderItems,\n      orderItems,\n      fetchOrderItems,\n      fetchTotalAmount,\n      formData,\n      totalAmount,\n      mode,\n      icons: {\n        mdiInformation,\n      },\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}