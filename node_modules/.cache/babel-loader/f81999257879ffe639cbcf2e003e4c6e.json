{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/master-files/finish-products/FinishProductForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/master-files/finish-products/FinishProductForm.vue","mtime":1664791308655},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyB0b1JlZiwgY29tcHV0ZWQsIHJlZiwgd2F0Y2ggfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaS9kaXN0L3Z1ZS1jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCBVbml0QW5kUGFja2luZ0Zvcm0gZnJvbSAnQC92aWV3cy9wYWdlcy9tYXN0ZXItZmlsZXMvZmluaXNoLXByb2R1Y3RzL1VuaXRBbmRQYWNraW5nRm9ybS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVW5pdEFuZFBhY2tpbmdGb3JtOiBVbml0QW5kUGFja2luZ0Zvcm0KICB9LAogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICByb3c6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICBzdG9yZS5kaXNwYXRjaCgnVW5pdFBhY2tpbmdTdG9yZS9saXN0Jyk7CiAgICB2YXIgcm93UHJvcCA9IHRvUmVmKHByb3BzLCAncm93Jyk7CiAgICB2YXIgdW5pdHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5Vbml0UGFja2luZ1N0b3JlLmxpc3Q7CiAgICB9KTsKICAgIHZhciBmb3JtRGF0YSA9IHJlZih7fSk7CiAgICBmb3JtRGF0YS52YWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93UHJvcC52YWx1ZSkpOwoKICAgIGlmIChwcm9wcy5tb2RlID09PSAnZWRpdCcpIHsKICAgICAgaWYgKGZvcm1EYXRhLnZhbHVlLmFjdGl2ZSA9PT0gJ0luYWN0aXZlJykgewogICAgICAgIGZvcm1EYXRhLnZhbHVlLmFjdGl2ZSA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGZvcm1EYXRhLnZhbHVlLmFjdGl2ZSA9IHRydWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGZvcm1EYXRhLnZhbHVlID0gewogICAgICAgIGNvZGU6IG51bGwsCiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICBwZXJjZW50YWdlOiAwLAogICAgICAgIG5vdGVzOiBudWxsLAogICAgICAgIGFjdGl2ZTogZmFsc2UsCiAgICAgICAgdW5pdHM6IFtdCiAgICAgIH07CiAgICB9CgogICAgd2F0Y2gocm93UHJvcCwgZnVuY3Rpb24gKCkgewogICAgICBmb3JtRGF0YS52YWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93UHJvcC52YWx1ZSkpOwoKICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0JykgewogICAgICAgIGlmIChmb3JtRGF0YS52YWx1ZS5hY3RpdmUgPT09ICdJbmFjdGl2ZScpIHsKICAgICAgICAgIGZvcm1EYXRhLnZhbHVlLmFjdGl2ZSA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZvcm1EYXRhLnZhbHVlLmFjdGl2ZSA9IDE7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGZvcm1EYXRhLnZhbHVlID0gewogICAgICAgICAgY29kZTogbnVsbCwKICAgICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgICBwZXJjZW50YWdlOiAwLAogICAgICAgICAgbm90ZXM6IG51bGwsCiAgICAgICAgICBhY3RpdmU6IGZhbHNlLAogICAgICAgICAgdW5pdHM6IFtdCiAgICAgICAgfTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgZXJyb3JzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUuRmluaXNoUHJvZHVjdFN0b3JlLmVycm9yczsKICAgIH0pOwoKICAgIHZhciBhZGRVbml0UGFja2luZyA9IGZ1bmN0aW9uIGFkZFVuaXRQYWNraW5nKHVuaXRBbmRQYWNraW5nKSB7CiAgICAgIGZvcm1EYXRhLnZhbHVlLnVuaXRzLnB1c2godW5pdEFuZFBhY2tpbmcpOwogICAgfTsKCiAgICB2YXIgY2FuY2VsID0gZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICBzdG9yZS5kaXNwYXRjaCgnRmluaXNoUHJvZHVjdFN0b3JlL3JlbW92ZUVycm9ycycpOwogICAgICBlbWl0KCdzdWJtaXQnLCBmYWxzZSk7CiAgICB9OwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIGlmIChmb3JtRGF0YS52YWx1ZS5pZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ0ZpbmlzaFByb2R1Y3RTdG9yZS9jcmVhdGUnLCBmb3JtRGF0YS52YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBlbWl0KCdzdWJtaXQnLCBmYWxzZSk7CiAgICAgICAgICAgIGVtaXQoJ2NsaWNrZWQnLCB7CiAgICAgICAgICAgICAgYWxlcnRUeXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgYWxlcnRNZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IEFkZGVkLicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdGaW5pc2hQcm9kdWN0U3RvcmUvbGlzdCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdGaW5pc2hQcm9kdWN0U3RvcmUvdXBkYXRlJywgZm9ybURhdGEudmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZW1pdCgnc3VibWl0JywgZmFsc2UpOwogICAgICAgICAgICBlbWl0KCdjbGlja2VkJywgewogICAgICAgICAgICAgIGFsZXJ0VHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGFsZXJ0TWVzc2FnZTogJ1N1Y2Nlc3NmdWwgVXBkYXRlLicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdGaW5pc2hQcm9kdWN0U3RvcmUvbGlzdCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGFkZFVuaXRQYWNraW5nOiBhZGRVbml0UGFja2luZywKICAgICAgdW5pdHM6IHVuaXRzLAogICAgICBjYW5jZWw6IGNhbmNlbCwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YSwKICAgICAgc3VibWl0OiBzdWJtaXQKICAgIH07CiAgfSwKICBjb21wdXRlZDoge30sCiAgbWV0aG9kczoge30KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA,SACAA,KADA,EAEAC,QAFA,EAGAC,GAHA,EAGAC,KAHA,QAIA,+CAJA;AAKA;AACA;AAEA;EACAC;IACAC;EADA,CADA;EAIAC;IACAC;MACAC,YADA;MAEAC,cAFA;MAGAC;IAHA,CADA;IAMAC;MACAH,YADA;MAEAC,eAFA;MAGAC;IAHA;EANA,CAJA;EAgBAE,KAhBA,iBAgBAN,KAhBA,QAgBA;IAAA;IACAO;IAEA;IACA;MAAA;IAAA;IACA;IAEAC;;IAEA;MACA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA,CANA,MAMA;MACAA;QACAC,UADA;QAEAC,UAFA;QAGAC,aAHA;QAIAC,WAJA;QAKAC,aALA;QAMAC;MANA;IAQA;;IAEAjB;MACAW;;MAEA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;MACA,CANA,MAMA;QACAA;UACAC,UADA;UAEAC,UAFA;UAGAC,aAHA;UAIAC,WAJA;UAKAC,aALA;UAMAC;QANA;MAQA;IACA,CAnBA;IAqBA;MAAA;IAAA;;IAEA;MACAN;IACA,CAFA;;IAIA;MACAD;MACAQ;IACA,CAHA;;IAKA;MACA;QACAR,iEACA;UACA;YACAQ;YAEAA;cACAC,oBADA;cAEAC;YAFA;YAIAV;UACA;QACA,CAXA;MAaA,CAdA,MAcA;QACAA,iEACA;UACA;YACAQ;YAEAA;cACAC,oBADA;cAEAC;YAFA;YAIAV;UACA;QACA,CAXA;MAaA;IACA,CA9BA;;IAgCA;MACAW,8BADA;MAEAJ,YAFA;MAGAK,cAHA;MAIAC,cAJA;MAKAZ,kBALA;MAMAa;IANA;EAQA,CAlHA;EAmHA1B,YAnHA;EAqHA2B;AArHA","names":["toRef","computed","ref","watch","components","UnitAndPackingForm","props","mode","type","required","default","row","setup","store","formData","code","name","percentage","notes","active","units","emit","alertType","alertMessage","addUnitPacking","cancel","errors","submit","methods"],"sourceRoot":"src/views/pages/master-files/finish-products","sources":["FinishProductForm.vue"],"sourcesContent":["<template>\n  <v-form>\n    <v-row>\n      <v-col\n        cols=\"12\"\n      >\n        <v-switch\n          v-model=\"formData.active\"\n          :error-messages=\"errors.active\"\n          label=\"Active\"\n        ></v-switch>\n      </v-col>\n      <v-col\n        cols=\"1\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Name</label>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n        class=\"mr-16\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"formData.name\"\n          outlined\n          dense\n          :error-messages=\"errors.name\"\n          label=\"Name\"\n          hide-details=\"auto\"\n        ></v-text-field>\n      </v-col>\n\n      <v-col\n        cols=\"2\"\n      >\n        <label for=\"firstnameHorizontalIcons\">SKU / Product Code</label>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"formData.sku\"\n          outlined\n          dense\n          :error-messages=\"errors.sku\"\n          label=\"SKU / Product Code\"\n          hide-details=\"auto\"\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"1\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Brand</label>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n        class=\"mr-16\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"formData.brand\"\n          outlined\n          dense\n          :error-messages=\"errors.brand\"\n          label=\"Brand\"\n          hide-details=\"auto\"\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"2\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Grouping</label>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"formData.grouping\"\n          outlined\n          dense\n          :error-messages=\"errors.grouping\"\n          label=\"Grouping\"\n          hide-details=\"auto\"\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"1\"\n      >\n        <label for=\"firstnameHorizontalIcons\">SRP</label>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n        class=\"mr-16\"\n      >\n        <v-currency-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"formData.price\"\n          outlined\n          dense\n          :error-messages=\"errors.price\"\n          label=\"SRP\"\n          hide-details=\"auto\"\n        ></v-currency-field>\n      </v-col>\n      <v-col\n        cols=\"2\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Inventory Unit</label>\n      </v-col>\n\n      <v-col\n        cols=\"4\"\n      >\n        <v-select\n          v-model=\"formData.unit_id\"\n          :items=\"units\"\n          item-text=\"name\"\n          item-value=\"id\"\n          label=\"Inventory Unit\"\n          :error-messages=\"errors.unit_id\"\n          outlined\n          dense\n          clearable\n          hide-details=\"auto\"\n        ></v-select>\n      </v-col>\n      <v-col\n        cols=\"4\"\n        md=\"3\"\n      >\n      </v-col>\n      <v-col\n        cols=\"12\"\n      >\n        <unit-and-packing-form\n          class=\"mt-6\"\n          :existing-units=\"formData.units\"\n          @addedUnitPacking=\"addUnitPacking\"\n        >\n        </unit-and-packing-form>\n      </v-col>\n      <v-col\n        offset-md=\"5\"\n        cols=\"12\"\n      >\n        <v-btn\n          color=\"primary\"\n          @click=\"submit\"\n        >\n          Submit\n        </v-btn>\n        <v-btn\n          type=\"reset\"\n          outlined\n          class=\"mx-2\"\n          @click=\"cancel\"\n        >\n          Cancel\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-form>\n</template>\n\n<script>\nimport {\n  toRef,\n  computed,\n  ref, watch,\n} from '@vue/composition-api/dist/vue-composition-api'\nimport store from '@/store'\nimport UnitAndPackingForm from '@/views/pages/master-files/finish-products/UnitAndPackingForm.vue'\n\nexport default {\n  components: {\n    UnitAndPackingForm,\n  },\n  props: {\n    mode: {\n      type: String,\n      required: true,\n      default: null,\n    },\n    row: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('UnitPackingStore/list')\n\n    const rowProp = toRef(props, 'row')\n    const units = computed(() => store.state.UnitPackingStore.list)\n    const formData = ref({})\n\n    formData.value = JSON.parse(JSON.stringify(rowProp.value))\n\n    if (props.mode === 'edit') {\n      if (formData.value.active === 'Inactive') {\n        formData.value.active = false\n      } else {\n        formData.value.active = true\n      }\n    } else {\n      formData.value = {\n        code: null,\n        name: null,\n        percentage: 0,\n        notes: null,\n        active: false,\n        units: [],\n      }\n    }\n\n    watch(rowProp, () => {\n      formData.value = JSON.parse(JSON.stringify(rowProp.value))\n\n      if (props.mode === 'edit') {\n        if (formData.value.active === 'Inactive') {\n          formData.value.active = 0\n        } else {\n          formData.value.active = 1\n        }\n      } else {\n        formData.value = {\n          code: null,\n          name: null,\n          percentage: 0,\n          notes: null,\n          active: false,\n          units: [],\n        }\n      }\n    })\n\n    const errors = computed(() => store.state.FinishProductStore.errors)\n\n    const addUnitPacking = unitAndPacking => {\n      formData.value.units.push(unitAndPacking)\n    }\n\n    const cancel = () => {\n      store.dispatch('FinishProductStore/removeErrors')\n      emit('submit', false)\n    }\n\n    const submit = () => {\n      if (formData.value.id === undefined) {\n        store.dispatch('FinishProductStore/create', formData.value).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', false)\n\n              emit('clicked', {\n                alertType: 'success',\n                alertMessage: 'Successfully Added.',\n              })\n              store.dispatch('FinishProductStore/list')\n            }\n          },\n        )\n      } else {\n        store.dispatch('FinishProductStore/update', formData.value).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', false)\n\n              emit('clicked', {\n                alertType: 'success',\n                alertMessage: 'Successful Update.',\n              })\n              store.dispatch('FinishProductStore/list')\n            }\n          },\n        )\n      }\n    }\n\n    return {\n      addUnitPacking,\n      units,\n      cancel,\n      errors,\n      formData,\n      submit,\n    }\n  },\n  computed: {\n  },\n  methods: {\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}