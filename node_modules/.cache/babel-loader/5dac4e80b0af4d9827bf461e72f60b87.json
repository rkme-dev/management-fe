{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/src/store/AuthStore.js","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/store/AuthStore.js","mtime":1655105658962},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1654587530817},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1654587530760}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgQXV0aGVudGljYXRpb25TZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2UvQXV0aGVudGljYXRpb25TZXJ2aWNlJzsKdmFyIGF1dGhlbnRpY2F0aW9uU2VydmljZSA9IG5ldyBBdXRoZW50aWNhdGlvblNlcnZpY2UoKTsKdmFyIHVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpOwp2YXIgaW5pdGlhbFN0YXRlID0gdXNlciA/IHsKICBzdGF0dXM6IHsKICAgIGxvZ2dlZEluOiB0cnVlCiAgfSwKICB1c2VyOiB1c2VyCn0gOiB7CiAgc3RhdHVzOiB7CiAgICBsb2dnZWRJbjogZmFsc2UKICB9LAogIHVzZXI6IG51bGwKfTsKZXhwb3J0IHZhciBBdXRoU3RvcmUgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogaW5pdGlhbFN0YXRlLAogIGFjdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0aW9uU2VydmljZS5hZG1pbkxvZ2luKHVzZXIpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICBjb21taXQoJ2xvZ2luU3VjY2VzcycsIHVzZXIpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXNlcik7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbW1pdCgnbG9naW5GYWlsdXJlJyk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaFRva2VuOiBmdW5jdGlvbiByZWZyZXNoVG9rZW4oX3JlZjIsIGFjY2Vzc1Rva2VuKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGNvbW1pdCgncmVmcmVzaFRva2VuJywgYWNjZXNzVG9rZW4pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGF1dGhlbnRpY2F0aW9uU2VydmljZS5sb2dvdXQoKTsKICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgIH0gLy8gcmVnaXN0ZXIoeyBjb21taXQgfSwgdXNlcikgewogICAgLy8gICAgIHJldHVybiBBdXRoU2VydmljZS5yZWdpc3Rlcih1c2VyKS50aGVuKAogICAgLy8gICAgICAgICByZXNwb25zZSA9PiB7CiAgICAvLyAgICAgICAgICAgICBjb21taXQoJ3JlZ2lzdGVyU3VjY2VzcycpOwogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgICAgfSwKICAgIC8vICAgICAgICAgZXJyb3IgPT4gewogICAgLy8gICAgICAgICAgICAgY29tbWl0KCdyZWdpc3RlckZhaWx1cmUnKTsKICAgIC8vICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICApOwogICAgLy8gfQoKICB9LAogIG11dGF0aW9uczogewogICAgbG9naW5TdWNjZXNzOiBmdW5jdGlvbiBsb2dpblN1Y2Nlc3Moc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgbG9naW5GYWlsdXJlOiBmdW5jdGlvbiBsb2dpbkZhaWx1cmUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXIgPSBudWxsOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cy5sb2dnZWRJbiA9IGZhbHNlOwogICAgICBzdGF0ZS51c2VyID0gbnVsbDsKICAgIH0sCiAgICByZWZyZXNoVG9rZW46IGZ1bmN0aW9uIHJlZnJlc2hUb2tlbihzdGF0ZSwgYWNjZXNzVG9rZW4pIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgc3RhdGUudXNlciA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudXNlciksIHt9LCB7CiAgICAgICAgYWNjZXNzX3Rva2VuOiBhY2Nlc3NUb2tlbgogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlclN1Y2Nlc3M6IGZ1bmN0aW9uIHJlZ2lzdGVyU3VjY2VzcyhzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMubG9nZ2VkSW4gPSBmYWxzZTsKICAgIH0sCiAgICByZWdpc3RlckZhaWx1cmU6IGZ1bmN0aW9uIHJlZ2lzdGVyRmFpbHVyZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMubG9nZ2VkSW4gPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/mark/projects/enco-fe/src/store/AuthStore.js"],"names":["AuthenticationService","authenticationService","user","JSON","parse","localStorage","getItem","initialState","status","loggedIn","AuthStore","namespaced","state","actions","login","commit","adminLogin","then","Promise","resolve","error","reject","refreshToken","accessToken","logout","mutations","loginSuccess","loginFailure","access_token","registerSuccess","registerFailure"],"mappings":"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","sourcesContent":["import AuthenticationService from '../service/AuthenticationService'\n\nconst authenticationService = new AuthenticationService()\n\nconst user = JSON.parse(localStorage.getItem('user'))\n\nconst initialState = user\n  ? { status: { loggedIn: true }, user }\n  : { status: { loggedIn: false }, user: null }\n\nexport const AuthStore = {\n  namespaced: true,\n  state: initialState,\n  actions: {\n    login({ commit }, user) {\n      return authenticationService.adminLogin(user).then(\n        user => {\n          commit('loginSuccess', user)\n\n          return Promise.resolve(user)\n        },\n        error => {\n          commit('loginFailure')\n\n          return Promise.reject(error)\n        },\n      )\n    },\n    refreshToken({ commit }, accessToken) {\n      commit('refreshToken', accessToken)\n    },\n    logout({ commit }) {\n      authenticationService.logout()\n      commit('logout')\n    },\n\n    // register({ commit }, user) {\n    //     return AuthService.register(user).then(\n    //         response => {\n    //             commit('registerSuccess');\n    //             return Promise.resolve(response.data);\n    //         },\n    //         error => {\n    //             commit('registerFailure');\n    //             return Promise.reject(error);\n    //         }\n    //     );\n    // }\n  },\n  mutations: {\n    loginSuccess(state, user) {\n      state.status.loggedIn = true\n      state.user = user\n    },\n    loginFailure(state) {\n      state.status.loggedIn = false\n      state.user = null\n    },\n    logout(state) {\n      state.status.loggedIn = false\n      state.user = null\n    },\n    refreshToken(state, accessToken) {\n      state.status.loggedIn = true\n      state.user = { ...state.user, access_token: accessToken }\n    },\n    registerSuccess(state) {\n      state.status.loggedIn = false\n    },\n    registerFailure(state) {\n      state.status.loggedIn = false\n    },\n  },\n}\n"]}]}