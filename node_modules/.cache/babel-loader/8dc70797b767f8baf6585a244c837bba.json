{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/collections/SalesDrTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/collections/SalesDrTable.vue","mtime":1665489378912},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtZGlBY2NvdW50RWRpdCwgbWRpRGVsZXRlQ2lyY2xlIH0gZnJvbSAnQG1kaS9qcyc7CmltcG9ydCB7IHJlZiwgdG9SZWYsIHdhdGNoIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBkYXRlRm9ybWF0MSB9IGZyb20gJ0AvdXRpbHMvdGltZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2FsZXNEclRhYmxlJywKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAgZGF0YTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICB2YXIgdG90YWxBbW91bnQgPSByZWYoMCk7CiAgICB2YXIgc2hvd01vZGFsID0gcmVmKGZhbHNlKTsKICAgIHZhciBpdGVtcyA9IHRvUmVmKHByb3BzLCAnZGF0YScpOwogICAgdmFyIGhlYWRlcnMgPSByZWYoW3sKICAgICAgdGV4dDogJ0RhdGUnLAogICAgICBhbGlnbjogJ3N0YXJ0JywKICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogJ2NyZWF0ZWRfYXQnCiAgICB9LCB7CiAgICAgIHRleHQ6ICdEUiBObycsCiAgICAgIHZhbHVlOiAnc2FsZXNfZHJfbnVtYmVyJwogICAgfSwgewogICAgICB0ZXh0OiAnQmFsYW5jZScsCiAgICAgIHZhbHVlOiAnYW1vdW50JwogICAgfSwgewogICAgICB0ZXh0OiAnVG8gUGF5JywKICAgICAgdmFsdWU6ICdhbW91bnRfdG9fcGF5JwogICAgfSwgewogICAgICB0ZXh0OiAnQWN0aW9ucycsCiAgICAgIHZhbHVlOiAnYWN0aW9ucycsCiAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgfV0pOwogICAgdmFyIHNhbGVzRHJzID0gcmVmKFtdKTsKICAgIGl0ZW1zLnZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgdG90YWxBbW91bnQudmFsdWUgKz0gcGFyc2VGbG9hdChpdGVtLmFtb3VudF90b19wYXkpOwogICAgfSk7CiAgICB3YXRjaChpdGVtcywgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHRvdGFsQW1vdW50LnZhbHVlID0gMDsKICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHRvdGFsQW1vdW50LnZhbHVlICs9IHBhcnNlRmxvYXQoaXRlbS5hbW91bnRfdG9fcGF5KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgcmVtb3ZlRHIgPSBmdW5jdGlvbiByZW1vdmVEcihpdGVtKSB7CiAgICAgIGVtaXQoJ3JlbW92ZURyJywgaXRlbSk7CiAgICB9OwoKICAgIHZhciB0b2dnbGVNb2RhbCA9IGZ1bmN0aW9uIHRvZ2dsZU1vZGFsKCkgewogICAgICBlbWl0KCdzaG93TW9kYWwnKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgdG90YWxBbW91bnQ6IHRvdGFsQW1vdW50LAogICAgICByZW1vdmVEcjogcmVtb3ZlRHIsCiAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgdG9nZ2xlTW9kYWw6IHRvZ2dsZU1vZGFsLAogICAgICBkYXRlRm9ybWF0MTogZGF0ZUZvcm1hdDEsCiAgICAgIG1kaUFjY291bnRFZGl0OiBtZGlBY2NvdW50RWRpdCwKICAgICAgbWRpRGVsZXRlQ2lyY2xlOiBtZGlEZWxldGVDaXJjbGUsCiAgICAgIGhlYWRlcnM6IGhlYWRlcnMsCiAgICAgIHNhbGVzRHJzOiBzYWxlc0RycywKICAgICAgc2hvd01vZGFsOiBzaG93TW9kYWwsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpQWNjb3VudEVkaXQ6IG1kaUFjY291bnRFZGl0LAogICAgICAgIG1kaURlbGV0ZUNpcmNsZTogbWRpRGVsZXRlQ2lyY2xlCiAgICAgIH0KICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA,SACAA,GADA,EACAC,KADA,EACAC,KADA,QAEA,sBAFA;AAGA;AAEA;EACAC,oBADA;EAEAC,cAFA;EAIAC;IACAC;MACAC,WADA;MAEAC,cAFA;MAGAC;IAHA;EADA,CAJA;EAWAC,KAXA,iBAWAL,KAXA,QAWA;IAAA;IACA;IACA;IACA;IACA,mBACA;MACAM,YADA;MAEAC,cAFA;MAGAC,eAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;MAAAD;IAAA,CAVA;IAaA;IAEAE;MACAC;IACA,CAFA;IAIAd;MACAc;MAEAF;QACAE;MACA,CAFA;IAGA,CANA;;IAQA;MACAC;IACA,CAFA;;IAIA;MACAA;IACA,CAFA;;IAIA;MACAD,wBADA;MAEAE,kBAFA;MAGAH,YAHA;MAIAI,wBAJA;MAKAC,wBALA;MAMAC,8BANA;MAOAC,gCAPA;MAQAC,gBARA;MASAC,kBATA;MAUAC,oBAVA;MAWAC;QACAL,8BADA;QAEAC;MAFA;IAXA;EAgBA;AAlEA","names":["ref","toRef","watch","name","components","props","data","type","required","default","setup","text","align","sortable","value","items","totalAmount","emit","removeDr","toggleModal","dateFormat1","mdiAccountEdit","mdiDeleteCircle","headers","salesDrs","showModal","icons"],"sourceRoot":"src/views/pages/sales/collections","sources":["SalesDrTable.vue"],"sourcesContent":["<template>\n  <div class=\"pa-6\">\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      sort-by=\"name\"\n      class=\"elevation-1\"\n    >\n      <template #item.created_at=\"{ item }\">\n        {{ dateFormat1(item.created_at) }}\n      </template>\n      <template #item.amount=\"{ item }\">\n        <v-currency-field\n          v-model=\"item.amount\"\n          prefix=\"PHP\"\n          class=\"text-green\"\n          disabled\n        >\n        </v-currency-field>\n      </template>\n      <template #item.amount_to_pay=\"{ item }\">\n        <v-currency-field\n          v-model=\"item.amount_to_pay\"\n          prefix=\"PHP\"\n          class=\"text-green\"\n          disabled\n        >\n        </v-currency-field>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon\n          small\n          @click=\"removeDr(item)\"\n        >\n          {{ icons.mdiDeleteCircle }}\n        </v-icon>\n      </template>\n      <template #footer>\n        <v-row class=\"mb-2 mt-2\">\n          <v-col\n            cols=\"4\"\n            class=\"\"\n          >\n            <v-btn\n              color=\"info\"\n              class=\"\"\n              @click=\"toggleModal\"\n            >\n              <v-icon>\n                {{ icons.mdiContentSave }}\n              </v-icon>\n              GET SALES DR\n            </v-btn>\n          </v-col>\n          <v-col cols=\"2\"></v-col>\n          <v-col\n            cols=\"2\"\n            class=\"mt-6\"\n            style=\"color: forestgreen;\"\n          >\n            Total Amount:\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"ml-n8\"\n          >\n            <v-currency-field\n              v-model=\"totalAmount\"\n              class=\"text-green\"\n              disabled\n            >\n            </v-currency-field>\n          </v-col>\n        </v-row>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport { mdiAccountEdit, mdiDeleteCircle } from '@mdi/js'\nimport {\n  ref, toRef, watch,\n} from '@vue/composition-api'\nimport { dateFormat1 } from '@/utils/time'\n\nexport default {\n  name: 'SalesDrTable',\n  components: {\n  },\n  props: {\n    data: {\n      type: Array,\n      required: true,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const totalAmount = ref(0)\n    const showModal = ref(false)\n    const items = toRef(props, 'data')\n    const headers = ref([\n      {\n        text: 'Date',\n        align: 'start',\n        sortable: false,\n        value: 'created_at',\n      },\n      { text: 'DR No', value: 'sales_dr_number' },\n      { text: 'Balance', value: 'amount' },\n      { text: 'To Pay', value: 'amount_to_pay' },\n      { text: 'Actions', value: 'actions', sortable: false },\n    ])\n\n    const salesDrs = ref([])\n\n    items.value.forEach(item => {\n      totalAmount.value += parseFloat(item.amount_to_pay)\n    })\n\n    watch(items, value => {\n      totalAmount.value = 0\n\n      value.forEach(item => {\n        totalAmount.value += parseFloat(item.amount_to_pay)\n      })\n    })\n\n    const removeDr = item => {\n      emit('removeDr', item)\n    }\n\n    const toggleModal = () => {\n      emit('showModal')\n    }\n\n    return {\n      totalAmount,\n      removeDr,\n      items,\n      toggleModal,\n      dateFormat1,\n      mdiAccountEdit,\n      mdiDeleteCircle,\n      headers,\n      salesDrs,\n      showModal,\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n      },\n    }\n  },\n}\n</script>\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n\n</style>\n"]}]}