{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/suppliers/supplier/SupplierInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/suppliers/supplier/SupplierInfo.vue","mtime":1659511185560},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiwgb25Nb3VudGVkLCB3YXRjaCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgQ1JFQVRFX1NVUFBMSUVSLCBVUERBVEVfU1VQUExJRVIsIEdFVF9QUk9EVUNUUyB9IGZyb20gJ0Avc3RvcmUvYWN0aW9ucy50eXBlJzsKaW1wb3J0IHsgU0VUX0VSUk9SIH0gZnJvbSAnQC9zdG9yZS9tdXRhdGlvbnMudHlwZSc7CmltcG9ydCB7IG1kaUFsZXJ0T3V0bGluZSB9IGZyb20gJ0BtZGkvanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGluZm9ybWF0aW9uRGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgIGNvbnRhY3RfcGVyc29uOiAnJywKICAgICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgICAgYmFua19kZXRhaWxzOiAnJywKICAgICAgICAgIGFjY291bnRfbm86ICcnCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMpIHsKICAgIHZhciBlcnJvcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmVycm9yczsKICAgIH0pOwogICAgdmFyIG9wdGlvbnNMb2NhbCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmluZm9ybWF0aW9uRGF0YTsKICAgIH0pOwogICAgdmFyIHJhd01hdGVyaWFscyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnMucHJvZHVjdHM7CiAgICB9KTsKICAgIHZhciBzaG93QWxlcnQgPSByZWYoZmFsc2UpOwogICAgdmFyIGJ1dHRvbkxhYmVsID0gcHJvcHMubW9kZSA9PT0gJ2NyZWF0ZScgPyAnU2F2ZScgOiAnVXBkYXRlJzsKCiAgICB2YXIgZ29CYWNrID0gZnVuY3Rpb24gZ29CYWNrKCkgewogICAgICByb3V0ZXIucHVzaCgnL3N1cHBsaWVycycpOwogICAgfTsKCiAgICB2YXIgcmVzb2x2ZUZvcm1TdWNjZXNzID0gZnVuY3Rpb24gcmVzb2x2ZUZvcm1TdWNjZXNzKCkgewogICAgICBzaG93QWxlcnQudmFsdWUgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBnb0JhY2soKTsKICAgICAgfSwgNTAwMCk7CiAgICB9OwoKICAgIHdhdGNoKG9wdGlvbnNMb2NhbCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGlmIChwcm9wcy5tb2RlID09PSAndXBkYXRlJykgewogICAgICAgIHZhciBfb3B0aW9uc0xvY2FsJHZhbHVlJHA7CgogICAgICAgIG9wdGlvbnNMb2NhbC52YWx1ZS5wcm9kdWN0X2lkcyA9IChfb3B0aW9uc0xvY2FsJHZhbHVlJHAgPSBvcHRpb25zTG9jYWwudmFsdWUucHJvZHVjdHMpID09PSBudWxsIHx8IF9vcHRpb25zTG9jYWwkdmFsdWUkcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wdGlvbnNMb2NhbCR2YWx1ZSRwLm1hcChmdW5jdGlvbiAocHJvZHVjdCkgewogICAgICAgICAgcmV0dXJuIHByb2R1Y3QuaWQ7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHZhciBzYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIGZvcm0gPSBvcHRpb25zTG9jYWwudmFsdWU7CgogICAgICBpZiAocHJvcHMubW9kZSA9PT0gJ3VwZGF0ZScpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaChVUERBVEVfU1VQUExJRVIsIGZvcm0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmIChkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgcmVzb2x2ZUZvcm1TdWNjZXNzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy5tb2RlID09PSAnY3JlYXRlJykgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKENSRUFURV9TVVBQTElFUiwgZm9ybSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICByZXNvbHZlRm9ybVN1Y2Nlc3MoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBzdG9yZS5kaXNwYXRjaChHRVRfUFJPRFVDVFMpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBpY29uczogewogICAgICAgIG1kaUFsZXJ0T3V0bGluZTogbWRpQWxlcnRPdXRsaW5lCiAgICAgIH0sCiAgICAgIHJhd01hdGVyaWFsczogcmF3TWF0ZXJpYWxzLAogICAgICBvcHRpb25zTG9jYWw6IG9wdGlvbnNMb2NhbCwKICAgICAgZ29CYWNrOiBnb0JhY2ssCiAgICAgIHNhdmU6IHNhdmUsCiAgICAgIHNob3dBbGVydDogc2hvd0FsZXJ0LAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgYnV0dG9uTGFiZWw6IGJ1dHRvbkxhYmVsCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACAC;MACAC,YADA;MAEAC;QAAA;UACAC,QADA;UAEAC,kBAFA;UAGAC,WAHA;UAIAC,gBAJA;UAKAC;QALA;MAAA;IAFA,CADA;IAWAC;MACAP;IADA;EAXA,CADA;EAgBAQ,KAhBA,iBAgBAV,KAhBA,EAgBA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;IACA;;IAEA;MACAW;IACA,CAFA;;IAIA;MACAC;MACAC;QACAC;MACA,CAFA,EAEA,IAFA;IAGA,CALA;;IAOAC;MACA;QAAA;;QACAC;UAAA;QAAA;MACA;IACA,CAJA;;IAOA;MACA;;MAEA;QACAC;UACA;YACAC;UACA;QACA,CAJA;MAKA;;MAEA;QACAD;UACA;YACAC;UACA;QACA,CAJA;MAKA;IACA,CAlBA;;IAoBAC;MACAF;IACA,CAFA;IAIA;MACAG;QACAC;MADA,CADA;MAIAC,0BAJA;MAKAN,0BALA;MAMAF,cANA;MAOAS,UAPA;MAQAX,oBARA;MASAY,cATA;MAUAC;IAVA;EAYA;AA7EA","names":["props","informationData","type","default","name","contact_person","address","bank_details","account_no","mode","setup","router","showAlert","setTimeout","goBack","watch","optionsLocal","store","resolveFormSuccess","onMounted","icons","mdiAlertOutline","rawMaterials","save","errors","buttonLabel"],"sourceRoot":"src/views/pages/suppliers/supplier","sources":["SupplierInfo.vue"],"sourcesContent":["<template>\n  <v-card\n    flat\n    class=\"pa-3 mt-2\"\n  >\n    <v-alert\n      v-show=\"showAlert\"\n      dense\n      text\n      type=\"success\"\n    >\n      Successfully <strong>{{ mode }}d</strong> a product. You will be automatically\n      redirected in a bit.\n    </v-alert>\n    <v-form class=\"multi-col-validation\">\n      <v-card-text class=\"pt-5\">\n        <v-row>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Supplier Information\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col cols=\"6\">\n            <v-text-field\n              v-model=\"optionsLocal.name\"\n              outlined\n              dense\n              label=\"Name\"\n              :readonly=\"mode === 'show'\"\n              hide-details=\"auto\"\n              :error-messages=\"errors.name\"\n              :persistent-placeholder=\"mode === 'show'\"\n            ></v-text-field>\n          </v-col>\n\n          <v-col\n            cols=\"12\"\n            md=\"6\"\n          >\n            <v-text-field\n              v-model=\"optionsLocal.contact_person\"\n              outlined\n              dense\n              label=\"Contact Person\"\n              :readonly=\"mode === 'show'\"\n              hide-details=\"auto\"\n              :error-messages=\"errors.contact_person\"\n              :persistent-placeholder=\"mode === 'show'\"\n            ></v-text-field>\n          </v-col>\n\n          <v-col\n            cols=\"12\"\n          >\n            <v-text-field\n              v-model=\"optionsLocal.address\"\n              outlined\n              dense\n              label=\"Address\"\n              :readonly=\"mode === 'show'\"\n              hide-details=\"auto\"\n              :error-messages=\"errors.address\"\n              :persistent-placeholder=\"mode === 'show'\"\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"info\"\n              text\n              style=\"margin-top: 25px; margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Bank Details\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"2\"\n          >\n            <v-text-field\n              v-model=\"optionsLocal.bank_details\"\n              outlined\n              dense\n              label=\"Bank Name\"\n              :readonly=\"mode === 'show'\"\n              hide-details=\"auto\"\n              :error-messages=\"errors.bank_details\"\n              :persistent-placeholder=\"mode === 'show'\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"2\"\n          >\n            <v-text-field\n              v-model=\"optionsLocal.account_no\"\n              outlined\n              dense\n              label=\"Account No.\"\n              :readonly=\"mode === 'show'\"\n              hide-details=\"auto\"\n              :error-messages=\"errors.account_no\"\n              :persistent-placeholder=\"mode === 'show'\"\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-top: 25px; margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Raw Materials\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"4\"\n          >\n            <v-select\n              v-model=\"optionsLocal.product_ids\"\n              dense\n              outlined\n              multiple\n              :prepend-inner-icon=\"icons.mdiHumanEdit\"\n              item-text=\"name\"\n              item-value=\"id\"\n              label=\"Raw Materials\"\n              :items=\"rawMaterials\"\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n        </v-row>\n      </v-card-text>\n\n      <v-card-text>\n        <v-btn\n          v-show=\"mode === 'create' || mode === 'update'\"\n          outlined\n          class=\"mt-3 mr-3\"\n          color=\"primary\"\n          @click=\"save\"\n        >\n          {{ buttonLabel }}\n        </v-btn>\n        <v-btn\n          outlined\n          class=\"mt-3\"\n          type=\"reset\"\n          @click.prevent=\"goBack\"\n        >\n          Back to List\n        </v-btn>\n      </v-card-text>\n    </v-form>\n  </v-card>\n</template>\n\n<script>\nimport { computed, ref, onMounted, watch } from '@vue/composition-api'\nimport router from '@/router'\nimport store from '@/store'\nimport { CREATE_SUPPLIER, UPDATE_SUPPLIER, GET_PRODUCTS } from '@/store/actions.type'\nimport { SET_ERROR } from '@/store/mutations.type'\nimport { mdiAlertOutline } from '@mdi/js'\n\nexport default {\n  props: {\n    informationData: {\n      type: Object,\n      default: () => ({\n        name: '',\n        contact_person: '',\n        address: '',\n        bank_details: '',\n        account_no: '',\n      }),\n    },\n    mode: {\n      type: String,\n    },\n  },\n  setup(props) {\n    const errors = computed(() => store.getters.errors)\n    const optionsLocal = computed(() => props.informationData)\n    const rawMaterials = computed(() => store.getters.products)\n    const showAlert = ref(false)\n    const buttonLabel = props.mode === 'create' ? 'Save' : 'Update'\n\n    const goBack = () => {\n      router.push('/suppliers')\n    }\n\n    const resolveFormSuccess = () => {\n      showAlert.value = true\n      setTimeout(() => {\n        goBack()\n      }, 5000)\n    }\n\n    watch(optionsLocal, value => {\n      if (props.mode === 'update') {\n        optionsLocal.value.product_ids = optionsLocal.value.products?.map(product => product.id)\n      }\n    })\n\n\n    const save = () => {\n      const form = optionsLocal.value\n\n      if (props.mode === 'update') {\n        store.dispatch(UPDATE_SUPPLIER, form).then(data => {\n          if (data != null) {\n            resolveFormSuccess()\n          }\n        })\n      }\n\n      if (props.mode === 'create') {\n        store.dispatch(CREATE_SUPPLIER, form).then(data => {\n          if (data != null) {\n            resolveFormSuccess()\n          }\n        })\n      }\n    }\n\n    onMounted(() => {\n      store.dispatch(GET_PRODUCTS)\n    })\n\n    return {\n      icons: {\n        mdiAlertOutline,\n      },\n      rawMaterials,\n      optionsLocal,\n      goBack,\n      save,\n      showAlert,\n      errors,\n      buttonLabel,\n    }\n  },\n}\n</script>\n"]}]}