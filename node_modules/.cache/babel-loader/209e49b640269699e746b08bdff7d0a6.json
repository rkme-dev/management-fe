{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/logistics/trip-tickets/SalesDrItemSelection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/logistics/trip-tickets/SalesDrItemSelection.vue","mtime":1665298457912},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IHdhdGNoLCBvbk1vdW50ZWQsIGNvbXB1dGVkLCB0b1JlZiwgcmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGkvZGlzdC92dWUtY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHsgbWRpUHJvZ3Jlc3NDbG9zZSwgbWRpVGltZWxpbmVDaGVjayB9IGZyb20gJ0BtZGkvanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NhbGVzRHJJdGVtU2VsZWN0aW9uVnVlJywKICBwcm9wczogewogICAgYXJlYTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBzZWxlY3RlZEl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBlbWl0ID0gX3JlZi5lbWl0OwogICAgdmFyIHRyaXBUaWNrZXRJZCA9IHRvUmVmKHByb3BzLCAnaWQnKTsKICAgIHZhciBhcmVhRGF0YSA9IHRvUmVmKHByb3BzLCAnYXJlYScpOwogICAgdmFyIHNlbGVjdGVkSXRlbXNQcm9wID0gdG9SZWYocHJvcHMsICdzZWxlY3RlZEl0ZW1zJyk7CiAgICB2YXIgc2VsZWN0ZWREckl0ZW1zID0gcmVmKFtdKTsKICAgIHZhciBzYWxlc0RySXRlbXMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5TYWxlc0RyU3RvcmUuaXRlbXM7CiAgICB9KTsKICAgIHZhciBoZWFkZXJzID0gW3sKICAgICAgdGV4dDogJ0RhdGUnLAogICAgICBhbGlnbjogJ3N0YXJ0JywKICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogJ3NhbGVzX2RyX2l0ZW0uc2FsZXNfZHIuZGF0ZV9wb3N0ZWQnCiAgICB9LCB7CiAgICAgIHRleHQ6ICdEUiBOdW1iZXInLAogICAgICB2YWx1ZTogJ3NhbGVzX2RyX2l0ZW0uc2FsZXNfZHIuc2FsZXNfZHJfbnVtYmVyJwogICAgfSwgewogICAgICB0ZXh0OiAnQ3VzdG9tZXInLAogICAgICB2YWx1ZTogJ3NhbGVzX2RyX2l0ZW0uc2FsZXNfZHIuY3VzdG9tZXIubmFtZScKICAgIH0sIHsKICAgICAgdGV4dDogJ0FyZWEnLAogICAgICB2YWx1ZTogJ3NhbGVzX2RyX2l0ZW0uc2FsZXNfZHIuYXJlYScKICAgIH0sIHsKICAgICAgdGV4dDogJ0l0ZW0gTmFtZScsCiAgICAgIHZhbHVlOiAncHJvZHVjdC5uYW1lJwogICAgfSwgewogICAgICB0ZXh0OiAnUXVhbnRpdHknLAogICAgICB2YWx1ZTogJ3F1YW50aXR5JwogICAgfSwgewogICAgICB0ZXh0OiAnVW5pdCcsCiAgICAgIHZhbHVlOiAndW5pdCcKICAgIH1dOwogICAgdmFyIGRhdGEgPSByZWYoewogICAgICBhcmVhOiBhcmVhRGF0YS52YWx1ZSwKICAgICAgaWQ6IHRyaXBUaWNrZXRJZC52YWx1ZQogICAgfSk7CgogICAgdmFyIGluaXRpYWxpemUgPSBmdW5jdGlvbiBpbml0aWFsaXplKCkgewogICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNEclN0b3JlL2dldFVubGlua0l0ZW1zJywgZGF0YS52YWx1ZSk7CiAgICB9OwoKICAgIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW1zUHJvcC52YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RlZERySXRlbXMudmFsdWUgPSBzZWxlY3RlZEl0ZW1zUHJvcC52YWx1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGluaXRpYWxpemUoZGF0YS52YWx1ZSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKICAgIHdhdGNoKGFyZWFEYXRhLCBmdW5jdGlvbiAoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvZ2V0VW5saW5rSXRlbXMnLCBkYXRhLnZhbHVlKTsKICAgIH0pOwoKICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGVtaXQoJ2NhbmNlbCcpOwogICAgfTsKCiAgICB2YXIgYWRkT3JVcGRhdGVJdGVtcyA9IGZ1bmN0aW9uIGFkZE9yVXBkYXRlSXRlbXMoKSB7CiAgICAgIGVtaXQoJ2FkZE9yVXBkYXRlSXRlbXMnLCBzZWxlY3RlZERySXRlbXMudmFsdWUpOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBhZGRPclVwZGF0ZUl0ZW1zOiBhZGRPclVwZGF0ZUl0ZW1zLAogICAgICBjYW5jZWw6IGNhbmNlbCwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlQcm9ncmVzc0Nsb3NlOiBtZGlQcm9ncmVzc0Nsb3NlLAogICAgICAgIG1kaVRpbWVsaW5lQ2hlY2s6IG1kaVRpbWVsaW5lQ2hlY2sKICAgICAgfSwKICAgICAgc2VsZWN0ZWREckl0ZW1zOiBzZWxlY3RlZERySXRlbXMsCiAgICAgIHNhbGVzRHJJdGVtczogc2FsZXNEckl0ZW1zLAogICAgICBoZWFkZXJzOiBoZWFkZXJzCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA,SACAA,KADA,EAEAC,SAFA,EAGAC,QAHA,EAIAC,KAJA,EAKAC,GALA,QAMA,+CANA;AAOA;AAEA;EACAC,+BADA;EAEAC;IACAC;MACAC,YADA;MAEAC,cAFA;MAGAC;IAHA,CADA;IAMAC;MACAH,YADA;MAEAC,eAFA;MAGAC;IAHA,CANA;IAWAE;MACAJ,WADA;MAEAC,cAFA;MAGAC;QAAA;MAAA;IAHA;EAXA,CAFA;EAmBAG,KAnBA,iBAmBAP,KAnBA,QAmBA;IAAA;IACA;IACA;IACA;IACA;IACA;MAAA;IAAA;IACA,eACA;MACAQ,YADA;MAEAC,cAFA;MAGAC,eAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;IAAA,CAVA,EAWA;MAAAH;MAAAG;IAAA,CAXA,EAYA;MAAAH;MAAAG;IAAA,CAZA;IAeA;MACAV,oBADA;MAEAI;IAFA;;IAKA;MACAO;IACA,CAFA;;IAIAjB;MAAA;QAAA;UAAA;YAAA;cACA;gBACAkB;cACA;;cAEAC;;YALA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;IAQApB;MACAkB;IACA,CAFA;;IAIA;MACAG;IACA,CAFA;;IAIA;MACAA;IACA,CAFA;;IAIA;MACAC,kCADA;MAEAC,cAFA;MAGAC;QACAC,kCADA;QAEAC;MAFA,CAHA;MAOAP,gCAPA;MAQAQ,0BARA;MASAC;IATA;EAWA;AAhFA","names":["watch","onMounted","computed","toRef","ref","name","props","area","type","required","default","id","selectedItems","setup","text","align","sortable","value","store","selectedDrItems","initialize","emit","addOrUpdateItems","cancel","icons","mdiProgressClose","mdiTimelineCheck","salesDrItems","headers"],"sourceRoot":"src/views/pages/logistics/trip-tickets","sources":["SalesDrItemSelection.vue"],"sourcesContent":["<template>\n  <v-form>\n    <v-row>\n      <v-col cols=\"12\">\n        <v-data-table\n          v-model=\"selectedDrItems\"\n          show-select\n          :items=\"salesDrItems\"\n          :headers=\"headers\"\n        >\n        </v-data-table>\n      </v-col>\n      <v-col\n        cols=\"auto\"\n        class=\"d-flex\"\n      >\n        <v-btn\n          outlined\n          class=\"me-3 mt-4\"\n          type=\"reset\"\n          color=\"info\"\n          @click.prevent=\"cancel\"\n        >\n          <v-icon>\n            {{ icons.mdiProgressClose }}\n          </v-icon>\n          Close\n        </v-btn>\n        <v-btn\n          outlined\n          class=\"me-3 mt-4\"\n          type=\"reset\"\n          color=\"success\"\n          @click.prevent=\"addOrUpdateItems\"\n        >\n          <v-icon>\n            {{ icons.mdiTimelineCheck }}\n          </v-icon>\n          Submit\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-form>\n</template>\n\n<script>\nimport store from '@/store'\nimport {\n  watch,\n  onMounted,\n  computed,\n  toRef,\n  ref,\n} from '@vue/composition-api/dist/vue-composition-api'\nimport { mdiProgressClose, mdiTimelineCheck } from '@mdi/js'\n\nexport default {\n  name: 'SalesDrItemSelectionVue',\n  props: {\n    area: {\n      type: String,\n      required: true,\n      default: null,\n    },\n    id: {\n      type: Number,\n      required: false,\n      default: null,\n    },\n    selectedItems: {\n      type: Array,\n      required: true,\n      default: (() => []),\n    },\n  },\n  setup(props, { emit }) {\n    const tripTicketId = toRef(props, 'id')\n    const areaData = toRef(props, 'area')\n    const selectedItemsProp = toRef(props, 'selectedItems')\n    const selectedDrItems = ref([])\n    const salesDrItems = computed(() => store.state.SalesDrStore.items)\n    const headers = [\n      {\n        text: 'Date',\n        align: 'start',\n        sortable: false,\n        value: 'sales_dr_item.sales_dr.date_posted',\n      },\n      { text: 'DR Number', value: 'sales_dr_item.sales_dr.sales_dr_number' },\n      { text: 'Customer', value: 'sales_dr_item.sales_dr.customer.name' },\n      { text: 'Area', value: 'sales_dr_item.sales_dr.area' },\n      { text: 'Item Name', value: 'product.name' },\n      { text: 'Quantity', value: 'quantity' },\n      { text: 'Unit', value: 'unit' },\n    ]\n\n    const data = ref({\n      area: areaData.value,\n      id: tripTicketId.value,\n    })\n\n    const initialize = () => {\n      store.dispatch('SalesDrStore/getUnlinkItems', data.value)\n    }\n\n    onMounted(async () => {\n      if (selectedItemsProp.value.length > 0) {\n        selectedDrItems.value =  selectedItemsProp.value\n      }\n\n      initialize(data.value)\n    })\n\n    watch(areaData, () => {\n      store.dispatch('SalesDrStore/getUnlinkItems', data.value)\n    })\n\n    const cancel = () => {\n      emit('cancel')\n    }\n\n    const addOrUpdateItems = () => {\n      emit('addOrUpdateItems', selectedDrItems.value)\n    }\n\n    return {\n      addOrUpdateItems,\n      cancel,\n      icons: {\n        mdiProgressClose,\n        mdiTimelineCheck,\n      },\n      selectedDrItems,\n      salesDrItems,\n      headers,\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}