{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","mtime":1656579631383},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvbWFyay9wcm9qZWN0cy9lbmNvLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgQXhpb3NJbnN0YW5jZSBmcm9tICJAL3NlcnZpY2UvQXhpb3NJbnN0YW5jZSI7Cgp2YXIgQXV0aGVudGljYXRpb25TZXJ2aWNlID0gLyojX19QVVJFX18qL19jcmVhdGVDbGFzcyhmdW5jdGlvbiBBdXRoZW50aWNhdGlvblNlcnZpY2UoKSB7CiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhlbnRpY2F0aW9uU2VydmljZSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYXV0aEhlYWRlciIsIGZ1bmN0aW9uICgpIHsKICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKCiAgICBpZiAodXNlciAhPT0gbnVsbCAmJiB1c2VyICE9PSB2b2lkIDAgJiYgdXNlci5hY2Nlc3NUb2tlbikgewogICAgICByZXR1cm4gewogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQodXNlci5hY2Nlc3NUb2tlbikKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4ge307CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibG9naW4iLCBmdW5jdGlvbiAodXNlcikgewogICAgcmV0dXJuIEF4aW9zSW5zdGFuY2UucG9zdCgnbG9naW4nLCB7CiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCiAgICAgICAgcmVzcG9uc2UuZGF0YS5hY2Nlc3NUb2tlbiA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzX3Rva2VuOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KCiAgICAgICAgcmVzcG9uc2UuZGF0YS5yZWZyZXNoVG9rZW4gPSByZXNwb25zZS5kYXRhLnJlZnJlc2hfdG9rZW47CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibG9nb3V0IiwgZnVuY3Rpb24gKCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICB9KTsKfSk7CgpleHBvcnQgeyBBdXRoZW50aWNhdGlvblNlcnZpY2UgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["AxiosInstance","AuthenticationService","user","JSON","parse","localStorage","getItem","accessToken","Authorization","post","email","password","then","response","data","access_token","refreshToken","refresh_token","setItem","stringify","removeItem"],"sources":["/Users/mark/projects/enco-fe/src/service/AuthenticationService.js"],"sourcesContent":["import AxiosInstance from \"@/service/AxiosInstance\";\n\nexport default class AuthenticationService {\n  authHeader = () => {\n    const user = JSON.parse(localStorage.getItem('user'))\n\n    if (user?.accessToken) {\n      return { Authorization: `Bearer ${user.accessToken}` }\n    }\n\n    return {}\n  }\n\n  login = user => AxiosInstance\n    .post('login', {\n      email: user.email,\n      password: user.password,\n    })\n    .then(response => {\n      if (response.data.access_token) {\n        // eslint-disable-next-line no-param-reassign\n        response.data.accessToken = response.data.access_token\n        // eslint-disable-next-line no-param-reassign\n        response.data.refreshToken = response.data.refresh_token\n\n        localStorage.setItem('user', JSON.stringify(response.data))\n      }\n\n      return response.data\n    })\n\n  logout = () => {\n    localStorage.removeItem('user')\n  }\n}\n"],"mappings":";;;;AAAA,OAAOA,aAAP,MAA0B,yBAA1B;;IAEqBC,qB;;;sCACN,YAAM;IACjB,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;IAEA,IAAIJ,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEK,WAAV,EAAuB;MACrB,OAAO;QAAEC,aAAa,mBAAYN,IAAI,CAACK,WAAjB;MAAf,CAAP;IACD;;IAED,OAAO,EAAP;EACD,C;;iCAEO,UAAAL,IAAI;IAAA,OAAIF,aAAa,CAC1BS,IADa,CACR,OADQ,EACC;MACbC,KAAK,EAAER,IAAI,CAACQ,KADC;MAEbC,QAAQ,EAAET,IAAI,CAACS;IAFF,CADD,EAKbC,IALa,CAKR,UAAAC,QAAQ,EAAI;MAChB,IAAIA,QAAQ,CAACC,IAAT,CAAcC,YAAlB,EAAgC;QAC9B;QACAF,QAAQ,CAACC,IAAT,CAAcP,WAAd,GAA4BM,QAAQ,CAACC,IAAT,CAAcC,YAA1C,CAF8B,CAG9B;;QACAF,QAAQ,CAACC,IAAT,CAAcE,YAAd,GAA6BH,QAAQ,CAACC,IAAT,CAAcG,aAA3C;QAEAZ,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeN,QAAQ,CAACC,IAAxB,CAA7B;MACD;;MAED,OAAOD,QAAQ,CAACC,IAAhB;IACD,CAhBa,CAAJ;EAAA,C;;kCAkBH,YAAM;IACbT,YAAY,CAACe,UAAb,CAAwB,MAAxB;EACD,C;;;SA/BkBnB,qB"}]}