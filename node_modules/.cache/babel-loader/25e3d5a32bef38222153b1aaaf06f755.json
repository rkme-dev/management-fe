{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/drs/components/OrderItemsSelection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/drs/components/OrderItemsSelection.vue","mtime":1665998053190},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWRpQWNjb3VudEVkaXQsIG1kaURlbGV0ZUNpcmNsZSwgbWRpRm9ybWF0Q2xlYXIsIG1kaUhlYWRDaGVjaywgbWRpSW5mb3JtYXRpb24sIG1kaVRleHRCb3hQbHVzLCBtZGlWYWx2ZUNsb3NlZCB9IGZyb20gJ0BtZGkvanMnOwppbXBvcnQgeyBjb21wdXRlZCwgb25Nb3VudGVkLCByZWYsIHRvUmVmLCB3YXRjaCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBkYXRlRm9ybWF0MiB9IGZyb20gJ0AvdXRpbHMvdGltZSc7CmltcG9ydCBTYWxlc09yZGVyU2VydmljZSBmcm9tICdAL3NlcnZpY2UvU2FsZXNPcmRlclNlcnZpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ09yZGVySXRlbXNTZWxlY3Rpb24nLAogIHByb3BzOiB7CiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICdDcmVhdGUnOwogICAgICB9CiAgICB9LAogICAgaXRlbXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdDsKICAgIHN0b3JlLmRpc3BhdGNoKCdQcm9kdWN0U3RvcmUvbGlzdCcpOwogICAgdmFyIHNhbGVzT3JkZXJTZXJ2aWNlID0gbmV3IFNhbGVzT3JkZXJTZXJ2aWNlKCk7CiAgICB2YXIgc2VhcmNoID0gcmVmKCk7CiAgICB2YXIgZm9ybURhdGEgPSByZWYoe30pOwogICAgdmFyIGZvcm1UaXRsZSA9IHJlZignQWRkIEl0ZW0nKTsKICAgIHZhciBleGlzdGluZ1NhbGVzT3JkZXJJdGVtcyA9IHRvUmVmKHByb3BzLCAnaXRlbXMnKTsKICAgIHZhciBvcmRlckl0ZW1zID0gcmVmKFtdKTsKICAgIHZhciBwcm9kdWN0cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlByb2R1Y3RTdG9yZS5saXN0OwogICAgfSk7CiAgICB2YXIgc2VsZWN0ZWRPcmRlckl0ZW1zID0gcmVmKFtdKTsKICAgIHZhciBjdXJyZW50SXRlbSA9IHJlZih7CiAgICAgIHByb2R1Y3RfaWQ6IG51bGwsCiAgICAgIHF1YW50aXR5OiBudWxsLAogICAgICBwcmljZTogbnVsbCwKICAgICAgdG90YWxfYW1vdW50OiAwLAogICAgICB1bml0OiBudWxsLAogICAgICBuYW1lOiBudWxsLAogICAgICBza3U6IG51bGwsCiAgICAgIHNsdWc6IG51bGwKICAgIH0pOwogICAgdmFyIGN1c3RvbWVyID0gcmVmKHt9KTsKICAgIHZhciBmaWx0ZXJlZE9yZGVySXRlbXMgPSByZWYoW10pOwogICAgdmFyIG9yaWdpbmFsT3JkZXJJdGVtcyA9IHJlZihbXSk7CiAgICB2YXIgc2FsZXNPcmRlclRvdGFsQW1vdW50ID0gcmVmKDApOwogICAgdmFyIG9yZGVySXRlbUlkcyA9IHJlZihbXSk7CiAgICB2YXIgbG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBvbk1vdW50ZWQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gc2FsZXNPcmRlclNlcnZpY2UuYWxsT3JkZXJJdGVtcyh0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gcmVzcG9uc2UuZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgaXRlbS5jdXN0b21lcl9uYW1lID0gaXRlbS5jdXN0b21lci5uYW1lOwogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb3JkZXJJdGVtcy52YWx1ZSA9IGl0ZW1zOwogICAgICAgICAgICAgICAgb3JpZ2luYWxPcmRlckl0ZW1zLnZhbHVlID0gaXRlbXM7CiAgICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsgLy8gc3RvcmUuZGlzcGF0Y2goJ1NhbGVzT3JkZXJTdG9yZS9yZXNldE9yZGVySXRlbXMnKQogICAgLy8KICAgIC8vIHdhdGNoKGN1c3RvbWVySWREYXRhLCAoKSA9PiB7CiAgICAvLyAgIHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSA9IDAKICAgIC8vICAgc2VsZWN0ZWRPcmRlckl0ZW1zLnZhbHVlID0gW10KICAgIC8vCiAgICAvLyAgIGlmIChjdXN0b21lcklkRGF0YS52YWx1ZSA9PT0gbnVsbCkgewogICAgLy8gICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc09yZGVyU3RvcmUvcmVzZXRPcmRlckl0ZW1zJykKICAgIC8vICAgfQogICAgLy8gfSkKCiAgICB3YXRjaChvcmRlckl0ZW1zLCBmdW5jdGlvbiAoKSB7CiAgICAgIHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSA9IDA7CiAgICAgIHNlbGVjdGVkT3JkZXJJdGVtcy52YWx1ZSA9IFtdOwoKICAgICAgaWYgKGV4aXN0aW5nU2FsZXNPcmRlckl0ZW1zLnZhbHVlKSB7CiAgICAgICAgZXhpc3RpbmdTYWxlc09yZGVySXRlbXMudmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgdmFyIGZpbmRJdGVtID0gb3JkZXJJdGVtcy52YWx1ZS5maW5kKGZ1bmN0aW9uIChvcmRlckl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIG9yZGVySXRlbS5vcmRlcl9pdGVtX2lkID09PSBpdGVtLnNhbGVzX29yZGVyX2l0ZW1faWQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoZmluZEl0ZW0pIHsKICAgICAgICAgICAgc2VsZWN0ZWRPcmRlckl0ZW1zLnZhbHVlLnB1c2goZmluZEl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIHZhciB1cGRhdGVLZXkgPSByZWYoMCk7CgogICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIGZpbHRlcigpIHsKICAgICAgdmFyIGN1c3RvbWVySWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgIGlmIChjdXN0b21lcklkICE9PSBudWxsKSB7CiAgICAgICAgb3JpZ2luYWxPcmRlckl0ZW1zLnZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLmN1c3RvbWVyLmlkID09PSBjdXN0b21lcklkKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGZpbHRlcmVkT3JkZXJJdGVtcy52YWx1ZSA9IHJlc3VsdDsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWx0ZXJlZE9yZGVySXRlbXMudmFsdWUgPSBbXTsKICAgICAgfQoKICAgICAgdXBkYXRlS2V5LnZhbHVlICs9IDE7CiAgICB9OwoKICAgIHdhdGNoKHNlbGVjdGVkT3JkZXJJdGVtcywgZnVuY3Rpb24gKCkgewogICAgICBvcmRlckl0ZW1JZHMudmFsdWUgPSBbXTsKCiAgICAgIGlmIChzZWxlY3RlZE9yZGVySXRlbXMudmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSA9IDA7CiAgICAgICAgc2VsZWN0ZWRPcmRlckl0ZW1zLnZhbHVlLmZvckVhY2goZnVuY3Rpb24gKG9yZGVySXRlbSkgewogICAgICAgICAgZmlsdGVyKG9yZGVySXRlbS5jdXN0b21lci5pZCk7CiAgICAgICAgICBjdXN0b21lci52YWx1ZSA9IG9yZGVySXRlbS5jdXN0b21lcjsKCiAgICAgICAgICBpZiAob3JkZXJJdGVtKSB7CiAgICAgICAgICAgIG9yZGVySXRlbUlkcy52YWx1ZS5wdXNoKG9yZGVySXRlbS5vcmRlcl9pdGVtX2lkKTsKICAgICAgICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gcGFyc2VGbG9hdChzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUpICsgcGFyc2VGbG9hdChvcmRlckl0ZW0gPT09IG51bGwgfHwgb3JkZXJJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcmRlckl0ZW0udG90YWxfYW1vdW50KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWx0ZXIoKTsKICAgICAgICBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUgPSAwOwogICAgICAgIGN1c3RvbWVyLnZhbHVlID0ge307CiAgICAgIH0KICAgIH0pOwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIGVtaXQoJ3RvdGFsQW1vdW50Jywgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlKTsKICAgICAgZW1pdCgnb3JkZXJJdGVtcycsIHNlbGVjdGVkT3JkZXJJdGVtcy52YWx1ZSk7CiAgICAgIGVtaXQoJ3NldEN1c3RvbWVyJywgY3VzdG9tZXIudmFsdWUpOwogICAgfTsKCiAgICB2YXIgY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgc2VsZWN0ZWRPcmRlckl0ZW1zLnZhbHVlID0gW107CiAgICB9OwoKICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICBlbWl0KCdjbG9zZScpOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBjbG9zZTogY2xvc2UsCiAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgIGNsZWFyOiBjbGVhciwKICAgICAgdXBkYXRlS2V5OiB1cGRhdGVLZXksCiAgICAgIGRhdGVGb3JtYXQyOiBkYXRlRm9ybWF0MiwKICAgICAgc3VibWl0OiBzdWJtaXQsCiAgICAgIHNlYXJjaDogc2VhcmNoLAogICAgICBzZWxlY3RlZE9yZGVySXRlbXM6IHNlbGVjdGVkT3JkZXJJdGVtcywKICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50OiBzYWxlc09yZGVyVG90YWxBbW91bnQsCiAgICAgIGZvcm1UaXRsZTogZm9ybVRpdGxlLAogICAgICBjdXJyZW50SXRlbTogY3VycmVudEl0ZW0sCiAgICAgIG9yZGVySXRlbXM6IG9yZGVySXRlbXMsCiAgICAgIGZpbHRlcmVkT3JkZXJJdGVtczogZmlsdGVyZWRPcmRlckl0ZW1zLAogICAgICBmb3JtRGF0YTogZm9ybURhdGEsCiAgICAgIHByb2R1Y3RzOiBwcm9kdWN0cywKICAgICAgaGVhZGVyczogW3sKICAgICAgICB0ZXh0OiAnRGF0ZScsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6ICdkYXRlX3Bvc3RlZCcKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdDdXN0b21lcicsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgdmFsdWU6ICdjdXN0b21lcl9uYW1lJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1NPIE5vJywKICAgICAgICB2YWx1ZTogJ3NhbGVzX29yZGVyX251bWJlcicsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdQcm9kdWN0IE5hbWUnLAogICAgICAgIHZhbHVlOiAncHJvZHVjdF9uYW1lJywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1F1YW50aXR5JywKICAgICAgICB2YWx1ZTogJ3F1YW50aXR5JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1VuaXQnLAogICAgICAgIHZhbHVlOiAndW5pdCcsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdQcmljZScsCiAgICAgICAgdmFsdWU6ICdwcmljZScsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdBbW91bnQnLAogICAgICAgIHZhbHVlOiAndG90YWxfYW1vdW50JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9XSwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlWYWx2ZUNsb3NlZDogbWRpVmFsdmVDbG9zZWQsCiAgICAgICAgbWRpSGVhZENoZWNrOiBtZGlIZWFkQ2hlY2ssCiAgICAgICAgbWRpRm9ybWF0Q2xlYXI6IG1kaUZvcm1hdENsZWFyLAogICAgICAgIG1kaUFjY291bnRFZGl0OiBtZGlBY2NvdW50RWRpdCwKICAgICAgICBtZGlEZWxldGVDaXJjbGU6IG1kaURlbGV0ZUNpcmNsZSwKICAgICAgICBtZGlJbmZvcm1hdGlvbjogbWRpSW5mb3JtYXRpb24sCiAgICAgICAgbWRpVGV4dEJveFBsdXM6IG1kaVRleHRCb3hQbHVzCiAgICAgIH0KICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["mdiAccountEdit","mdiDeleteCircle","mdiFormatClear","mdiHeadCheck","mdiInformation","mdiTextBoxPlus","mdiValveClosed","computed","onMounted","ref","toRef","watch","name","props","disabled","type","required","default","mode","items","setup","store","product_id","quantity","price","total_amount","unit","sku","slug","loading","salesOrderService","then","item","orderItems","originalOrderItems","salesOrderTotalAmount","selectedOrderItems","existingSalesOrderItems","result","filteredOrderItems","updateKey","orderItemIds","filter","customer","emit","close","clear","dateFormat2","submit","search","formTitle","currentItem","formData","products","headers","text","sortable","value","icons"],"sourceRoot":"src/views/pages/sales/drs/components","sources":["OrderItemsSelection.vue"],"sourcesContent":["<template>\n  <v-row class=\"\">\n    <v-overlay :value=\"loading\">\n      <div class=\"text-center\">\n        <v-progress-circular\n          :size=\"150\"\n          color=\"primary\"\n          indeterminate\n        ></v-progress-circular>\n      </div>\n    </v-overlay>\n    <v-col cols=\"12\">\n      <v-alert\n        color=\"success\"\n        text\n        style=\"margin-bottom: -30px\"\n      >\n        <div class=\"d-flex align-start\">\n          <v-icon color=\"success\">\n            {{ icons.mdiInformation }}\n          </v-icon>\n          <div class=\"ms-3\">\n            <p class=\"text-base font-weight-medium mb-1\">\n              Sales Order Items\n            </p>\n          </div>\n        </div>\n      </v-alert>\n    </v-col>\n    <v-col\n      v-if=\"filteredOrderItems.length > 0\"\n      class=\"\"\n      cols=\"12\"\n    >\n      <v-data-table\n        v-show=\"filteredOrderItems.length > 0\"\n        :key=\"updateKey\"\n        v-model=\"selectedOrderItems\"\n        :headers=\"headers\"\n        item-key=\"order_item_id\"\n        :items=\"filteredOrderItems\"\n        :footer-props=\"{\n          'items-per-page-options': [10, 20, 30, 40, 50]\n        }\"\n        :items-per-page=\"10\"\n        :search=\"search\"\n        show-select\n        fixed-header\n        show-expand\n      >\n        <template v-slot:item.data-table-select=\"{ item, isSelected, select }\">\n          <v-simple-checkbox\n            :value=\"isSelected\"\n            :disabled=\"disabled\"\n            :ripple=\"false\"\n            @input=\"select($event)\"\n          ></v-simple-checkbox>\n        </template>\n        <template v-slot:top>\n          <v-toolbar\n            flat\n          >\n            <v-card-text>\n              <v-row class=\"mt-10\">\n                <v-col\n                  cols=\"4\"\n                >\n                  <v-text-field\n                    v-model=\"search\"\n                    :append-icon=\"icons.mdiMagnify\"\n                    label=\"Search\"\n                    single-line\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                >\n                </v-col>\n                <v-col\n                  class=\"\"\n                  cols=\"4\"\n                >\n                  <v-currency-field\n                    v-model=\"salesOrderTotalAmount\"\n                    outlined\n                    class=\"text-green\"\n                    disabled\n                    dense\n                    hide-details=\"auto\"\n                    label=\"Sales Order Total Amount\"\n                  ></v-currency-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                  offset-md=\"4\"\n                >\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-toolbar>\n        </template>\n        <template #item.date_posted=\"{ item }\">\n          {{ dateFormat2(item.date_posted) }}\n        </template>\n        <template #item.customer_name=\"{ item }\">\n          <p style=\"color: green\">\n            {{ item.customer_name }}\n          </p>\n        </template>\n        <template #item.price=\"{ item }\">\n          <v-currency-field\n            v-model=\"item.price\"\n            prefix=\"PHP\"\n            class=\"text-green\"\n            disabled\n          >\n          </v-currency-field>\n        </template>\n        <template #item.total_amount=\"{ item }\">\n          <v-currency-field\n            v-model=\"item.total_amount\"\n            prefix=\"PHP\"\n            class=\"text-green\"\n            disabled\n          >\n          </v-currency-field>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon\n            small\n            @click=\"deleteItem(item)\"\n          >\n            {{ icons.mdiDeleteCircle }}\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-col>\n    <v-col\n      v-if=\"filteredOrderItems.length === 0\"\n      class=\"\"\n      cols=\"12\"\n    >\n      <v-data-table\n        :key=\"updateKey\"\n        v-model=\"selectedOrderItems\"\n        :headers=\"headers\"\n        item-key=\"order_item_id\"\n        :items=\"orderItems\"\n        :search=\"search\"\n        :footer-props=\"{\n          'items-per-page-options': [10, 20, 30, 40, 50]\n        }\"\n        :items-per-page=\"10\"\n        fixed-header\n        show-select\n        show-expand\n      >\n        <template v-slot:item.data-table-select=\"{ item, isSelected, select }\">\n          <v-simple-checkbox\n            :value=\"isSelected\"\n            :disabled=\"disabled\"\n            :ripple=\"false\"\n            @input=\"select($event)\"\n          ></v-simple-checkbox>\n        </template>\n        <template v-slot:top>\n          <v-toolbar\n            flat\n          >\n            <v-card-text>\n              <v-row class=\"mt-10\">\n                <v-col\n                  cols=\"4\"\n                >\n                  <v-text-field\n                    v-model=\"search\"\n                    :append-icon=\"icons.mdiMagnify\"\n                    label=\"Search\"\n                    single-line\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                >\n                </v-col>\n                <v-col\n                  class=\"\"\n                  cols=\"4\"\n                >\n                  <v-currency-field\n                    v-model=\"salesOrderTotalAmount\"\n                    outlined\n                    class=\"text-green\"\n                    disabled\n                    dense\n                    hide-details=\"auto\"\n                    label=\"Sales Order Total Amount\"\n                  ></v-currency-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                  offset-md=\"4\"\n                >\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-toolbar>\n        </template>\n        <template #item.date_posted=\"{ item }\">\n          {{ dateFormat2(item.date_posted) }}\n        </template>\n        <template #item.customer_name=\"{ item }\">\n          <p style=\"color: green\">\n            {{ item.customer_name }}\n          </p>\n        </template>\n        <template #item.price=\"{ item }\">\n          <v-currency-field\n            v-model=\"item.price\"\n            prefix=\"PHP\"\n            class=\"text-green\"\n            disabled\n          >\n          </v-currency-field>\n        </template>\n        <template #item.total_amount=\"{ item }\">\n          <v-currency-field\n            v-model=\"item.total_amount\"\n            prefix=\"PHP\"\n            class=\"text-green\"\n            disabled\n          >\n          </v-currency-field>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon\n            small\n            @click=\"deleteItem(item)\"\n          >\n            {{ icons.mdiDeleteCircle }}\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-col>\n    <v-col cols=\"6\"></v-col>\n    <v-col cols=\"2\">\n      <v-btn\n        color=\"error\"\n        @click=\"close\"\n      >\n        <v-icon\n          large\n        >\n          {{ icons.mdiValveClosed }}\n        </v-icon>\n        Close\n      </v-btn>\n    </v-col>\n    <v-col cols=\"2\">\n      <v-btn\n        color=\"info\"\n        @click=\"clear\"\n      >\n        <v-icon\n          large\n        >\n          {{ icons.mdiFormatClear }}\n        </v-icon>\n        Clear\n      </v-btn>\n    </v-col>\n    <v-col cols=\"2\">\n      <v-btn\n        color=\"success\"\n        @click=\"submit\"\n      >\n        <v-icon\n          large\n        >\n          {{ icons.mdiHeadCheck }}\n        </v-icon>\n        Submit\n      </v-btn>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport {\n  mdiAccountEdit,\n  mdiDeleteCircle, mdiFormatClear, mdiHeadCheck,\n  mdiInformation,\n  mdiTextBoxPlus, mdiValveClosed,\n} from '@mdi/js'\nimport {\n  computed, onMounted, ref, toRef, watch,\n} from '@vue/composition-api'\nimport store from '@/store'\nimport { dateFormat2 } from '@/utils/time'\nimport SalesOrderService from '@/service/SalesOrderService'\n\nexport default {\n  name: 'OrderItemsSelection',\n  props: {\n    disabled: {\n      type: Boolean,\n      required: false,\n      default: false,\n    },\n    mode: {\n      type: String,\n      required: false,\n      default: (() => 'Create'),\n    },\n    items: {\n      type: Array,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('ProductStore/list')\n    const salesOrderService = new SalesOrderService()\n    const search = ref()\n    const formData = ref({})\n    const formTitle = ref('Add Item')\n    const existingSalesOrderItems = toRef(props, 'items')\n    const orderItems = ref([])\n    const products = computed(() => store.state.ProductStore.list)\n    const selectedOrderItems = ref([])\n    const currentItem = ref({\n      product_id: null,\n      quantity: null,\n      price: null,\n      total_amount: 0,\n      unit: null,\n      name: null,\n      sku: null,\n      slug: null,\n    })\n    const customer = ref({})\n    const filteredOrderItems = ref([])\n    const originalOrderItems = ref([])\n    const salesOrderTotalAmount = ref(0)\n    const orderItemIds = ref([])\n\n    const loading = ref(false)\n\n    onMounted(async () => {\n      loading.value = true\n      await salesOrderService.allOrderItems(true)\n        .then(response => {\n          const items = response.data.map(item => {\n            item.customer_name = item.customer.name\n\n            return item\n          })\n\n          orderItems.value = items\n          originalOrderItems.value = items\n          loading.value = false\n        })\n    })\n\n    // store.dispatch('SalesOrderStore/resetOrderItems')\n    //\n    // watch(customerIdData, () => {\n    //   salesOrderTotalAmount.value = 0\n    //   selectedOrderItems.value = []\n    //\n    //   if (customerIdData.value === null) {\n    //     store.dispatch('SalesOrderStore/resetOrderItems')\n    //   }\n    // })\n\n    watch(orderItems, () => {\n      salesOrderTotalAmount.value = 0\n\n      selectedOrderItems.value = []\n\n      if (existingSalesOrderItems.value) {\n        existingSalesOrderItems.value.forEach(item => {\n          const findItem = orderItems.value.find(orderItem => orderItem.order_item_id === item.sales_order_item_id)\n\n          if (findItem) {\n            selectedOrderItems.value.push(findItem)\n          }\n        })\n      }\n    })\n\n    const updateKey = ref(0)\n\n    const filter = (customerId = null) => {\n      const result = []\n\n      if (customerId !== null) {\n        originalOrderItems.value.forEach(item => {\n          if (item.customer.id === customerId) {\n            result.push(item)\n          }\n        })\n\n        filteredOrderItems.value = result\n      } else {\n        filteredOrderItems.value = []\n      }\n\n      updateKey.value += 1\n    }\n\n    watch(selectedOrderItems, () => {\n      orderItemIds.value = []\n\n      if (selectedOrderItems.value.length > 0) {\n        salesOrderTotalAmount.value = 0\n\n        selectedOrderItems.value.forEach(orderItem => {\n          filter(orderItem.customer.id)\n          customer.value = orderItem.customer\n\n          if (orderItem) {\n            orderItemIds.value.push(orderItem.order_item_id)\n            salesOrderTotalAmount.value = parseFloat(salesOrderTotalAmount.value) + parseFloat(orderItem?.total_amount)\n          }\n        })\n      } else {\n        filter()\n        salesOrderTotalAmount.value = 0\n        customer.value = {}\n      }\n    })\n\n    const submit = () => {\n      emit('totalAmount', salesOrderTotalAmount.value)\n      emit('orderItems', selectedOrderItems.value)\n      emit('setCustomer', customer.value)\n    }\n\n    const clear = () => {\n      selectedOrderItems.value = []\n    }\n\n    const close = () => {\n      emit('close')\n    }\n\n    return {\n      close,\n      loading,\n      clear,\n      updateKey,\n      dateFormat2,\n      submit,\n      search,\n      selectedOrderItems,\n      salesOrderTotalAmount,\n      formTitle,\n      currentItem,\n      orderItems,\n      filteredOrderItems,\n      formData,\n      products,\n      headers: [\n        { text: 'Date', sortable: true, value: 'date_posted' },\n        { text: 'Customer', sortable: true, value: 'customer_name' },\n        { text: 'SO No', value: 'sales_order_number', sortable: true },\n        { text: 'Product Name', value: 'product_name', sortable: true },\n        { text: 'Quantity', value: 'quantity', sortable: true },\n        { text: 'Unit', value: 'unit', sortable: true },\n        { text: 'Price', value: 'price', sortable: true },\n        { text: 'Amount', value: 'total_amount', sortable: true },\n      ],\n      icons: {\n        mdiValveClosed,\n        mdiHeadCheck,\n        mdiFormatClear,\n        mdiAccountEdit,\n        mdiDeleteCircle,\n        mdiInformation,\n        mdiTextBoxPlus,\n      },\n    }\n  }\n  ,\n}\n</script>\n\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n</style>\n"]}]}