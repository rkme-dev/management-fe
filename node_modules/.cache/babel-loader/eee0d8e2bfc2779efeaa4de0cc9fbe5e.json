{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/master-files/finish-products/UnitAndPackingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/master-files/finish-products/UnitAndPackingForm.vue","mtime":1664792701506},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1kaUFjY291bnRFZGl0LCBtZGlEZWxldGVDaXJjbGUsIG1kaUluZm9ybWF0aW9uLCBtZGlUZXh0Qm94UGx1cyB9IGZyb20gJ0BtZGkvanMnOwppbXBvcnQgeyBjb21wdXRlZCwgcmVmLCB0b1JlZiB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VuaXRBbmRQYWNraW5nRm9ybScsCiAgcHJvcHM6IHsKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICdDcmVhdGUnOwogICAgICB9CiAgICB9LAogICAgZXhpc3RpbmdVbml0czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIGl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQ7CiAgICB2YXIgaXNEaXNhYmxlZCA9IHRvUmVmKHByb3BzLCAnZGlzYWJsZWQnKTsKICAgIHZhciBwcm9kdWN0RGF0YSA9IHRvUmVmKHByb3BzLCAncHJvZHVjdCcpOwogICAgdmFyIGl0ZW1Gb3JtTW9kYWwgPSByZWYoZmFsc2UpOwogICAgdmFyIGVycm9ycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLkZpbmlzaFByb2R1Y3RTdG9yZS5lcnJvcnM7CiAgICB9KTsKICAgIHZhciBmb3JtRGF0YSA9IHJlZih7fSk7CiAgICB2YXIgZm9ybVRpdGxlID0gcmVmKCdBZGQgVW5pdCBhbmQgUGFja2luZycpOwogICAgdmFyIHVuaXRJdGVtcyA9IHRvUmVmKHByb3BzLCAnZXhpc3RpbmdVbml0cycpOwogICAgdmFyIHVuaXRzTGlzdCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlVuaXRQYWNraW5nU3RvcmUubGlzdDsKICAgIH0pOwogICAgdmFyIGN1cnJlbnRJdGVtID0gcmVmKHt9KTsKICAgIHZhciB1bml0cyA9IHJlZihbXSk7CgogICAgdmFyIGFkZEl0ZW0gPSBmdW5jdGlvbiBhZGRJdGVtKCkgewogICAgICB2YXIgZXhpc3QgPSB1bml0SXRlbXMudmFsdWUuZmluZChmdW5jdGlvbiAocm93SXRlbSkgewogICAgICAgIHJldHVybiByb3dJdGVtLmlkID09PSBjdXJyZW50SXRlbS52YWx1ZS51bml0X2lkOwogICAgICB9KTsKCiAgICAgIGlmIChleGlzdCA9PT0gdW5kZWZpbmVkIHx8IGV4aXN0ID09PSBudWxsKSB7CiAgICAgICAgdmFyIHVuaXQgPSB1bml0c0xpc3QudmFsdWUuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGN1cnJlbnRJdGVtLnZhbHVlLnVuaXRfaWQgPT09IGl0ZW0uaWQ7CiAgICAgICAgfSk7CiAgICAgICAgZW1pdCgnYWRkZWRVbml0UGFja2luZycsIHsKICAgICAgICAgIG5hbWU6IHVuaXQubmFtZSwKICAgICAgICAgIHBpdm90OiB7CiAgICAgICAgICAgIHVuaXRfcGFja2luZ19pZDogdW5pdC5pZCwKICAgICAgICAgICAgcGFja2luZzogY3VycmVudEl0ZW0udmFsdWUucGFja2luZwogICAgICAgICAgfSwKICAgICAgICAgIGlkOiB1bml0LmlkCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGN1cnJlbnRJdGVtLnZhbHVlLnBhY2tpbmcgPSBudWxsOwogICAgICBjdXJyZW50SXRlbS52YWx1ZS51bml0X2lkID0gbnVsbDsKICAgICAgaXRlbUZvcm1Nb2RhbC52YWx1ZSA9IGZhbHNlOwogICAgfTsKCiAgICB2YXIgZGVsZXRlSXRlbSA9IGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaXRlbSkgewogICAgICB2YXIgaW5kZXhJdGVtID0gdW5pdEl0ZW1zLnZhbHVlLmZpbmRJbmRleChmdW5jdGlvbiAodW5pdEl0ZW0pIHsKICAgICAgICByZXR1cm4gdW5pdEl0ZW0uaWQgPT09IGl0ZW0uaWQ7CiAgICAgIH0pOwogICAgICB1bml0SXRlbXMudmFsdWUuc3BsaWNlKGluZGV4SXRlbSwgMSk7CiAgICAgIGl0ZW1Gb3JtTW9kYWwudmFsdWUgPSBmYWxzZTsKICAgIH07CgogICAgdmFyIGNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgaXRlbUZvcm1Nb2RhbC52YWx1ZSA9IGZhbHNlOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICB1bml0c0xpc3Q6IHVuaXRzTGlzdCwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGFkZEl0ZW06IGFkZEl0ZW0sCiAgICAgIGNhbmNlbDogY2FuY2VsLAogICAgICBkZWxldGVJdGVtOiBkZWxldGVJdGVtLAogICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICBmb3JtVGl0bGU6IGZvcm1UaXRsZSwKICAgICAgY3VycmVudEl0ZW06IGN1cnJlbnRJdGVtLAogICAgICB1bml0SXRlbXM6IHVuaXRJdGVtcywKICAgICAgZm9ybURhdGE6IGZvcm1EYXRhLAogICAgICBpdGVtRm9ybU1vZGFsOiBpdGVtRm9ybU1vZGFsLAogICAgICB1bml0czogdW5pdHMsCiAgICAgIGhlYWRlcnM6IFt7CiAgICAgICAgdGV4dDogJ0lEJywKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogJ3Bpdm90LnVuaXRfcGFja2luZ19pZCcKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdVbml0IE5hbWUnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAnbmFtZScKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdQYWNraW5nJywKICAgICAgICB2YWx1ZTogJ3Bpdm90LnBhY2tpbmcnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAnQWN0aW9ucycsCiAgICAgICAgdmFsdWU6ICdhY3Rpb25zJwogICAgICB9XSwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlBY2NvdW50RWRpdDogbWRpQWNjb3VudEVkaXQsCiAgICAgICAgbWRpRGVsZXRlQ2lyY2xlOiBtZGlEZWxldGVDaXJjbGUsCiAgICAgICAgbWRpSW5mb3JtYXRpb246IG1kaUluZm9ybWF0aW9uLAogICAgICAgIG1kaVRleHRCb3hQbHVzOiBtZGlUZXh0Qm94UGx1cwogICAgICB9CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA,SACAA,cADA,EAEAC,eAFA,EAGAC,cAHA,EAIAC,cAJA,QAKA,SALA;AAMA,SACAC,QADA,EACAC,GADA,EACAC,KADA,QAEA,sBAFA;AAGA;AAEA;EACAC,0BADA;EAEAC;IACAC;MACAC,aADA;MAEAC,eAFA;MAGAC;QAAA;MAAA;IAHA,CADA;IAMAC;MACAH,YADA;MAEAC,eAFA;MAGAC;QAAA;MAAA;IAHA,CANA;IAWAE;MACAJ,WADA;MAEAC,cAFA;MAGAC;QAAA;MAAA;IAHA,CAXA;IAgBAG;MACAL,WADA;MAEAC,eAFA;MAGAC;IAHA;EAhBA,CAFA;EAwBAI,KAxBA,iBAwBAR,KAxBA,QAwBA;IAAA;IACA;IACA;IACA;IACA;MAAA;IAAA;IACA;IACA;IACA;IAEA;MAAA;IAAA;IACA;IAEA;;IAEA;MACA;QAAA;MAAA;;MAEA;QACA;UAAA;QAAA;QAEAS;UACAV,eADA;UAEAW;YACAC,wBADA;YAEAC;UAFA,CAFA;UAMAC;QANA;MAQA;;MAEAC;MACAA;MACAC;IACA,CAnBA;;IAqBA;MACA;QAAA;MAAA;MACAC;MACAD;IACA,CAJA;;IAMA;MACAA;IACA,CAFA;;IAIA;MACAE,oBADA;MAEAC,cAFA;MAGAC,gBAHA;MAIAC,cAJA;MAKAC,sBALA;MAMAC,sBANA;MAOAC,oBAPA;MAQAT,wBARA;MASAE,oBATA;MAUAQ,kBAVA;MAWAT,4BAXA;MAYAU,YAZA;MAaAC,UACA;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAF;QAAAC;QAAAC;MAAA,CAFA,EAGA;QAAAF;QAAAE;MAAA,CAHA,EAIA;QAAAF;QAAAE;MAAA,CAJA,CAbA;MAmBAC;QACAtC,8BADA;QAEAC,gCAFA;QAGAC,8BAHA;QAIAC;MAJA;IAnBA;EA0BA;AA/FA","names":["mdiAccountEdit","mdiDeleteCircle","mdiInformation","mdiTextBoxPlus","computed","ref","toRef","name","props","disabled","type","required","default","mode","existingUnits","items","setup","emit","pivot","unit_packing_id","packing","id","currentItem","itemFormModal","unitItems","unitsList","errors","addItem","cancel","deleteItem","isDisabled","formTitle","formData","units","headers","text","sortable","value","icons"],"sourceRoot":"src/views/pages/master-files/finish-products","sources":["UnitAndPackingForm.vue"],"sourcesContent":["<template>\n  <v-row>\n    <v-col\n      cols=\"12\"\n    >\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"unitItems\"\n        :items-per-page=\"5\"\n      >\n        <template v-slot:top>\n          <v-toolbar\n            flat\n            color=\"primary\"\n          >\n            <v-dialog\n              v-model=\"itemFormModal\"\n              width=\"1200px\"\n              height=\"500px\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  elevation=\"10\"\n                  dark\n                  class=\"mb-2\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                >\n                  Add Unit\n                </v-btn>\n              </template>\n              <v-card>\n                <v-card-title>\n                  <span class=\"headline\">{{ formTitle }}</span>\n                </v-card-title>\n                <v-card-text>\n                  <v-form>\n                    <v-row>\n                      <v-col cols=\"12\">\n                        <v-alert\n                          color=\"primary\"\n                          text\n                          style=\"margin-bottom: -10px\"\n                        >\n                          <div class=\"d-flex align-start\">\n                            <v-icon color=\"primary\">\n                              {{ icons.mdiTextBoxPlus }}\n                            </v-icon>\n                            <div class=\"ms-3\">\n                              <p class=\"text-base font-weight-medium mb-1\">\n                                Unit and Packing\n                              </p>\n                            </div>\n                          </div>\n                        </v-alert>\n                      </v-col>\n                      <v-col\n                        cols=\"6\"\n                      >\n                        <v-select\n                          v-model=\"currentItem.unit_id\"\n                          :items=\"unitsList\"\n                          item-text=\"name\"\n                          item-value=\"id\"\n                          :error-messages=\"errors.unit_id\"\n                          label=\"Unit\"\n                        >\n                        </v-select>\n                      </v-col>\n                      <v-col\n                        cols=\"6\"\n                      >\n                        <v-text-field\n                          v-model=\"currentItem.packing\"\n                          outlined\n                          dense\n                          type=\"number\"\n                          min=\"0\"\n                          step=\"1\"\n                          onfocus=\"this.previousValue = this.value\"\n                          onkeydown=\"this.previousValue = this.value\"\n                          oninput=\"validity.valid || (value = this.previousValue)\"\n                          hide-details=\"auto\"\n                          :error-messages=\"errors.packing\"\n                          label=\"Packing\"\n                        ></v-text-field>\n                      </v-col>\n                      <v-col\n                        cols=\"12\"\n                        class=\"d-flex\"\n                      >\n                        <v-btn\n                          v-if=\"currentItem.unit_id && currentItem.packing\"\n                          color=\"primary\"\n                          class=\"me-3 mt-4\"\n                          @click=\"addItem\"\n                        >\n                          Submit\n                        </v-btn>\n                        <v-btn\n                          outlined\n                          class=\"me-3 mt-4\"\n                          type=\"reset\"\n                          @click.prevent=\"cancel\"\n                        >\n                          Cancel\n                        </v-btn>\n                      </v-col>\n                    </v-row>\n                  </v-form>\n                </v-card-text>\n              </v-card>\n            </v-dialog>\n          </v-toolbar>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon\n            small\n            @click=\"deleteItem(item)\"\n          >\n            {{ icons.mdiDeleteCircle }}\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport {\n  mdiAccountEdit,\n  mdiDeleteCircle,\n  mdiInformation,\n  mdiTextBoxPlus,\n} from '@mdi/js'\nimport {\n  computed, ref, toRef,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  name: 'UnitAndPackingForm',\n  props: {\n    disabled: {\n      type: Boolean,\n      required: false,\n      default: (() => false),\n    },\n    mode: {\n      type: String,\n      required: false,\n      default: (() => 'Create'),\n    },\n    existingUnits: {\n      type: Array,\n      required: true,\n      default: (() => []),\n    },\n    items: {\n      type: Array,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const isDisabled = toRef(props, 'disabled')\n    const productData = toRef(props, 'product')\n    const itemFormModal = ref(false)\n    const errors = computed(() => store.state.FinishProductStore.errors)\n    const formData = ref({})\n    const formTitle = ref('Add Unit and Packing')\n    const unitItems = toRef(props, 'existingUnits')\n\n    const unitsList = computed(() => store.state.UnitPackingStore.list)\n    const currentItem = ref({})\n\n    const units = ref([])\n\n    const addItem = () => {\n      const exist = unitItems.value.find(rowItem => rowItem.id === currentItem.value.unit_id)\n\n      if (exist === undefined || exist === null) {\n        const unit = unitsList.value.find(item => currentItem.value.unit_id === item.id)\n\n        emit('addedUnitPacking', {\n          name: unit.name,\n          pivot: {\n            unit_packing_id: unit.id,\n            packing: currentItem.value.packing,\n          },\n          id: unit.id,\n        })\n      }\n\n      currentItem.value.packing = null\n      currentItem.value.unit_id = null\n      itemFormModal.value = false\n    }\n\n    const deleteItem = item => {\n      const indexItem = unitItems.value.findIndex(unitItem => unitItem.id === item.id)\n      unitItems.value.splice(indexItem, 1)\n      itemFormModal.value = false\n    }\n\n    const cancel = () => {\n      itemFormModal.value = false\n    }\n\n    return {\n      unitsList,\n      errors,\n      addItem,\n      cancel,\n      deleteItem,\n      isDisabled,\n      formTitle,\n      currentItem,\n      unitItems,\n      formData,\n      itemFormModal,\n      units,\n      headers: [\n        { text: 'ID', sortable: true, value: 'pivot.unit_packing_id' },\n        { text: 'Unit Name', sortable: true, value: 'name' },\n        { text: 'Packing', value: 'pivot.packing' },\n        { text: 'Actions', value: 'actions' },\n      ],\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n        mdiInformation,\n        mdiTextBoxPlus,\n      },\n    }\n  },\n}\n</script>\n\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n</style>\n"]}]}