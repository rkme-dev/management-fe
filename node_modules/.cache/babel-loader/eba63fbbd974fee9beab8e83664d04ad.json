{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales-orders/SalesOrderItems.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales-orders/SalesOrderItems.vue","mtime":1663830413552},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1662812531040},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1662812546066}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtZGlBY2NvdW50RWRpdCwgbWRpRGVsZXRlQ2lyY2xlLCBtZGlJbmZvcm1hdGlvbiwgbWRpVGV4dEJveFBsdXMgfSBmcm9tICdAbWRpL2pzJzsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiwgdG9SZWYsIHdhdGNoIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2FsZU9yZGVySXRlbXMnLAogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gJ0NyZWF0ZSc7CiAgICAgIH0KICAgIH0sCiAgICBpdGVtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIF9yZWYpIHsKICAgIHZhciBlbWl0ID0gX3JlZi5lbWl0OwogICAgc3RvcmUuZGlzcGF0Y2goJ1Byb2R1Y3RTdG9yZS9saXN0Jyk7CiAgICB2YXIgc2VhcmNoID0gcmVmKCk7CiAgICB2YXIgbW9kZURhdGEgPSB0b1JlZihwcm9wcywgJ21vZGUnKTsKICAgIHZhciBpdGVtRm9ybU1vZGFsID0gcmVmKGZhbHNlKTsKICAgIHZhciBmb3JtRGF0YSA9IHJlZih7fSk7CiAgICB2YXIgZm9ybVRpdGxlID0gcmVmKCdBZGQgSXRlbScpOwogICAgdmFyIG9yZGVySXRlbXMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5TYWxlc09yZGVyU3RvcmUuaXRlbXM7CiAgICB9KTsKICAgIHZhciBwcm9kdWN0cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLlByb2R1Y3RTdG9yZS5saXN0OwogICAgfSk7CiAgICB2YXIgc2VsZWN0ZWRPcmRlckl0ZW1zID0gcmVmKFtdKTsKICAgIHZhciBjdXJyZW50SXRlbSA9IHJlZih7CiAgICAgIHByb2R1Y3RfaWQ6IG51bGwsCiAgICAgIHF1YW50aXR5OiBudWxsLAogICAgICBwcmljZTogbnVsbCwKICAgICAgdG90YWxfYW1vdW50OiAwLAogICAgICB1bml0OiBudWxsLAogICAgICBuYW1lOiBudWxsLAogICAgICBza3U6IG51bGwsCiAgICAgIHNsdWc6IG51bGwKICAgIH0pOwogICAgdmFyIHByb2R1Y3QgPSByZWYoewogICAgICBuYW1lOiBudWxsLAogICAgICBzbHVnOiBudWxsLAogICAgICBza3U6IG51bGwKICAgIH0pOwogICAgdmFyIHNhbGVzT3JkZXJUb3RhbEFtb3VudCA9IHJlZigwKTsKICAgIHZhciBvcmRlckl0ZW1JZHMgPSByZWYoW10pOwoKICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0VkaXQnKSB7CiAgICAgIG9yZGVySXRlbXMudmFsdWUgPSB0b1JlZihwcm9wcywgJ2l0ZW1zJyk7CiAgICB9CgogICAgd2F0Y2goc2VsZWN0ZWRPcmRlckl0ZW1zLCBmdW5jdGlvbiAoKSB7CiAgICAgIHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSA9IDA7CgogICAgICBpZiAoc2VsZWN0ZWRPcmRlckl0ZW1zLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICBzZWxlY3RlZE9yZGVySXRlbXMudmFsdWUuZm9yRWFjaChmdW5jdGlvbiAob3JkZXJJdGVtKSB7CiAgICAgICAgICBvcmRlckl0ZW1JZHMudmFsdWUucHVzaChvcmRlckl0ZW0ub3JkZXJfaXRlbV9pZCk7CiAgICAgICAgICBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUgPSBwYXJzZUZsb2F0KHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSkgKyBwYXJzZUZsb2F0KG9yZGVySXRlbS50b3RhbF9hbW91bnQpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBlbWl0KCd0b3RhbEFtb3VudCcsIHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSk7CiAgICAgIGVtaXQoJ29yZGVySXRlbUlkcycsIG9yZGVySXRlbUlkcy52YWx1ZSk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogc2VhcmNoLAogICAgICBzZWxlY3RlZE9yZGVySXRlbXM6IHNlbGVjdGVkT3JkZXJJdGVtcywKICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50OiBzYWxlc09yZGVyVG90YWxBbW91bnQsCiAgICAgIGZvcm1UaXRsZTogZm9ybVRpdGxlLAogICAgICBjdXJyZW50SXRlbTogY3VycmVudEl0ZW0sCiAgICAgIG9yZGVySXRlbXM6IG9yZGVySXRlbXMsCiAgICAgIGZvcm1EYXRhOiBmb3JtRGF0YSwKICAgICAgaXRlbUZvcm1Nb2RhbDogaXRlbUZvcm1Nb2RhbCwKICAgICAgcHJvZHVjdHM6IHByb2R1Y3RzLAogICAgICBoZWFkZXJzOiBbewogICAgICAgIHRleHQ6ICdEYXRlJywKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogJ2RhdGVfcG9zdGVkJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1NPIE5vJywKICAgICAgICB2YWx1ZTogJ3NhbGVzX29yZGVyX251bWJlcicsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdQcm9kdWN0IE5hbWUnLAogICAgICAgIHZhbHVlOiAncHJvZHVjdF9uYW1lJywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1F1YW50aXR5JywKICAgICAgICB2YWx1ZTogJ3F1YW50aXR5JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1VuaXQnLAogICAgICAgIHZhbHVlOiAndW5pdCcsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdQcmljZScsCiAgICAgICAgdmFsdWU6ICdwcmljZScsCiAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdBbW91bnQnLAogICAgICAgIHZhbHVlOiAndG90YWxfYW1vdW50JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9XSwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlBY2NvdW50RWRpdDogbWRpQWNjb3VudEVkaXQsCiAgICAgICAgbWRpRGVsZXRlQ2lyY2xlOiBtZGlEZWxldGVDaXJjbGUsCiAgICAgICAgbWRpSW5mb3JtYXRpb246IG1kaUluZm9ybWF0aW9uLAogICAgICAgIG1kaVRleHRCb3hQbHVzOiBtZGlUZXh0Qm94UGx1cwogICAgICB9CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA,SACAA,cADA,EAEAC,eAFA,EAGAC,cAHA,EAIAC,cAJA,QAKA,SALA;AAMA,SACAC,QADA,EACAC,GADA,EACAC,KADA,EACAC,KADA,QAEA,sBAFA;AAGA;AAEA;EACAC,sBADA;EAEAC;IACAC;MACAC,YADA;MAEAC,eAFA;MAGAC;QAAA;MAAA;IAHA,CADA;IAMAC;MACAH,WADA;MAEAC,eAFA;MAGAC;IAHA;EANA,CAFA;EAcAE,KAdA,iBAcAN,KAdA,QAcA;IAAA;IACAO;IACA;IACA;IACA;IACA;IACA;IACA;MAAA;IAAA;IACA;MAAA;IAAA;IACA;IACA;MACAC,gBADA;MAEAC,cAFA;MAGAC,WAHA;MAIAC,eAJA;MAKAC,UALA;MAMAb,UANA;MAOAc,SAPA;MAQAC;IARA;IAUA;MACAf,UADA;MAEAe,UAFA;MAGAD;IAHA;IAKA;IACA;;IAEA;MACAE;IACA;;IAEAjB;MACAkB;;MAEA;QACAC;UACAC;UACAF;QACA,CAHA;MAIA;;MAEAG;MACAA;IACA,CAZA;IAcA;MACAC,cADA;MAEAH,sCAFA;MAGAD,4CAHA;MAIAK,oBAJA;MAKAC,wBALA;MAMAP,sBANA;MAOAQ,kBAPA;MAQAC,4BARA;MASAC,kBATA;MAUAC,UACA;QAAAC;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAF;QAAAE;QAAAD;MAAA,CAFA,EAGA;QAAAD;QAAAE;QAAAD;MAAA,CAHA,EAIA;QAAAD;QAAAE;QAAAD;MAAA,CAJA,EAKA;QAAAD;QAAAE;QAAAD;MAAA,CALA,EAMA;QAAAD;QAAAE;QAAAD;MAAA,CANA,EAOA;QAAAD;QAAAE;QAAAD;MAAA,CAPA,CAVA;MAmBAE;QACAvC,8BADA;QAEAC,gCAFA;QAGAC,8BAHA;QAIAC;MAJA;IAnBA;EA0BA;AAtFA","names":["mdiAccountEdit","mdiDeleteCircle","mdiInformation","mdiTextBoxPlus","computed","ref","toRef","watch","name","props","mode","type","required","default","items","setup","store","product_id","quantity","price","total_amount","unit","sku","slug","orderItems","salesOrderTotalAmount","selectedOrderItems","orderItemIds","emit","search","formTitle","currentItem","formData","itemFormModal","products","headers","text","sortable","value","icons"],"sourceRoot":"src/views/pages/sales-orders","sources":["SalesOrderItems.vue"],"sourcesContent":["<template>\n  <v-row class=\"\">\n    <v-col cols=\"12\">\n      <v-alert\n        color=\"success\"\n        text\n        style=\"margin-bottom: -30px\"\n      >\n        <div class=\"d-flex align-start\">\n          <v-icon color=\"success\">\n            {{ icons.mdiInformation }}\n          </v-icon>\n          <div class=\"ms-3\">\n            <p class=\"text-base font-weight-medium mb-1\">\n              Sales Order Items\n            </p>\n          </div>\n        </div>\n      </v-alert>\n    </v-col>\n    <v-col\n      class=\"\"\n      cols=\"12\"\n    >\n      <v-data-table\n        v-model=\"selectedOrderItems\"\n        :headers=\"headers\"\n        :items=\"orderItems\"\n        :items-per-page=\"5\"\n        :search=\"search\"\n        item-key=\"order_item_id\"\n        show-select\n      >\n        <template v-slot:top>\n          <v-toolbar\n            flat\n          >\n            <v-card-text>\n              <v-row class=\"mt-10\">\n                <v-col\n                  cols=\"4\"\n                >\n                  <v-text-field\n                    v-model=\"search\"\n                    :append-icon=\"icons.mdiMagnify\"\n                    label=\"Search\"\n                    single-line\n                    hide-details\n                  ></v-text-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                >\n                </v-col>\n                <v-col\n                  class=\"\"\n                  cols=\"4\"\n                >\n                  <v-currency-field\n                    v-model=\"salesOrderTotalAmount\"\n                    outlined\n                    class=\"text-green\"\n                    disabled\n                    dense\n                    hide-details=\"auto\"\n                    label=\"Sales Order Total Amount\"\n                  ></v-currency-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                  offset-md=\"4\"\n                >\n                </v-col>\n              </v-row>\n            </v-card-text>\n          </v-toolbar>\n        </template>\n        <template #[`item.total_amount`]=\"{item}\">\n          <div class=\"d-flex justify-center text-green text--primary\">\n            <span class=\"text-green\">{{ item.total_amount }}</span>\n          </div>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon\n            small\n            @click=\"deleteItem(item)\"\n          >\n            {{ icons.mdiDeleteCircle }}\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport {\n  mdiAccountEdit,\n  mdiDeleteCircle,\n  mdiInformation,\n  mdiTextBoxPlus,\n} from '@mdi/js'\nimport {\n  computed, ref, toRef, watch,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  name: 'SaleOrderItems',\n  props: {\n    mode: {\n      type: String,\n      required: false,\n      default: (() => 'Create'),\n    },\n    items: {\n      type: Array,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('ProductStore/list')\n    const search = ref()\n    const modeData = toRef(props, 'mode')\n    const itemFormModal = ref(false)\n    const formData = ref({})\n    const formTitle = ref('Add Item')\n    const orderItems = computed(() => store.state.SalesOrderStore.items)\n    const products = computed(() => store.state.ProductStore.list)\n    const selectedOrderItems = ref([])\n    const currentItem = ref({\n      product_id: null,\n      quantity: null,\n      price: null,\n      total_amount: 0,\n      unit: null,\n      name: null,\n      sku: null,\n      slug: null,\n    })\n    const product = ref({\n      name: null,\n      slug: null,\n      sku: null,\n    })\n    const salesOrderTotalAmount = ref(0)\n    const orderItemIds = ref([])\n\n    if (modeData.value === 'Edit') {\n      orderItems.value = toRef(props, 'items')\n    }\n\n    watch(selectedOrderItems, () => {\n      salesOrderTotalAmount.value = 0\n\n      if (selectedOrderItems.value.length > 0) {\n        selectedOrderItems.value.forEach(orderItem => {\n          orderItemIds.value.push(orderItem.order_item_id)\n          salesOrderTotalAmount.value = parseFloat(salesOrderTotalAmount.value) + parseFloat(orderItem.total_amount)\n        })\n      }\n\n      emit('totalAmount', salesOrderTotalAmount.value)\n      emit('orderItemIds', orderItemIds.value)\n    })\n\n    return {\n      search,\n      selectedOrderItems,\n      salesOrderTotalAmount,\n      formTitle,\n      currentItem,\n      orderItems,\n      formData,\n      itemFormModal,\n      products,\n      headers: [\n        { text: 'Date', sortable: true, value: 'date_posted' },\n        { text: 'SO No', value: 'sales_order_number', sortable: true },\n        { text: 'Product Name', value: 'product_name', sortable: true },\n        { text: 'Quantity', value: 'quantity', sortable: true },\n        { text: 'Unit', value: 'unit', sortable: true },\n        { text: 'Price', value: 'price', sortable: true },\n        { text: 'Amount', value: 'total_amount', sortable: true },\n      ],\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n        mdiInformation,\n        mdiTextBoxPlus,\n      },\n    }\n  },\n}\n</script>\n\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n</style>\n"]}]}