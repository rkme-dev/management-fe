{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js!/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","mtime":1655197913795},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1654585219618},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js","mtime":1650363913040},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvbWFyay9wcm9qZWN0cy9lbmNvLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKdmFyIEF1dGhlbnRpY2F0aW9uU2VydmljZSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gQXV0aGVudGljYXRpb25TZXJ2aWNlKCkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoZW50aWNhdGlvblNlcnZpY2UpOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImF1dGhIZWFkZXIiLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CgogICAgaWYgKHVzZXIgIT09IG51bGwgJiYgdXNlciAhPT0gdm9pZCAwICYmIHVzZXIuYWNjZXNzVG9rZW4pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHVzZXIuYWNjZXNzVG9rZW4pCiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIHt9OwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxvZ2luIiwgZnVuY3Rpb24gKHVzZXIpIHsKICAgIHJldHVybiBheGlvcy5wb3N0KCdsb2dpbicsIHsKICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICByZXNwb25zZS5kYXRhLmFjY2Vzc1Rva2VuID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW47IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgoKICAgICAgICByZXNwb25zZS5kYXRhLnJlZnJlc2hUb2tlbiA9IHJlc3BvbnNlLmRhdGEucmVmcmVzaF90b2tlbjsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsb2dvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwogIH0pOwp9KTsKCmV4cG9ydCB7IEF1dGhlbnRpY2F0aW9uU2VydmljZSBhcyBkZWZhdWx0IH07"},{"version":3,"names":["axios","AuthenticationService","user","JSON","parse","localStorage","getItem","accessToken","Authorization","post","email","password","then","response","data","access_token","refreshToken","refresh_token","setItem","stringify","removeItem"],"sources":["/Users/mark/projects/enco-fe/src/service/AuthenticationService.js"],"sourcesContent":["import axios from 'axios'\n\nexport default class AuthenticationService {\n  authHeader = () => {\n    const user = JSON.parse(localStorage.getItem('user'))\n\n    if (user?.accessToken) {\n      return { Authorization: `Bearer ${user.accessToken}` }\n    }\n\n    return {}\n  }\n\n  login = user => axios\n    .post('login', {\n      email: user.email,\n      password: user.password,\n    })\n    .then(response => {\n      if (response.data.access_token) {\n        // eslint-disable-next-line no-param-reassign\n        response.data.accessToken = response.data.access_token\n        // eslint-disable-next-line no-param-reassign\n        response.data.refreshToken = response.data.refresh_token\n\n        localStorage.setItem('user', JSON.stringify(response.data))\n      }\n\n      return response.data\n    })\n\n  logout = () => {\n    localStorage.removeItem('user')\n  }\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;IAEqBC,qB;;;sCACN,YAAM;IACjB,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;IAEA,IAAIJ,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEK,WAAV,EAAuB;MACrB,OAAO;QAAEC,aAAa,mBAAYN,IAAI,CAACK,WAAjB;MAAf,CAAP;IACD;;IAED,OAAO,EAAP;EACD,C;;iCAEO,UAAAL,IAAI;IAAA,OAAIF,KAAK,CAClBS,IADa,CACR,OADQ,EACC;MACbC,KAAK,EAAER,IAAI,CAACQ,KADC;MAEbC,QAAQ,EAAET,IAAI,CAACS;IAFF,CADD,EAKbC,IALa,CAKR,UAAAC,QAAQ,EAAI;MAChB,IAAIA,QAAQ,CAACC,IAAT,CAAcC,YAAlB,EAAgC;QAC9B;QACAF,QAAQ,CAACC,IAAT,CAAcP,WAAd,GAA4BM,QAAQ,CAACC,IAAT,CAAcC,YAA1C,CAF8B,CAG9B;;QACAF,QAAQ,CAACC,IAAT,CAAcE,YAAd,GAA6BH,QAAQ,CAACC,IAAT,CAAcG,aAA3C;QAEAZ,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeN,QAAQ,CAACC,IAAxB,CAA7B;MACD;;MAED,OAAOD,QAAQ,CAACC,IAAhB;IACD,CAhBa,CAAJ;EAAA,C;;kCAkBH,YAAM;IACbT,YAAY,CAACe,UAAb,CAAwB,MAAxB;EACD,C;;;SA/BkBnB,qB"}]}