{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/src/store/AuthStore.js","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/store/AuthStore.js","mtime":1661511421817},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBBdXRoZW50aWNhdGlvblNlcnZpY2UgZnJvbSAnLi4vc2VydmljZS9BdXRoZW50aWNhdGlvblNlcnZpY2UnOwp2YXIgYXV0aGVudGljYXRpb25TZXJ2aWNlID0gbmV3IEF1dGhlbnRpY2F0aW9uU2VydmljZSgpOwp2YXIgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CnZhciBpbml0aWFsU3RhdGUgPSB1c2VyID8gewogIHN0YXR1czogewogICAgbG9nZ2VkSW46IHRydWUKICB9LAogIHVzZXI6IHVzZXIKfSA6IHsKICBzdGF0dXM6IHsKICAgIGxvZ2dlZEluOiBmYWxzZQogIH0sCiAgdXNlcjogbnVsbAp9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydAoKZXhwb3J0IHZhciBBdXRoU3RvcmUgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogaW5pdGlhbFN0YXRlLAogIGdldHRlcnM6IHsKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlci51c2VyOwogICAgfSwKICAgIGhhc0FiaWxpdHk6IGZ1bmN0aW9uIGhhc0FiaWxpdHkoc3RhdGUpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgdmFyIGFsbCA9IHN0YXRlLnVzZXIuYWJpbGl0eV9uYW1lcy5maW5kKGZ1bmN0aW9uIChhYmlsaXR5KSB7CiAgICAgICAgICByZXR1cm4gYWJpbGl0eSA9PT0gJyonOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoYWxsKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHZhciByZXN1bHQgPSBzdGF0ZS51c2VyLmFiaWxpdHlfbmFtZXMuZmluZChmdW5jdGlvbiAoYWJpbGl0eSkgewogICAgICAgICAgcmV0dXJuIGFiaWxpdHkgPT09IG5hbWU7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuICEhcmVzdWx0OwogICAgICB9OwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gYXV0aGVudGljYXRpb25TZXJ2aWNlLmxvZ2luKHVzZXIpLnRoZW4oIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3cKICAgICAgZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICBjb21taXQoJ2xvZ2luU3VjY2VzcycsIHVzZXIpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXNlcik7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbW1pdCgnbG9naW5GYWlsdXJlJyk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaFRva2VuOiBmdW5jdGlvbiByZWZyZXNoVG9rZW4oX3JlZjIsIGFjY2Vzc1Rva2VuKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGNvbW1pdCgncmVmcmVzaFRva2VuJywgYWNjZXNzVG9rZW4pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGF1dGhlbnRpY2F0aW9uU2VydmljZS5sb2dvdXQoKTsKICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgIH0gLy8gcmVnaXN0ZXIoeyBjb21taXQgfSwgdXNlcikgewogICAgLy8gICAgIHJldHVybiBBdXRoU2VydmljZS5yZWdpc3Rlcih1c2VyKS50aGVuKAogICAgLy8gICAgICAgICByZXNwb25zZSA9PiB7CiAgICAvLyAgICAgICAgICAgICBjb21taXQoJ3JlZ2lzdGVyU3VjY2VzcycpOwogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICAgIC8vICAgICAgICAgfSwKICAgIC8vICAgICAgICAgZXJyb3IgPT4gewogICAgLy8gICAgICAgICAgICAgY29tbWl0KCdyZWdpc3RlckZhaWx1cmUnKTsKICAgIC8vICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICApOwogICAgLy8gfQoKICB9LAogIG11dGF0aW9uczogewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvdwogICAgaGFzQWJpbGl0eTogZnVuY3Rpb24gaGFzQWJpbGl0eShzdGF0ZSwgbmFtZSkgewogICAgICB2YXIgYWJpbGl0eSA9IHN0YXRlLnVzZXIuYWJpbGl0eV9uYW1lcy5maW5kKGZ1bmN0aW9uIChhYmlsaXR5KSB7CiAgICAgICAgcmV0dXJuIGFiaWxpdHkubmFtZSA9PT0gbmFtZTsKICAgICAgfSk7CiAgICAgIHJldHVybiBhYmlsaXR5ICE9PSB1bmRlZmluZWQ7CiAgICB9LAogICAgbG9naW5TdWNjZXNzOiBmdW5jdGlvbiBsb2dpblN1Y2Nlc3Moc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgc3RhdGUudXNlciA9IHVzZXI7CiAgICB9LAogICAgbG9naW5GYWlsdXJlOiBmdW5jdGlvbiBsb2dpbkZhaWx1cmUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXIgPSBudWxsOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cy5sb2dnZWRJbiA9IGZhbHNlOwogICAgICBzdGF0ZS51c2VyID0gbnVsbDsKICAgIH0sCiAgICByZWZyZXNoVG9rZW46IGZ1bmN0aW9uIHJlZnJlc2hUb2tlbihzdGF0ZSwgYWNjZXNzVG9rZW4pIHsKICAgICAgc3RhdGUuc3RhdHVzLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgc3RhdGUudXNlciA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUudXNlciksIHt9LCB7CiAgICAgICAgYWNjZXNzX3Rva2VuOiBhY2Nlc3NUb2tlbgogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlclN1Y2Nlc3M6IGZ1bmN0aW9uIHJlZ2lzdGVyU3VjY2VzcyhzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMubG9nZ2VkSW4gPSBmYWxzZTsKICAgIH0sCiAgICByZWdpc3RlckZhaWx1cmU6IGZ1bmN0aW9uIHJlZ2lzdGVyRmFpbHVyZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMubG9nZ2VkSW4gPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"names":["AuthenticationService","authenticationService","user","JSON","parse","localStorage","getItem","initialState","status","loggedIn","AuthStore","namespaced","state","getters","currentUser","hasAbility","name","all","ability_names","find","ability","result","actions","login","commit","then","Promise","resolve","error","reject","catch","response","refreshToken","accessToken","logout","mutations","undefined","loginSuccess","loginFailure","access_token","registerSuccess","registerFailure"],"sources":["/Users/mark/projects/enco-fe/src/store/AuthStore.js"],"sourcesContent":["import AuthenticationService from '../service/AuthenticationService'\n\nconst authenticationService = new AuthenticationService()\n\nconst user = JSON.parse(localStorage.getItem('user'))\n\nconst initialState = user\n  ? { status: { loggedIn: true }, user }\n  : { status: { loggedIn: false }, user: null }\n\n// eslint-disable-next-line import/prefer-default-export\nexport const AuthStore = {\n  namespaced: true,\n  state: initialState,\n  getters: {\n    currentUser: state => state.user.user,\n    hasAbility: state => name => {\n      const all = state.user.ability_names.find(ability => ability === '*')\n\n      if (all) {\n        return true\n      }\n\n      const result = state.user.ability_names.find(ability => ability === name)\n\n      return !!result\n    },\n  },\n  actions: {\n    login({ commit }, user) {\n      return authenticationService.login(user)\n        .then(\n          // eslint-disable-next-line no-shadow\n          user => {\n            commit('loginSuccess', user)\n\n            return Promise.resolve(user)\n          },\n          error => {\n            commit('loginFailure')\n\n            return Promise.reject(error)\n          },\n        ).catch(error => Promise.reject(error.response))\n    },\n    refreshToken({ commit }, accessToken) {\n      commit('refreshToken', accessToken)\n    },\n    logout({ commit }) {\n      authenticationService.logout()\n      commit('logout')\n    },\n\n    // register({ commit }, user) {\n    //     return AuthService.register(user).then(\n    //         response => {\n    //             commit('registerSuccess');\n    //             return Promise.resolve(response.data);\n    //         },\n    //         error => {\n    //             commit('registerFailure');\n    //             return Promise.reject(error);\n    //         }\n    //     );\n    // }\n  },\n  mutations: {\n    // eslint-disable-next-line no-shadow\n    hasAbility(state, name) {\n      const ability = state.user.ability_names.find(ability => ability.name === name)\n\n      return ability !== undefined\n    },\n    loginSuccess(state, user) {\n      state.status.loggedIn = true\n      state.user = user\n    },\n    loginFailure(state) {\n      state.status.loggedIn = false\n      state.user = null\n    },\n    logout(state) {\n      state.status.loggedIn = false\n      state.user = null\n    },\n    refreshToken(state, accessToken) {\n      state.status.loggedIn = true\n      state.user = { ...state.user, access_token: accessToken }\n    },\n    registerSuccess(state) {\n      state.status.loggedIn = false\n    },\n    registerFailure(state) {\n      state.status.loggedIn = false\n    },\n  },\n}\n"],"mappings":"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"}]}