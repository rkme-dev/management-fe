{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/user-access-management/users/UserForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/user-access-management/users/UserForm.vue","mtime":1656081203516},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vcmVnZW5lcmF0b3JSdW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyB3YXRjaCwgb25Nb3VudGVkLCByZWYsIHRvUmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGkvZGlzdC92dWUtY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHsgbWRpQWNjb3VudE91dGxpbmUsIG1kaUNlbGxwaG9uZSwgbWRpRW1haWxPdXRsaW5lLCBtZGlMb2NrT3V0bGluZSB9IGZyb20gJ0BtZGkvanMnOwppbXBvcnQgVXNlckFjY2Vzc01hbmFnZW1lbnRTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9Vc2VyQWNjZXNzTWFuYWdlbWVudFNlcnZpY2UnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcm9sZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdDsKICAgIHZhciBzZXJ2aWNlID0gbmV3IFVzZXJBY2Nlc3NNYW5hZ2VtZW50U2VydmljZSgpOwogICAgdmFyIHJvbGVEYXRhID0gdG9SZWYocHJvcHMsICdyb2xlJyk7CiAgICB2YXIgYWJpbGl0aWVzT3B0aW9ucyA9IHJlZihbXSk7CiAgICB2YXIgYWJpbGl0aWVzU2VsZWN0ZWQgPSByZWYoW10pOwogICAgd2F0Y2gocm9sZURhdGEsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBhYmlsaXRpZXNTZWxlY3RlZC52YWx1ZSA9IHZhbHVlLmFiaWxpdGllcy5tYXAoZnVuY3Rpb24gKGFiaWxpdHkpIHsKICAgICAgICByZXR1cm4gYWJpbGl0eS5pZDsKICAgICAgfSk7CiAgICB9KTsKICAgIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLmdldEFiaWxpdGllcyh0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgYWJpbGl0aWVzT3B0aW9ucy52YWx1ZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBhYmlsaXRpZXNTZWxlY3RlZC52YWx1ZSA9IHJvbGVEYXRhLnZhbHVlLmFiaWxpdGllcy5tYXAoZnVuY3Rpb24gKGFiaWxpdHkpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFiaWxpdHkuaWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkpOwoKICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGVtaXQoJ2NsaWNrZWQnLCBmYWxzZSk7CiAgICB9OwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdVc2VyQWNjZXNzTWFuYWdlbWVudFN0b3JlL3VwZGF0ZVJvbGUnLCB7CiAgICAgICAgaWQ6IHJvbGVEYXRhLnZhbHVlLmlkLAogICAgICAgIGFiaWxpdGllczogYWJpbGl0aWVzU2VsZWN0ZWQudmFsdWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ1VzZXJBY2Nlc3NNYW5hZ2VtZW50U3RvcmUvZ2V0Um9sZXMnKTsKICAgICAgICBlbWl0KCdjbGlja2VkJywgZmFsc2UpOwogICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQ6IGFiaWxpdGllc1NlbGVjdGVkLAogICAgICBhYmlsaXRpZXNPcHRpb25zOiBhYmlsaXRpZXNPcHRpb25zLAogICAgICBjYW5jZWw6IGNhbmNlbCwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlBY2NvdW50T3V0bGluZTogbWRpQWNjb3VudE91dGxpbmUsCiAgICAgICAgbWRpRW1haWxPdXRsaW5lOiBtZGlFbWFpbE91dGxpbmUsCiAgICAgICAgbWRpQ2VsbHBob25lOiBtZGlDZWxscGhvbmUsCiAgICAgICAgbWRpTG9ja091dGxpbmU6IG1kaUxvY2tPdXRsaW5lCiAgICAgIH0sCiAgICAgIHJvbGVEYXRhOiByb2xlRGF0YSwKICAgICAgc3VibWl0OiBzdWJtaXQKICAgIH07CiAgfSwKICBjb21wdXRlZDoge30sCiAgbWV0aG9kczoge30KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA,SACAA,KADA,EAEAC,SAFA,EAGAC,GAHA,EAIAC,KAJA,QAKA,+CALA;AAMA,SACAC,iBADA,EAEAC,YAFA,EAGAC,eAHA,EAIAC,cAJA,QAKA,SALA;AAMA;AACA;AAEA;EACAC;IACAC;MACAC,YADA;MAEAC,eAFA;MAGAC;IAHA;EADA,CADA;EAQAC,KARA,iBAQAL,KARA,QAQA;IAAA;IACA;IACA;IACA;IACA;IAEAR;MACAc;QAAA;MAAA;IACA,CAFA;IAIAb;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACAc,2BACAC,IADA,CACA;gBACAC;gBACAH;kBAAA;gBAAA;cACA,CAJA,CADA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;;IAQA;MACAI;IACA,CAFA;;IAIA;MACAC;QACAC,qBADA;QAEAC;MAFA,GAGAL,IAHA,CAIA;QACAG;QACAD;MACA,CAPA;IASA,CAVA;;IAYA;MACAJ,oCADA;MAEAG,kCAFA;MAGAK,cAHA;MAIAC;QACAnB,oCADA;QAEAE,gCAFA;QAGAD,0BAHA;QAIAE;MAJA,CAJA;MAUAiB,kBAVA;MAWAC;IAXA;EAaA,CAvDA;EAwDAC,YAxDA;EA0DAC;AA1DA","names":["watch","onMounted","ref","toRef","mdiAccountOutline","mdiCellphone","mdiEmailOutline","mdiLockOutline","props","role","type","required","default","setup","abilitiesSelected","service","then","abilitiesOptions","emit","store","id","abilities","cancel","icons","roleData","submit","computed","methods"],"sourceRoot":"src/views/pages/user-access-management/users","sources":["UserForm.vue"],"sourcesContent":["<template>\n  <v-form>\n    <v-row>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Role Name</label>\n      </v-col>\n\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"roleData.title\"\n          disabled\n          :prepend-inner-icon=\"icons.mdiAccountOutline\"\n          outlined\n          dense\n          placeholder=\"Role Name\"\n          hide-details\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Abilities</label>\n      </v-col>\n\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-treeview\n          v-model=\"abilitiesSelected\"\n          selectable\n          selected-color=\"primary\"\n          item-disabled=\"locked\"\n          item-key=\"id\"\n          item-text=\"name\"\n          item-children=\"abilities\"\n          :items=\"abilitiesOptions\"\n        ></v-treeview>\n      </v-col>\n      <v-col\n        offset-md=\"3\"\n        cols=\"12\"\n      >\n        <v-btn\n          color=\"primary\"\n          @click=\"submit\"\n        >\n          Submit\n        </v-btn>\n        <v-btn\n          type=\"reset\"\n          outlined\n          class=\"mx-2\"\n          @click=\"cancel\"\n        >\n          Cancel\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-form>\n</template>\n\n<script>\nimport {\n  watch,\n  onMounted,\n  ref,\n  toRef,\n} from '@vue/composition-api/dist/vue-composition-api'\nimport {\n  mdiAccountOutline,\n  mdiCellphone,\n  mdiEmailOutline,\n  mdiLockOutline,\n} from '@mdi/js'\nimport UserAccessManagementService from '@/service/UserAccessManagementService'\nimport store from '@/store'\n\nexport default {\n  props: {\n    role: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const service = new UserAccessManagementService()\n    const roleData = toRef(props, 'role')\n    const abilitiesOptions = ref([])\n    const abilitiesSelected = ref([])\n\n    watch(roleData, value => {\n      abilitiesSelected.value = value.abilities.map(ability => ability.id)\n    })\n\n    onMounted(async () => {\n      await service.getAbilities(true)\n        .then(response => {\n          abilitiesOptions.value = response.data\n          abilitiesSelected.value = roleData.value.abilities.map(ability => ability.id)\n        })\n    })\n\n    const cancel = () => {\n      emit('clicked', false)\n    }\n\n    const submit = () => {\n      store.dispatch('UserAccessManagementStore/updateRole', {\n        id: roleData.value.id,\n        abilities: abilitiesSelected.value,\n      }).then(\n        () => {\n          store.dispatch('UserAccessManagementStore/getRoles')\n          emit('clicked', false)\n        },\n      )\n    }\n\n    return {\n      abilitiesSelected,\n      abilitiesOptions,\n      cancel,\n      icons: {\n        mdiAccountOutline,\n        mdiEmailOutline,\n        mdiCellphone,\n        mdiLockOutline,\n      },\n      roleData,\n      submit,\n    }\n  },\n  computed: {\n  },\n  methods: {\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}