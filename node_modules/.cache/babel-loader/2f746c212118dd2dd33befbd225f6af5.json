{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js!/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/service/AuthenticationService.js","mtime":1655105323889},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1654585219618},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/thread-loader/dist/cjs.js","mtime":1650363913040},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvbWFyay9wcm9qZWN0cy9lbmNvLWZlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9tYXJrL3Byb2plY3RzL2VuY28tZmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKdmFyIEF1dGhlbnRpY2F0aW9uU2VydmljZSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gQXV0aGVudGljYXRpb25TZXJ2aWNlKCkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoZW50aWNhdGlvblNlcnZpY2UpOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImF1dGhIZWFkZXIiLCBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CgogICAgaWYgKHVzZXIgIT09IG51bGwgJiYgdXNlciAhPT0gdm9pZCAwICYmIHVzZXIuYWNjZXNzVG9rZW4pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHVzZXIuYWNjZXNzVG9rZW4pCiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIHt9OwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFkbWluTG9naW4iLCBmdW5jdGlvbiAodXNlcikgewogICAgcmV0dXJuIGF4aW9zLnBvc3QoJ2FkbWluLWxvZ2luJywgewogICAgICBlbWFpbDogdXNlci5lbWFpbCwKICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbikgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgIHJlc3BvbnNlLmRhdGEuYWNjZXNzVG9rZW4gPSByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCgogICAgICAgIHJlc3BvbnNlLmRhdGEucmVmcmVzaFRva2VuID0gcmVzcG9uc2UuZGF0YS5yZWZyZXNoX3Rva2VuOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxvZ291dCIsIGZ1bmN0aW9uICgpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgfSk7Cn0pOwoKZXhwb3J0IHsgQXV0aGVudGljYXRpb25TZXJ2aWNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"names":["axios","AuthenticationService","user","JSON","parse","localStorage","getItem","accessToken","Authorization","post","email","password","then","response","data","access_token","refreshToken","refresh_token","setItem","stringify","removeItem"],"sources":["/Users/mark/projects/enco-fe/src/service/AuthenticationService.js"],"sourcesContent":["import axios from 'axios'\n\nexport default class AuthenticationService {\n  authHeader = () => {\n    const user = JSON.parse(localStorage.getItem('user'))\n\n    if (user?.accessToken) {\n      return { Authorization: `Bearer ${user.accessToken}` }\n    }\n\n    return {}\n  }\n\n  adminLogin = user => axios\n    .post('admin-login', {\n      email: user.email,\n      password: user.password,\n    })\n    .then(response => {\n      if (response.data.access_token) {\n        // eslint-disable-next-line no-param-reassign\n        response.data.accessToken = response.data.access_token\n        // eslint-disable-next-line no-param-reassign\n        response.data.refreshToken = response.data.refresh_token\n\n        localStorage.setItem('user', JSON.stringify(response.data))\n      }\n\n      return response.data\n    })\n\n  logout = () => {\n    localStorage.removeItem('user')\n  }\n}\n"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;IAEqBC,qB;;;sCACN,YAAM;IACjB,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;IAEA,IAAIJ,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEK,WAAV,EAAuB;MACrB,OAAO;QAAEC,aAAa,mBAAYN,IAAI,CAACK,WAAjB;MAAf,CAAP;IACD;;IAED,OAAO,EAAP;EACD,C;;sCAEY,UAAAL,IAAI;IAAA,OAAIF,KAAK,CACvBS,IADkB,CACb,aADa,EACE;MACnBC,KAAK,EAAER,IAAI,CAACQ,KADO;MAEnBC,QAAQ,EAAET,IAAI,CAACS;IAFI,CADF,EAKlBC,IALkB,CAKb,UAAAC,QAAQ,EAAI;MAChB,IAAIA,QAAQ,CAACC,IAAT,CAAcC,YAAlB,EAAgC;QAC9B;QACAF,QAAQ,CAACC,IAAT,CAAcP,WAAd,GAA4BM,QAAQ,CAACC,IAAT,CAAcC,YAA1C,CAF8B,CAG9B;;QACAF,QAAQ,CAACC,IAAT,CAAcE,YAAd,GAA6BH,QAAQ,CAACC,IAAT,CAAcG,aAA3C;QAEAZ,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeN,QAAQ,CAACC,IAAxB,CAA7B;MACD;;MAED,OAAOD,QAAQ,CAACC,IAAhB;IACD,CAhBkB,CAAJ;EAAA,C;;kCAkBR,YAAM;IACbT,YAAY,CAACe,UAAb,CAAwB,MAAxB;EACD,C;;;SA/BkBnB,qB"}]}