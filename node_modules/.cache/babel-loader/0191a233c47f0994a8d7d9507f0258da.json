{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/orders/OrdersListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/orders/OrdersListTable.vue","mtime":1665914097299},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1kaUFjY291bnRFZGl0LCBtZGlEZWxldGVDaXJjbGUsIG1kaVByaW50ZXIgfSBmcm9tICdAbWRpL2pzJzsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgb25Nb3VudGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IGRhdGVGb3JtYXQxIH0gZnJvbSAnQC91dGlscy90aW1lJzsKaW1wb3J0IFNhbGVzT3JkZXJGb3JtIGZyb20gJy4vU2FsZXNPcmRlckZvcm0udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNhbGVzT3JkZXJGb3JtOiBTYWxlc09yZGVyRm9ybQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgc3RvcmUuZGlzcGF0Y2goJ0ZpbmlzaFByb2R1Y3RTdG9yZS9saXN0Jyk7CiAgICB2YXIgc2hvd1Bvc3RlZCA9IHJlZihmYWxzZSk7CiAgICB2YXIgbW9kZURhdGEgPSByZWYoJ0NyZWF0ZScpOwogICAgdmFyIHNhbGVzT3JkZXJEaWFsb2cgPSByZWYoZmFsc2UpOwogICAgdmFyIHNlYXJjaCA9IHJlZignJyk7CiAgICB2YXIgaGVhZGVycyA9IHJlZihbewogICAgICB0ZXh0OiAnRGF0ZScsCiAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgIHZhbHVlOiAnY3JlYXRlZF9hdCcKICAgIH0sIHsKICAgICAgdGV4dDogJ1NPIE5vJywKICAgICAgdmFsdWU6ICdzYWxlc19vcmRlcl9udW1iZXInCiAgICB9LCB7CiAgICAgIHRleHQ6ICdEb2N1bWVudCcsCiAgICAgIHZhbHVlOiAnZG9jdW1lbnQuZG9jdW1lbnRfbmFtZScKICAgIH0sIHsKICAgICAgdGV4dDogJ0N1c3RvbWVyJywKICAgICAgdmFsdWU6ICdjdXN0b21lci5uYW1lJwogICAgfSwgewogICAgICB0ZXh0OiAnQW1vdW50JywKICAgICAgdmFsdWU6ICdhbW91bnQnCiAgICB9LCB7CiAgICAgIHRleHQ6ICdTdGF0dXMnLAogICAgICB2YWx1ZTogJ3N0YXR1cycKICAgIH0sIHsKICAgICAgdGV4dDogJ0FjdGlvbnMnLAogICAgICB2YWx1ZTogJ2FjdGlvbnMnLAogICAgICBzb3J0YWJsZTogZmFsc2UKICAgIH1dKTsKICAgIHZhciBkZWZhdWx0SXRlbSA9IHJlZih7CiAgICAgIG5hbWU6ICcnLAogICAgICBjb250YWN0X3BlcnNvbjogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgdGluOiAnJywKICAgICAgY29udGFjdF9ubzogJycsCiAgICAgIGRlbGl2ZXJ5X2FkZHJlc3M6ICcnCiAgICB9KTsKICAgIHZhciBzYWxlc09yZGVyID0gcmVmKHsKICAgICAgZGF0ZU1vZGFsOiBmYWxzZSwKICAgICAgY3VzdG9tZXJfbmFtZTogbnVsbCwKICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsCiAgICAgIGRhdGVfcG9zdGVkOiBudWxsLAogICAgICBzYWxlc19vcmRlcl9udW1iZXI6IG51bGwsCiAgICAgIGRvY3VtZW50X2lkOiBudWxsLAogICAgICBhZGRyZXNzOiBudWxsLAogICAgICByZW1hcmtzOiBudWxsLAogICAgICBhcmVhOiBudWxsLAogICAgICBzYWxlc21hbl9pZF8xOiBudWxsLAogICAgICBzYWxlc21hbl9pZF8yOiBudWxsLAogICAgICB0ZXJtX2lkOiBudWxsLAogICAgICB2YXRfaWQ6IG51bGwKICAgIH0pOwogICAgdmFyIHNhbGVzT3JkZXJzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUuU2FsZXNPcmRlclN0b3JlLmxpc3QuZmlsdGVyKGZ1bmN0aW9uIChvcmRlcikgewogICAgICAgIGlmIChzaG93UG9zdGVkLnZhbHVlID09PSBmYWxzZSAmJiBvcmRlci5zdGF0dXMgIT09ICdQb3N0ZWQnKSB7CiAgICAgICAgICByZXR1cm4gb3JkZXI7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2hvd1Bvc3RlZC52YWx1ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgcmV0dXJuIG9yZGVyOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIHZhciBlcnJvcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmVycm9yczsKICAgIH0pOwogICAgdmFyIGxvYWRpbmcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5TYWxlc09yZGVyU3RvcmUubG9hZGluZzsKICAgIH0pOwoKICAgIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHsKICAgICAgc2FsZXNPcmRlckRpYWxvZy52YWx1ZSA9IGZhbHNlOwogICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNPcmRlclN0b3JlL2xpc3QnKTsKICAgIH07CgogICAgdmFyIGNyZWF0ZVNhbGVzT3JkZXIgPSBmdW5jdGlvbiBjcmVhdGVTYWxlc09yZGVyKCkgewogICAgICBtb2RlRGF0YS52YWx1ZSA9ICdDcmVhdGUnOwogICAgICBzYWxlc09yZGVyRGlhbG9nLnZhbHVlID0gdHJ1ZTsKICAgICAgc2FsZXNPcmRlci52YWx1ZSA9IHsKICAgICAgICBkYXRlTW9kYWw6IGZhbHNlLAogICAgICAgIGN1c3RvbWVyX25hbWU6IG51bGwsCiAgICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsCiAgICAgICAgZGF0ZV9wb3N0ZWQ6IG51bGwsCiAgICAgICAgc2FsZXNfb3JkZXJfbnVtYmVyOiBudWxsLAogICAgICAgIGRvY3VtZW50X2lkOiBudWxsLAogICAgICAgIGFkZHJlc3M6IG51bGwsCiAgICAgICAgcmVtYXJrczogbnVsbCwKICAgICAgICBhcmVhOiBudWxsLAogICAgICAgIHNhbGVzbWFuX2lkXzE6IG51bGwsCiAgICAgICAgc2FsZXNtYW5faWRfMjogbnVsbCwKICAgICAgICB0ZXJtX2lkOiBudWxsLAogICAgICAgIHZhdF9pZDogbnVsbAogICAgICB9OwogICAgfTsKCiAgICB2YXIgZWRpdEl0ZW0gPSBmdW5jdGlvbiBlZGl0SXRlbShpdGVtKSB7CiAgICAgIHNhbGVzT3JkZXIudmFsdWUgPSBpdGVtOwogICAgICBtb2RlRGF0YS52YWx1ZSA9ICdFZGl0JzsKICAgICAgc2FsZXNPcmRlckRpYWxvZy52YWx1ZSA9IHRydWU7CiAgICB9OwoKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGluaXRpYWxpemUoKTsKICAgIH0pOwoKICAgIHZhciByZWRpcmVjdFByaW50ID0gZnVuY3Rpb24gcmVkaXJlY3RQcmludChpZCkgewogICAgICB3aW5kb3cub3BlbigiaHR0cHM6Ly9lbmNvLWFwaS5oZXJva3VhcHAuY29tL3ByaW50LXNhbGVzLW9yZGVyLyIuY29uY2F0KGlkKSwgJ19ibGFuaycpOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBzaG93UG9zdGVkOiBzaG93UG9zdGVkLAogICAgICBlZGl0SXRlbTogZWRpdEl0ZW0sCiAgICAgIHNhbGVzT3JkZXI6IHNhbGVzT3JkZXIsCiAgICAgIGNyZWF0ZVNhbGVzT3JkZXI6IGNyZWF0ZVNhbGVzT3JkZXIsCiAgICAgIG1vZGVEYXRhOiBtb2RlRGF0YSwKICAgICAgc2FsZXNPcmRlckRpYWxvZzogc2FsZXNPcmRlckRpYWxvZywKICAgICAgbWRpQWNjb3VudEVkaXQ6IG1kaUFjY291bnRFZGl0LAogICAgICBtZGlEZWxldGVDaXJjbGU6IG1kaURlbGV0ZUNpcmNsZSwKICAgICAgbWRpUHJpbnRlcjogbWRpUHJpbnRlciwKICAgICAgZGVmYXVsdEl0ZW06IGRlZmF1bHRJdGVtLAogICAgICBoZWFkZXJzOiBoZWFkZXJzLAogICAgICBzZWFyY2g6IHNlYXJjaCwKICAgICAgc2FsZXNPcmRlcnM6IHNhbGVzT3JkZXJzLAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZSwKICAgICAgbG9hZGluZzogbG9hZGluZywKICAgICAgZGF0ZUZvcm1hdDE6IGRhdGVGb3JtYXQxLAogICAgICBpY29uczogewogICAgICAgIG1kaUFjY291bnRFZGl0OiBtZGlBY2NvdW50RWRpdCwKICAgICAgICBtZGlEZWxldGVDaXJjbGU6IG1kaURlbGV0ZUNpcmNsZQogICAgICB9LAogICAgICByZWRpcmVjdFByaW50OiByZWRpcmVjdFByaW50CiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA,SACAA,GADA,EACAC,QADA,EACAC,SADA,QAEA,sBAFA;AAGA;AACA;AACA;AAEA;EACAC;IACAC;EADA,CADA;EAIAC,KAJA,mBAIA;IACAC;IACA;IACA;IACA;IACA;IACA,mBACA;MACAC,YADA;MAEAC,cAFA;MAGAC,eAHA;MAIAC;IAJA,CADA,EAOA;MAAAH;MAAAG;IAAA,CAPA,EAQA;MAAAH;MAAAG;IAAA,CARA,EASA;MAAAH;MAAAG;IAAA,CATA,EAUA;MAAAH;MAAAG;IAAA,CAVA,EAWA;MAAAH;MAAAG;IAAA,CAXA,EAYA;MAAAH;MAAAG;MAAAD;IAAA,CAZA;IAeA;MACAE,QADA;MAEAC,kBAFA;MAGAC,SAHA;MAIAC,OAJA;MAKAC,cALA;MAMAC;IANA;IAQA;MACAC,gBADA;MAEAC,mBAFA;MAGAC,iBAHA;MAIAC,iBAJA;MAKAC,wBALA;MAMAC,iBANA;MAOAC,aAPA;MAQAC,aARA;MASAC,UATA;MAUAC,mBAVA;MAWAC,mBAXA;MAYAC,aAZA;MAaAC;IAbA;IAgBA;MAAA;QACA;UACA;QACA;;QAEA;UACA;QACA;MACA,CARA;IAAA;IAUA;MAAA;IAAA;IACA;MAAA;IAAA;;IAEA;MACAC;MACAxB;IACA,CAHA;;IAKA;MACAyB;MACAD;MACAE;QACAf,gBADA;QAEAC,mBAFA;QAGAC,iBAHA;QAIAC,iBAJA;QAKAC,wBALA;QAMAC,iBANA;QAOAC,aAPA;QAQAC,aARA;QASAC,UATA;QAUAC,mBAVA;QAWAC,mBAXA;QAYAC,aAZA;QAaAC;MAbA;IAeA,CAlBA;;IAoBA;MACAG;MACAD;MACAD;IACA,CAJA;;IAMA5B;MACA+B;IACA,CAFA;;IAIA;MACAC;IACA,CAFA;;IAIA;MACAC,sBADA;MAEAC,kBAFA;MAGAJ,sBAHA;MAIAK,kCAJA;MAKAN,kBALA;MAMAD,kCANA;MAOAQ,8BAPA;MAQAC,gCARA;MASAC,sBATA;MAUAC,wBAVA;MAWAC,gBAXA;MAYAC,cAZA;MAaAC,wBAbA;MAcAC,cAdA;MAeAZ,sBAfA;MAgBAa,gBAhBA;MAiBAC,wBAjBA;MAkBAC;QACAV,8BADA;QAEAC;MAFA,CAlBA;MAsBAU;IAtBA;EAwBA;AA7HA","names":["ref","computed","onMounted","components","SalesOrderForm","setup","store","text","align","sortable","value","name","contact_person","email","tin","contact_no","delivery_address","dateModal","customer_name","customer_id","date_posted","sales_order_number","document_id","address","remarks","area","salesman_id_1","salesman_id_2","term_id","vat_id","salesOrderDialog","modeData","salesOrder","initialize","window","showPosted","editItem","createSalesOrder","mdiAccountEdit","mdiDeleteCircle","mdiPrinter","defaultItem","headers","search","salesOrders","errors","loading","dateFormat1","icons","redirectPrint"],"sourceRoot":"src/views/pages/sales/orders","sources":["OrdersListTable.vue"],"sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"salesOrders\"\n      sort-by=\"name\"\n      class=\"elevation-1\"\n      :search=\"search\"\n      :loading=\"loading\"\n    >\n      <template #item.created_at=\"{ item }\">\n        {{ dateFormat1(item.created_at) }}\n      </template>\n      <template #item.amount=\"{ item }\">\n        <v-currency-field\n          v-model=\"item.amount\"\n          prefix=\"PHP\"\n          class=\"text-green\"\n          disabled\n        >\n        </v-currency-field>\n      </template>\n      <template v-slot:top>\n        <v-toolbar\n          color=\"teal\"\n          outlined\n        >\n          <v-toolbar-title>Sales Orders</v-toolbar-title>\n          <v-divider\n            class=\"mx-4\"\n            inset\n            vertical\n          ></v-divider>\n          <v-spacer></v-spacer>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n            class=\"mr-16 mb-4\"\n          ></v-text-field>\n          <v-switch\n            v-model=\"showPosted\"\n            label=\"Display Posted\"\n            class=\"mb-n4 mr-16\"\n          ></v-switch>\n          <v-btn\n            color=\"primary\"\n            dark\n            class=\"mb-2 mr-10\"\n            @click=\"createSalesOrder\"\n          >\n            Add New Sales Order\n          </v-btn>\n          <v-dialog\n            v-model=\"salesOrderDialog\"\n            width=\"900px\"\n            fullscreen\n            max-width=\"900px\"\n            max-height=\"900px\"\n            height=\"500px\"\n            transition=\"dialog-bottom-transition\"\n          >\n            <sales-order-form\n              :mode=\"modeData\"\n              :data=\"salesOrder\"\n              @submit=\"initialize\"\n            ></sales-order-form>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon\n          medium\n          class=\"mr-2\"\n          @click=\"editItem(item)\"\n        >\n          {{ icons.mdiAccountEdit }}\n        </v-icon>\n        <v-icon\n          v-if=\"item.is_active === 'Active'\"\n          small\n          @click=\"deleteItem(item)\"\n        >\n          {{ icons.mdiDeleteCircle }}\n        </v-icon>\n        <v-icon\n          color=\"info\"\n          style=\"margin-left: 10px\"\n          medium\n          class=\"mr-2\"\n          @click=\"redirectPrint(item.id)\"\n        >\n          {{ mdiPrinter }}\n        </v-icon>\n      </template>\n      <template v-slot:no-data>\n        <v-btn\n          color=\"primary\"\n          @click=\"initialize\"\n        >\n          Reset\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport { mdiAccountEdit, mdiDeleteCircle, mdiPrinter } from '@mdi/js'\nimport {\n  ref, computed, onMounted,\n} from '@vue/composition-api'\nimport store from '@/store'\nimport { dateFormat1 } from '@/utils/time'\nimport SalesOrderForm from './SalesOrderForm.vue'\n\nexport default {\n  components: {\n    SalesOrderForm,\n  },\n  setup() {\n    store.dispatch('FinishProductStore/list')\n    const showPosted = ref(false)\n    const modeData = ref('Create')\n    const salesOrderDialog = ref(false)\n    const search = ref('')\n    const headers = ref([\n      {\n        text: 'Date',\n        align: 'start',\n        sortable: false,\n        value: 'created_at',\n      },\n      { text: 'SO No', value: 'sales_order_number' },\n      { text: 'Document', value: 'document.document_name' },\n      { text: 'Customer', value: 'customer.name' },\n      { text: 'Amount', value: 'amount' },\n      { text: 'Status', value: 'status' },\n      { text: 'Actions', value: 'actions', sortable: false },\n    ])\n\n    const defaultItem = ref({\n      name: '',\n      contact_person: '',\n      email: '',\n      tin: '',\n      contact_no: '',\n      delivery_address: '',\n    })\n    const salesOrder = ref({\n      dateModal: false,\n      customer_name: null,\n      customer_id: null,\n      date_posted: null,\n      sales_order_number: null,\n      document_id: null,\n      address: null,\n      remarks: null,\n      area: null,\n      salesman_id_1: null,\n      salesman_id_2: null,\n      term_id: null,\n      vat_id: null,\n    })\n\n    const salesOrders = computed(() => store.state.SalesOrderStore.list.filter(order => {\n      if (showPosted.value === false && order.status !== 'Posted') {\n        return order\n      }\n\n      if (showPosted.value === true) {\n        return order\n      }\n    }))\n\n    const errors = computed(() => store.getters.errors)\n    const loading = computed(() => store.state.SalesOrderStore.loading)\n\n    const initialize = () => {\n      salesOrderDialog.value = false\n      store.dispatch('SalesOrderStore/list')\n    }\n\n    const createSalesOrder = () => {\n      modeData.value = 'Create'\n      salesOrderDialog.value = true\n      salesOrder.value = {\n        dateModal: false,\n        customer_name: null,\n        customer_id: null,\n        date_posted: null,\n        sales_order_number: null,\n        document_id: null,\n        address: null,\n        remarks: null,\n        area: null,\n        salesman_id_1: null,\n        salesman_id_2: null,\n        term_id: null,\n        vat_id: null,\n      }\n    }\n\n    const editItem = item => {\n      salesOrder.value = item\n      modeData.value = 'Edit'\n      salesOrderDialog.value = true\n    }\n\n    onMounted(() => {\n      initialize()\n    })\n\n    const redirectPrint = id => {\n      window.open(`https://enco-api.herokuapp.com/print-sales-order/${id}`, '_blank')\n    }\n\n    return {\n      showPosted,\n      editItem,\n      salesOrder,\n      createSalesOrder,\n      modeData,\n      salesOrderDialog,\n      mdiAccountEdit,\n      mdiDeleteCircle,\n      mdiPrinter,\n      defaultItem,\n      headers,\n      search,\n      salesOrders,\n      errors,\n      initialize,\n      loading,\n      dateFormat1,\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n      },\n      redirectPrint,\n    }\n  },\n}\n</script>\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n\n</style>\n"]}]}