{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js!/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/component/PurchaseOrderAddSelector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/component/PurchaseOrderAddSelector.vue","mtime":1661667901199},{"path":"/Users/mark/projects/enco-fe/babel.config.js","mtime":1655991784146},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hcmsvcHJvamVjdHMvZW5jby1mZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHJlZiwgd2F0Y2gsIHJlYWN0aXZlLCBjb21wdXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpL2Rpc3QvdnVlLWNvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCB7IG1kaVBsdXMgfSBmcm9tICdAbWRpL2pzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpdGVtTnVtYmVyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHByb2R1Y3REcm9wZG93bjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgZm9ybVN1Ym1pdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdDsKICAgIHZhciBmb3JtU3VibWlzc2lvbiA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmZvcm1TdWJtaXQ7CiAgICB9KTsKICAgIHZhciBwcm9kdWN0ID0gcmVhY3RpdmUoewogICAgICBwcm9kdWN0X2lkOiBudWxsLAogICAgICBxdWFudGl0eTogbnVsbAogICAgfSk7CiAgICB2YXIgcHJvZHVjdFNlbGVjdGlvbiA9IHJlZihbXSk7CiAgICB2YXIgaXNEaXNhYmxlZCA9IHJlZih0cnVlKTsKICAgIHZhciBlcnJvcnMgPSByZWFjdGl2ZSh7CiAgICAgIHF1YW50aXR5OiAnJwogICAgfSk7CgogICAgdmFyIGhhbmRsZUlzTnVtYmVyID0gZnVuY3Rpb24gaGFuZGxlSXNOdW1iZXIoZXZ0KSB7CiAgICAgIGV2dCA9IGV2dCA/IGV2dCA6IHdpbmRvdy5ldmVudDsKICAgICAgdmFyIGNvZGUgPSBldnQud2hpY2ggPyBldnQud2hpY2ggOiBldnQua2V5Q29kZTsKCiAgICAgIGlmIChjb2RlID4gMzEgJiYgKGNvZGUgPCA0OCB8fCBjb2RlID4gNTcpICYmIGNvZGUgIT09IDQ2KSB7CiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH07IC8vIGRpc2FibGUgaXRlbSBpbiBkcm9wZG93bgoKCiAgICB2YXIgaGFuZGxlRGlzYWJsZWRJdGVtID0gZnVuY3Rpb24gaGFuZGxlRGlzYWJsZWRJdGVtKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0uZGlzYWJsZWQgPyB0cnVlIDogZmFsc2U7CiAgICB9OwoKICAgIHdhdGNoKHByb2R1Y3QsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHByb2R1Y3QucHJvZHVjdF9pZCAmJiBwcm9kdWN0LnF1YW50aXR5KSBpc0Rpc2FibGVkLnZhbHVlID0gZmFsc2U7ZWxzZSBpc0Rpc2FibGVkLnZhbHVlID0gdHJ1ZTsKICAgICAgZW1pdCgnc2VsZWN0ZWRQcm9kdWN0JywgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9kdWN0KSwge30sIHsKICAgICAgICBxdWFudGl0eTogTnVtYmVyKHByb2R1Y3QucXVhbnRpdHkpCiAgICAgIH0pLCBwcm9wcy5pdGVtTnVtYmVyKTsKICAgIH0pOwogICAgd2F0Y2goZm9ybVN1Ym1pc3Npb24sIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHRydWUpIHsKICAgICAgICBlcnJvcnMudmFsdWUgPSB7CiAgICAgICAgICBwcm9kdWN0OiBudWxsLAogICAgICAgICAgcXVhbnRpdHk6IG51bGwKICAgICAgICB9OwoKICAgICAgICBpZiAocHJvZHVjdC5wcm9kdWN0X2lkID09PSBudWxsKSB7CiAgICAgICAgICBlcnJvcnMucHJvZHVjdCA9ICdQbGVhc2Ugc2VsZWN0IGEgcHJvZHVjdC4nOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb2R1Y3QucXVhbnRpdHkgPT09IG51bGwpIHsKICAgICAgICAgIGVycm9ycy5xdWFudGl0eSA9ICdRdWFudGl0eSBpcyByZXF1aXJlZC4nOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgICBwcm9kdWN0U2VsZWN0aW9uOiBwcm9kdWN0U2VsZWN0aW9uLAogICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICBpY29uczogewogICAgICAgIG1kaVBsdXM6IG1kaVBsdXMKICAgICAgfSwKICAgICAgaGFuZGxlSXNOdW1iZXI6IGhhbmRsZUlzTnVtYmVyLAogICAgICBoYW5kbGVEaXNhYmxlZEl0ZW06IGhhbmRsZURpc2FibGVkSXRlbSwKICAgICAgZXJyb3JzOiBlcnJvcnMKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AAEA,SACAA,OADA,QAEA,SAFA;AAIA;EACAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,WADA;MAEAC;QAAA;MAAA;IAFA,CALA;IASAE;MACAH,aADA;MAEAC;IAFA;EATA,CADA;EAeAG,KAfA,iBAeAN,KAfA,QAeA;IAAA;IACA;MAAA;IAAA;IACA;MAAAO;MAAAC;IAAA;IACA;IACA;IACA;MAAAA;IAAA;;IAEA;MACAC;MACA;;MACA;QACAA;MACA,CAFA,MAEA;QACA;MACA;IACA,CARA,CAPA,CAiBA;;;IACA;MACA;IACA,CAFA;;IAKAC,MACAC,OADA,EAEA;MACA,0EACAC;MAEAC;QAAAL;MAAA;IACA,CAPA;IAUAE,MACAI,cADA,EAEA;MACA;QACAC;UAAAJ;UAAAH;QAAA;;QAEA;UACAO;QACA;;QAEA;UACAA;QACA;MACA;IACA,CAdA;IAiBA;MACAJ,gBADA;MAEAK,kCAFA;MAGAJ,sBAHA;MAIAK;QACAlB;MADA,CAJA;MAOAmB,8BAPA;MAQAC,sCARA;MASAJ;IATA;EAWA;AA5EA","names":["mdiPlus","props","itemNumber","type","default","productDropdown","formSubmit","setup","product_id","quantity","evt","watch","product","isDisabled","emit","formSubmission","errors","productSelection","icons","handleIsNumber","handleDisabledItem"],"sourceRoot":"src/views/pages/purchase-orders/component","sources":["PurchaseOrderAddSelector.vue"],"sourcesContent":["<template>\n  <v-card>\n    <v-row>\n      <v-col cols=\"7\">\n        <v-select\n          v-model=\"product.product_id\"\n          label=\"Select a Product\"\n          item-text=\"name\"\n          item-value=\"id\"\n          dense\n          :items=\"productDropdown\"\n          :item-disabled=\"handleDisabledItem\"\n          :error-messages=\"errors.product\"\n        ></v-select>\n      </v-col>\n\n      <v-col cols=\"4\">\n        <v-text-field\n          v-model=\"product.quantity\"\n          label=\"Quantity\"\n          hide-details=\"auto\"\n          dense\n          :error-messages=\"errors.quantity\"\n          @keypress=\"handleIsNumber\"\n        />\n      </v-col>\n\n      <v-col cols=\"1\">\n        <v-btn\n          class=\"mx-2\"\n          x-small\n          fab\n          :disabled=\"isDisabled\"\n          @click=\"$emit('addProductRow')\"\n        >\n          <v-icon dark>\n            {{ icons.mdiPlus }}\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-card>\n</template>\n\n<script>\nimport {ref, watch, reactive, computed} from '@vue/composition-api/dist/vue-composition-api'\n\nimport {\n  mdiPlus\n} from '@mdi/js'\n\nexport default {\n  props: {\n    itemNumber: {\n      type: Number,\n      default: 0,\n    },\n    productDropdown: {\n      type: Array,\n      default: () => [],\n    },\n    formSubmit: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props, {emit}) {\n    const formSubmission = computed(() => props.formSubmit)\n    const product = reactive({product_id: null, quantity: null})\n    const productSelection = ref([])\n    const isDisabled = ref(true)\n    const errors = reactive({quantity: ''})\n\n    const handleIsNumber = (evt) => {\n      evt = (evt) ? evt : window.event;\n      const code = (evt.which) ? evt.which : evt.keyCode;\n      if ((code > 31 && (code < 48 || code > 57)) && code !== 46) {\n        evt.preventDefault()\n      } else {\n        return true\n      }\n    }\n\n    // disable item in dropdown\n    const handleDisabledItem = item => {\n      return item.disabled ? true : false\n    }\n\n\n    watch(\n      product,\n      () => {\n        if (product.product_id && product.quantity) isDisabled.value = false\n        else isDisabled.value = true\n\n        emit('selectedProduct', {...product, quantity: Number(product.quantity)}, props.itemNumber)\n      },\n    )\n\n    watch(\n      formSubmission,\n      value => {\n        if (value === true) {\n          errors.value = {product: null, quantity: null}\n\n          if (product.product_id === null) {\n            errors.product = 'Please select a product.'\n          }\n\n          if (product.quantity === null) {\n            errors.quantity = 'Quantity is required.'\n          }\n        }\n      },\n    )\n\n    return {\n      product,\n      productSelection,\n      isDisabled,\n      icons: {\n        mdiPlus,\n      },\n      handleIsNumber,\n      handleDisabledItem,\n      errors,\n    }\n  }\n}\n</script>\n"]}]}