{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/collections/CollectionForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/collections/CollectionForm.vue","mtime":1665740742911},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgY29tcHV0ZWQsIG9uVW5tb3VudGVkLCByZWYsIHRvUmVmLCB3YXRjaCwKfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScKaW1wb3J0IHsKICBtZGlBY2NvdW50UGx1c091dGxpbmUsIG1kaUNhcmRPZmYsIG1kaUN1cnJlbmN5U2lnbiwKICBtZGlJbmZvcm1hdGlvbiwKfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgQ3VzdG9tZXJGb3JtIGZyb20gJ0Avdmlld3MvcGFnZXMvbWFzdGVyLWZpbGVzL2N1c3RvbWVycy9DdXN0b21lckZvcm0udnVlJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKaW1wb3J0IERyTGlzdFNlbGVjdGlvbiBmcm9tICdAL3ZpZXdzL3BhZ2VzL3NhbGVzL2NvbGxlY3Rpb25zL0RyTGlzdFNlbGVjdGlvbi52dWUnCmltcG9ydCBTYWxlc0RyVGFibGUgZnJvbSAnLi9TYWxlc0RyVGFibGUudnVlJwppbXBvcnQgQ29sbGVjdGlvblBheW1lbnQgZnJvbSAnLi9Db2xsZWN0aW9uUGF5bWVudC52dWUnCmltcG9ydCBQYXltZW50Rm9ybSBmcm9tICcuL1BheW1lbnRGb3JtLnZ1ZScKaW1wb3J0IHtRcmNvZGVTdHJlYW19IGZyb20gJ3Z1ZS1xcmNvZGUtcmVhZGVyJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb2xsZWN0aW9uRm9ybScsCiAgY29tcG9uZW50czogewogICAgQ3VzdG9tZXJGb3JtLAogICAgU2FsZXNEclRhYmxlLAogICAgQ29sbGVjdGlvblBheW1lbnQsCiAgICBEckxpc3RTZWxlY3Rpb24sCiAgICBQYXltZW50Rm9ybSwKICAgIFFyY29kZVN0cmVhbSwKICB9LAogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIGRlZmF1bHQ6ICgoKSA9PiAnQ3JlYXRlJyksCiAgICB9LAogICAgZGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgfSwKICBzZXR1cChwcm9wcywgeyBlbWl0IH0pIHsKICAgIHN0b3JlLmRpc3BhdGNoKCdUZXJtU3RvcmUvbGlzdCcpCiAgICBzdG9yZS5kaXNwYXRjaCgnVmF0U3RvcmUvbGlzdCcpCiAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNtYW5TdG9yZS9saXN0JykKICAgIHN0b3JlLmRpc3BhdGNoKCdEb2N1bWVudFN0b3JlL2xpc3QnKQoKICAgIGNvbnN0IG1vZGVEYXRhID0gdG9SZWYocHJvcHMsICdtb2RlJykKICAgIGNvbnN0IGRhdGVQb3N0ZWQgPSByZWYobmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkpCiAgICBjb25zdCBkYXRhUHJvcCA9IHRvUmVmKHByb3BzLCAnZGF0YScpCiAgICBjb25zdCBjdXN0b21lck1vZGFsID0gcmVmKGZhbHNlKQogICAgY29uc3QgZHJMaXN0TW9kYWwgPSByZWYoZmFsc2UpCiAgICBjb25zdCBwYXltZW50TW9kYWwgPSByZWYoZmFsc2UpCiAgICBjb25zdCBzaG93U2Nhbm5lciA9IHJlZihmYWxzZSkKICAgIGNvbnN0IHNhbGVzRHJMaXN0ID0gcmVmKFtdKQogICAgY29uc3QgZm9ybURhdGEgPSByZWYoewogICAgICBkYXRlTW9kYWw6IGZhbHNlLAogICAgICBjdXN0b21lcl9uYW1lOiBudWxsLAogICAgICBjdXN0b21lcl9pZDogMCwKICAgICAgZGF0ZV9wb3N0ZWQ6IG51bGwsCiAgICAgIGNvbGxlY3Rpb25fb3JkZXJfbnVtYmVyOiBudWxsLAogICAgICBkb2N1bWVudF9pZDogbnVsbCwKICAgICAgYWRkcmVzczogbnVsbCwKICAgICAgcmVtYXJrczogbnVsbCwKICAgICAgYXJlYTogbnVsbCwKICAgICAgc2FsZXNtYW5faWRfMTogbnVsbCwKICAgICAgc2FsZXNtYW5faWRfMjogbnVsbCwKICAgICAgdGVybV9pZDogbnVsbCwKICAgICAgdmF0X2lkOiBudWxsLAogICAgfSkKICAgIGNvbnN0IHBheW1lbnRXYXJuaW5nID0gcmVmKGZhbHNlKQogICAgY29uc3QgdG90YWxBbW91bnQgPSByZWYoMCkKICAgIGNvbnN0IHBheW1lbnRzID0gcmVmKFtdKQogICAgY29uc3QgcGF5bWVudHNSZWluaXRpYWxpemUgPSAoKSA9PiB7CiAgICAgIGlmIChmb3JtRGF0YS52YWx1ZS5wYXltZW50cz8ubGVuZ3RoID4gMCkgewogICAgICAgIHBheW1lbnRzLnZhbHVlID0gZm9ybURhdGEudmFsdWUucGF5bWVudHMubWFwKHBheW1lbnQgPT4gewogICAgICAgICAgaWYgKHBheW1lbnQucGF5bWVudF90eXBlLmluY2x1ZGVzKCdDYXNoUGF5bWVudCcpID09PSB0cnVlKSB7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgICAgICBwYXltZW50LnBheW1lbnRfdHlwZSA9ICdDYXNoIFBheW1lbnQnCiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHBheW1lbnQucGF5bWVudF90eXBlLmluY2x1ZGVzKCdDaGVja1BheW1lbnQnKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICAgICAgcGF5bWVudC5wYXltZW50X3R5cGUgPSAnQ2hlY2sgUGF5bWVudCcKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocGF5bWVudC5wYXltZW50X3R5cGUuaW5jbHVkZXMoJ09ubGluZVBheW1lbnQnKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICAgICAgcGF5bWVudC5wYXltZW50X3R5cGUgPSAnT25saW5lIFBheW1lbnQnCiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHBheW1lbnQKICAgICAgICB9KQogICAgICB9CiAgICB9CgogICAgaWYgKG1vZGVEYXRhLnZhbHVlID09PSAnRWRpdCcpIHsKICAgICAgZm9ybURhdGEudmFsdWUgPSBkYXRhUHJvcC52YWx1ZQogICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9uYW1lID0gZGF0YVByb3AudmFsdWUuY3VzdG9tZXIubmFtZQogICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9pZCA9IGRhdGFQcm9wLnZhbHVlLmN1c3RvbWVyLmlkCiAgICAgIGZvcm1EYXRhLnZhbHVlLnR5cGUgPSBkYXRhUHJvcC52YWx1ZS5jdXN0b21lci50eXBlCgogICAgICBpZiAoZm9ybURhdGEudmFsdWUuc2FsZXNfZHJfcGF5bWVudHM/Lmxlbmd0aCA+IDApIHsKICAgICAgICBzYWxlc0RyTGlzdC52YWx1ZSA9IFtdCiAgICAgICAgc2FsZXNEckxpc3QudmFsdWUgPSBmb3JtRGF0YS52YWx1ZS5zYWxlc19kcl9wYXltZW50cy5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBpdGVtID0gaXRlbS5zYWxlc19kcgoKICAgICAgICAgIGlmIChpdGVtLmFtb3VudCkgewogICAgICAgICAgICBpdGVtLmFtb3VudCA9IHBhcnNlRmxvYXQoaXRlbS5hbW91bnQpCiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGl0ZW0KICAgICAgICB9KQogICAgICB9CgogICAgICBwYXltZW50c1JlaW5pdGlhbGl6ZSgpCgogICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNEclN0b3JlL2RyTGlzdEJ5Q3VzdG9tZXInLCBmb3JtRGF0YS52YWx1ZS5jdXN0b21lci5pZCkKICAgIH0gZWxzZSB7CiAgICAgIGZvcm1EYXRhLnZhbHVlID0gewogICAgICAgIGRhdGVNb2RhbDogZmFsc2UsCiAgICAgICAgY3VzdG9tZXJfbmFtZTogbnVsbCwKICAgICAgICBjdXN0b21lcl9pZDogbnVsbCwKICAgICAgICBkYXRlX3Bvc3RlZDogbnVsbCwKICAgICAgICBjb2xsZWN0aW9uX29yZGVyX251bWJlcjogbnVsbCwKICAgICAgICBkb2N1bWVudF9pZDogbnVsbCwKICAgICAgICBhZGRyZXNzOiBudWxsLAogICAgICAgIHJlbWFya3M6IG51bGwsCiAgICAgICAgYXJlYTogbnVsbCwKICAgICAgICBzYWxlc21hbl9pZF8xOiBudWxsLAogICAgICAgIHNhbGVzbWFuX2lkXzI6IG51bGwsCiAgICAgICAgdGVybV9pZDogbnVsbCwKICAgICAgICB2YXRfaWQ6IG51bGwsCiAgICAgIH0KICAgIH0KCiAgICBpZiAoZm9ybURhdGEudmFsdWUuc2FsZXNfZHJfcGF5bWVudHM/Lmxlbmd0aCA+IDApIHsKICAgICAgc2FsZXNEckxpc3QudmFsdWUgPSBbXQoKICAgICAgc2FsZXNEckxpc3QudmFsdWUgPSBmb3JtRGF0YS52YWx1ZS5zYWxlc19kcl9wYXltZW50cy5tYXAoaXRlbSA9PiB7CiAgICAgICAgaXRlbS5pZCA9IGl0ZW0uc2FsZXNfZHIuaWQKICAgICAgICBpdGVtLnNhbGVzX2RyX251bWJlciA9IGl0ZW0uc2FsZXNfZHIuc2FsZXNfZHJfbnVtYmVyCiAgICAgICAgaXRlbS5hbW91bnQgPSBwYXJzZUZsb2F0KGl0ZW0uc2FsZXNfZHIuYW1vdW50KQoKICAgICAgICByZXR1cm4gaXRlbQogICAgICB9KQogICAgfQoKICAgIG9uVW5tb3VudGVkKGFzeW5jICgpID0+IHsKICAgICAgcGF5bWVudFdhcm5pbmcudmFsdWUgPSBmYWxzZQoKICAgICAgc2FsZXNEckxpc3QudmFsdWUgPSBbXQogICAgICBmb3JtRGF0YS52YWx1ZSA9IHsKICAgICAgICBkYXRlTW9kYWw6IGZhbHNlLAogICAgICAgIGN1c3RvbWVyX25hbWU6IG51bGwsCiAgICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsCiAgICAgICAgZGF0ZV9wb3N0ZWQ6IG51bGwsCiAgICAgICAgY29sbGVjdGlvbl9vcmRlcl9udW1iZXI6IG51bGwsCiAgICAgICAgZG9jdW1lbnRfaWQ6IG51bGwsCiAgICAgICAgYWRkcmVzczogbnVsbCwKICAgICAgICByZW1hcmtzOiBudWxsLAogICAgICAgIGFyZWE6IG51bGwsCiAgICAgICAgc2FsZXNtYW5faWRfMTogbnVsbCwKICAgICAgICBzYWxlc21hbl9pZF8yOiBudWxsLAogICAgICAgIHRlcm1faWQ6IG51bGwsCiAgICAgICAgdmF0X2lkOiBudWxsLAogICAgICB9CiAgICB9KQoKICAgIHdhdGNoKGRhdGFQcm9wLCAoKSA9PiB7CiAgICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0VkaXQnKSB7CiAgICAgICAgZm9ybURhdGEudmFsdWUgPSBkYXRhUHJvcC52YWx1ZQogICAgICAgIGZvcm1EYXRhLnZhbHVlLmN1c3RvbWVyX25hbWUgPSBkYXRhUHJvcC52YWx1ZS5jdXN0b21lci5uYW1lCiAgICAgICAgZm9ybURhdGEudmFsdWUuY3VzdG9tZXJfaWQgPSBkYXRhUHJvcC52YWx1ZS5jdXN0b21lci5pZAogICAgICAgIGZvcm1EYXRhLnZhbHVlLnR5cGUgPSBkYXRhUHJvcC52YWx1ZS5jdXN0b21lci50eXBlCiAgICAgICAgaWYgKGZvcm1EYXRhLnZhbHVlLnNhbGVzX2RyX3BheW1lbnRzPy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBzYWxlc0RyTGlzdC52YWx1ZSA9IFtdCiAgICAgICAgICBzYWxlc0RyTGlzdC52YWx1ZSA9IGZvcm1EYXRhLnZhbHVlLnNhbGVzX2RyX3BheW1lbnRzLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgaXRlbS5zYWxlc19kcl9udW1iZXIgPSBpdGVtLnNhbGVzX2RyLnNhbGVzX2RyX251bWJlcgogICAgICAgICAgICBpdGVtLmFtb3VudCA9IHBhcnNlRmxvYXQoaXRlbS5zYWxlc19kci5hbW91bnQpCgogICAgICAgICAgICByZXR1cm4gaXRlbQogICAgICAgICAgfSkKICAgICAgICB9CgogICAgICAgIHBheW1lbnRzUmVpbml0aWFsaXplKCkKCiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ1NhbGVzRHJTdG9yZS9kckxpc3RCeUN1c3RvbWVyJywgZm9ybURhdGEudmFsdWUuY3VzdG9tZXIuaWQpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9ybURhdGEudmFsdWUgPSB7CiAgICAgICAgICBkYXRlTW9kYWw6IGZhbHNlLAogICAgICAgICAgY3VzdG9tZXJfbmFtZTogbnVsbCwKICAgICAgICAgIGN1c3RvbWVyX2lkOiBudWxsLAogICAgICAgICAgZGF0ZV9wb3N0ZWQ6IG51bGwsCiAgICAgICAgICBjb2xsZWN0aW9uX29yZGVyX251bWJlcjogbnVsbCwKICAgICAgICAgIGRvY3VtZW50X2lkOiBudWxsLAogICAgICAgICAgYWRkcmVzczogbnVsbCwKICAgICAgICAgIHJlbWFya3M6IG51bGwsCiAgICAgICAgICBhcmVhOiBudWxsLAogICAgICAgICAgc2FsZXNtYW5faWRfMTogbnVsbCwKICAgICAgICAgIHNhbGVzbWFuX2lkXzI6IG51bGwsCiAgICAgICAgICB0ZXJtX2lkOiBudWxsLAogICAgICAgICAgdmF0X2lkOiBudWxsLAogICAgICAgIH0KCiAgICAgICAgc2FsZXNEckxpc3QudmFsdWUgPSBbXQogICAgICB9CiAgICB9KQoKICAgIGNvbnN0IGNhbmNlbCA9ICgpID0+IHsKICAgICAgZW1pdCgnc3VibWl0JykKICAgIH0KCiAgICBjb25zdCB0b3RhbFBheW1lbnRBbW91bnQgPSByZWYoMCkKCiAgICBjb25zdCBzaG93Q3VzdG9tZXJNb2RhbCA9ICgpID0+IHsKICAgICAgY3VzdG9tZXJNb2RhbC52YWx1ZSA9IHRydWUKICAgIH0KCiAgICBjb25zdCBvblNlbGVjdEN1c3RvbWVyID0gY3VzdG9tZXIgPT4gewogICAgICBpZiAoY3VzdG9tZXI/LmlkKSB7CiAgICAgICAgZm9ybURhdGEudmFsdWUuY3VzdG9tZXJfbmFtZSA9IGN1c3RvbWVyLm5hbWUKICAgICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9pZCA9IGN1c3RvbWVyLmlkCiAgICAgICAgZm9ybURhdGEudmFsdWUuZG9jdW1lbnRfaWQgPSBjdXN0b21lci5kb2N1bWVudF9pZAogICAgICAgIGZvcm1EYXRhLnZhbHVlLmFkZHJlc3MgPSBjdXN0b21lci5hZGRyZXNzCiAgICAgICAgZm9ybURhdGEudmFsdWUucmVtYXJrcyA9IGN1c3RvbWVyLnJlbWFya3MKICAgICAgICBmb3JtRGF0YS52YWx1ZS5hcmVhID0gY3VzdG9tZXIuYXJlYQogICAgICAgIGZvcm1EYXRhLnZhbHVlLnNhbGVzbWFuX2lkXzEgPSBjdXN0b21lci5zYWxlc21hbl9pZF8xCiAgICAgICAgZm9ybURhdGEudmFsdWUuc2FsZXNtYW5faWRfMiA9IGN1c3RvbWVyLnNhbGVzbWFuX2lkXzIKICAgICAgICBmb3JtRGF0YS52YWx1ZS50ZXJtX2lkID0gY3VzdG9tZXIudGVybV9pZAogICAgICAgIGZvcm1EYXRhLnZhbHVlLnZhdF9pZCA9IGN1c3RvbWVyLnZhdF9pZAogICAgICAgIGZvcm1EYXRhLnZhbHVlLnR5cGUgPSBjdXN0b21lci50eXBlCiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ1NhbGVzRHJTdG9yZS9kckxpc3RCeUN1c3RvbWVyJywgY3VzdG9tZXIuaWQpCiAgICAgIH0KCiAgICAgIGN1c3RvbWVyTW9kYWwudmFsdWUgPSBmYWxzZQogICAgfQoKICAgIGNvbnN0IHRvZ2dsZURyTW9kYWwgPSAoKSA9PiB7CiAgICAgIGRyTGlzdE1vZGFsLnZhbHVlID0gIWRyTGlzdE1vZGFsLnZhbHVlCiAgICB9CgogICAgY29uc3QgdG9nZ2xlUGF5bWVudE1vZGFsID0gKCkgPT4gewogICAgICBwYXltZW50TW9kYWwudmFsdWUgPSAhcGF5bWVudE1vZGFsLnZhbHVlCiAgICB9CgogICAgY29uc3Qgc2VsZWN0ZWREcnMgPSBzYWxlc0RycyA9PiB7CiAgICAgIHNhbGVzRHJMaXN0LnZhbHVlID0gW10KCiAgICAgIHNhbGVzRHJzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgZWxlbWVudC5hbW91bnQgPSBwYXJzZUZsb2F0KGVsZW1lbnQuYW1vdW50KQogICAgICAgIGVsZW1lbnQuYW1vdW50X3RvX3BheSA9IDAKCiAgICAgICAgc2FsZXNEckxpc3QudmFsdWUucHVzaChlbGVtZW50KQogICAgICB9KQoKICAgICAgdG9nZ2xlRHJNb2RhbCgpCiAgICB9CgogICAgY29uc3QgcmVtb3ZlRHIgPSBpdGVtID0+IHsKICAgICAgY29uc3QgaW5kZXggPSBzYWxlc0RyTGlzdC52YWx1ZS5maW5kKGRyID0+IGRyLmlkID09PSBpdGVtLmlkKQoKICAgICAgc2FsZXNEckxpc3QudmFsdWUuc3BsaWNlKGluZGV4LCAxKQogICAgfQoKICAgIGNvbnN0IHJlbW92ZVBheW1lbnQgPSAoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgcGF5bWVudHMudmFsdWUuc3BsaWNlKGluZGV4LCAxKQogICAgfQoKICAgIGNvbnN0IHN1Ym1pdCA9ICgpID0+IHsKICAgICAgY29uc29sZS5sb2codG90YWxQYXltZW50QW1vdW50LnZhbHVlKQoKICAgICAgaWYgKHRvdGFsUGF5bWVudEFtb3VudC52YWx1ZSA+IDApIHsKICAgICAgICBwYXltZW50V2FybmluZy52YWx1ZSA9IHRydWUKCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHBheW1lbnRXYXJuaW5nLnZhbHVlID0gZmFsc2UKCiAgICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0NyZWF0ZScpIHsKICAgICAgICBjb25zdCBwYXlsb2FkID0gZm9ybURhdGEudmFsdWUKICAgICAgICBwYXlsb2FkLmFtb3VudCA9IHRvdGFsQW1vdW50LnZhbHVlCiAgICAgICAgcGF5bG9hZC5kYXRlX3Bvc3RlZCA9IGRhdGVQb3N0ZWQudmFsdWUKICAgICAgICBwYXlsb2FkLnBheW1lbnRfaXRlbXMgPSBwYXltZW50cy52YWx1ZQogICAgICAgIHBheWxvYWQuZHJfaXRlbXMgPSBzYWxlc0RyTGlzdC52YWx1ZQoKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnQ29sbGVjdGlvblN0b3JlL2NyZWF0ZScsIHBheWxvYWQpLnRoZW4oCiAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGVtaXQoJ3N1Ym1pdCcsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHBheWxvYWQgPSBmb3JtRGF0YS52YWx1ZQogICAgICAgIHBheWxvYWQuYW1vdW50ID0gdG90YWxBbW91bnQudmFsdWUKICAgICAgICBwYXlsb2FkLmRhdGVfcG9zdGVkID0gZGF0ZVBvc3RlZC52YWx1ZQogICAgICAgIHBheWxvYWQucGF5bWVudF9pdGVtcyA9IHBheW1lbnRzLnZhbHVlCiAgICAgICAgcGF5bG9hZC5kcl9pdGVtcyA9IHNhbGVzRHJMaXN0LnZhbHVlCgogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdDb2xsZWN0aW9uU3RvcmUvdXBkYXRlJywgcGF5bG9hZCkudGhlbigKICAgICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgZW1pdCgnc3VibWl0JywgcmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICApCiAgICAgIH0KICAgIH0KCiAgICB3YXRjaChwYXltZW50cywgdmFsdWUgPT4gewogICAgICB0b3RhbFBheW1lbnRBbW91bnQudmFsdWUgPSB0b3RhbEFtb3VudC52YWx1ZSAtIDAKCiAgICAgIHZhbHVlLmZvckVhY2gocGF5bWVudCA9PiB7CiAgICAgICAgdG90YWxQYXltZW50QW1vdW50LnZhbHVlID0gcGFyc2VGbG9hdCh0b3RhbFBheW1lbnRBbW91bnQudmFsdWUpIC0gcGFyc2VGbG9hdChwYXltZW50LmFtb3VudCkKICAgICAgfSkKICAgIH0pCgogICAgY29uc3QgcG9zdE9yZGVyID0gKCkgPT4gewogICAgICBzdG9yZS5kaXNwYXRjaCgnQ29sbGVjdGlvblN0b3JlL3Bvc3RPcmRlcicsIGZvcm1EYXRhLnZhbHVlLmlkKS50aGVuKAogICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBlbWl0KCdzdWJtaXQnLCByZXNwb25zZS5kYXRhKQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICkKICAgIH0KCiAgICBjb25zdCB1bnBvc3RPcmRlciA9ICgpID0+IHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ0NvbGxlY3Rpb25TdG9yZS91bnBvc3RPcmRlcicsIGZvcm1EYXRhLnZhbHVlLmlkKS50aGVuKAogICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBlbWl0KCdzdWJtaXQnLCByZXNwb25zZS5kYXRhKQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICkKICAgIH0KCiAgICBjb25zdCBhZGRlZFBheW1lbnQgPSBwYXltZW50ID0+IHsKICAgICAgdG9nZ2xlUGF5bWVudE1vZGFsKCkKICAgICAgcGF5bWVudHMudmFsdWUucHVzaChwYXltZW50KQogICAgfQoKICAgIGNvbnN0IHRvdGFsUGF5bWVudENoZWNrID0gYW1vdW50ID0+IHsKICAgICAgdG90YWxBbW91bnQudmFsdWUgPSBhbW91bnQKCiAgICAgIHRvdGFsUGF5bWVudEFtb3VudC52YWx1ZSA9IGFtb3VudAogICAgfQoKICAgIGNvbnN0IG9uSW5pdCA9IHByb21pc2UgPT4gewogICAgICBwcm9taXNlCiAgICAgICAgLnRoZW4oY29uc29sZS5sb2cpCiAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpCiAgICB9CgogICAgY29uc3Qgb25EZWNvZGUgPSBpZCA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvZ2V0JywgaWQpCiAgICAgIGNvbnNvbGUubG9nKGlkKQogICAgfQoKICAgIGNvbnN0IHNjYW5uZXJPcHRpb25zID0gKGRldGVjdGVkQ29kZXMsIGN0eCkgPT4gewogICAgICBmb3IgKGNvbnN0IGRldGVjdGVkQ29kZSBvZiBkZXRlY3RlZENvZGVzKSB7CiAgICAgICAgY29uc3QgWyBmaXJzdFBvaW50LCAuLi5vdGhlclBvaW50cyBdID0gZGV0ZWN0ZWRDb2RlLmNvcm5lclBvaW50cwoKICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAicmVkIjsKCiAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgIGN0eC5tb3ZlVG8oZmlyc3RQb2ludC54LCBmaXJzdFBvaW50LnkpOwogICAgICAgIGZvciAoY29uc3QgeyB4LCB5IH0gb2Ygb3RoZXJQb2ludHMpIHsKICAgICAgICAgIGN0eC5saW5lVG8oeCwgeSk7CiAgICAgICAgfQogICAgICAgIGN0eC5saW5lVG8oZmlyc3RQb2ludC54LCBmaXJzdFBvaW50LnkpOwogICAgICAgIGN0eC5jbG9zZVBhdGgoKTsKICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICB0b3RhbFBheW1lbnRBbW91bnQsCiAgICAgIHBheW1lbnRXYXJuaW5nLAogICAgICB0b3RhbFBheW1lbnRDaGVjaywKICAgICAgcG9zdE9yZGVyLAogICAgICB1bnBvc3RPcmRlciwKICAgICAgcmVtb3ZlUGF5bWVudCwKICAgICAgYWRkZWRQYXltZW50LAogICAgICB0b3RhbEFtb3VudCwKICAgICAgdG9nZ2xlUGF5bWVudE1vZGFsLAogICAgICBwYXltZW50cywKICAgICAgcGF5bWVudE1vZGFsLAogICAgICByZW1vdmVEciwKICAgICAgc2FsZXNEckxpc3QsCiAgICAgIGRyTGlzdE1vZGFsLAogICAgICBzZWxlY3RlZERycywKICAgICAgdG9nZ2xlRHJNb2RhbCwKICAgICAgc3VibWl0LAogICAgICBjYW5jZWwsCiAgICAgIGVycm9yczogY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuQ29sbGVjdGlvblN0b3JlLmVycm9ycyksCiAgICAgIGZvcm1EYXRhLAogICAgICBpY29uczogewogICAgICAgIG1kaUluZm9ybWF0aW9uLAogICAgICAgIG1kaUFjY291bnRQbHVzT3V0bGluZSwKICAgICAgICBtZGlDYXJkT2ZmLAogICAgICAgIG1kaUN1cnJlbmN5U2lnbiwKICAgICAgfSwKICAgICAgc2hvd0N1c3RvbWVyTW9kYWwsCiAgICAgIGRhdGVQb3N0ZWQsCiAgICAgIGN1c3RvbWVyTW9kYWwsCiAgICAgIG9uU2VsZWN0Q3VzdG9tZXIsCiAgICAgIHNhbGVzbWFuczogY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuU2FsZXNtYW5TdG9yZS5zYWxlc21hbnMpLAogICAgICB0ZXJtczogY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuVGVybVN0b3JlLnRlcm1zKSwKICAgICAgdmF0czogY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuVmF0U3RvcmUudmF0cyksCiAgICAgIGRvY3VtZW50czogY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuRG9jdW1lbnRTdG9yZS5kb2N1bWVudHMuZmlsdGVyKGRvY3VtZW50SXRlbSA9PiB7CiAgICAgICAgaWYgKGRvY3VtZW50SXRlbS5tb2R1bGUgPT09ICdDb2xsZWN0aW9uJykgewogICAgICAgICAgZG9jdW1lbnRJdGVtLnRpdGxlID0gYCR7ZG9jdW1lbnRJdGVtLmRvY3VtZW50X25hbWV9YAoKICAgICAgICAgIHJldHVybiBkb2N1bWVudEl0ZW0KICAgICAgICB9CiAgICAgIH0pKSwKICAgICAgdHlwZXM6IHJlZihbCiAgICAgICAgJ1JlZ3VsYXInLAogICAgICAgICdEaXN0cmlidXRvcicsCiAgICAgIF0pLAogICAgICBvbkluaXQsCiAgICAgIG9uRGVjb2RlLAogICAgICBzY2FubmVyT3B0aW9ucywKICAgICAgc2hvd1NjYW5uZXIsCiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["CollectionForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CollectionForm.vue","sourceRoot":"src/views/pages/sales/collections","sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"pa-6\">\n      {{ mode }} Collection\n    </v-card-title>\n    <v-card-text>\n      <v-form>\n        <v-row>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"primary\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Information\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-menu\n              v-model=\"formData.dateModal\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              :disabled=\"formData.status === 'Posted'\"\n              max-width=\"290px\"\n              min-width=\"auto\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"datePosted\"\n                  label=\"Date\"\n                  persistent-hint\n                  :prepend-icon=\"icons.mdiCalendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                ></v-text-field>\n              </template>\n\n              <v-date-picker\n                v-model=\"datePosted\"\n                no-title\n                color=\"primary\"\n                @input=\"formData.dateModal = false\"\n              ></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.collection_order_number\"\n              outlined\n              :disabled=\"formData.id !== undefined\"\n              :error-messages=\"errors.collection_order_number\"\n              dense\n              hide-details=\"auto\"\n              label=\"Collection Number\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.document_id\"\n              :items=\"documents\"\n              item-text=\"title\"\n              item-value=\"id\"\n              label=\"Document\"\n              :disabled=\"formData.status === 'Posted'\"\n              :error-messages=\"errors.document_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"4\"\n            class=\"pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.customer_name\"\n              outlined\n              readonly\n              :error-messages=\"errors.customer_id\"\n              dense\n              hide-details=\"auto\"\n              label=\"Customer\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"2\"\n          >\n            <v-btn\n              v-if=\"mode == 'Create'\"\n              class=\"md4\"\n              color=\"primary\"\n              x-small\n              dark\n              @click=\"showCustomerModal\"\n            >\n              Get Customer\n              <v-icon>\n                {{ icons.mdiAccountPlusOutline }}\n              </v-icon>\n            </v-btn>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.type\"\n              :items=\"types\"\n              label=\"Customer Type\"\n              disabled\n              :error-messages=\"errors.type\"\n              readonly\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.area\"\n              outlined\n              dense\n              :disabled=\"formData.status === 'Posted'\"\n              :error-messages=\"errors.area\"\n              hide-details=\"auto\"\n              label=\"Area\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.term_id\"\n              :items=\"terms\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Term\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :error-messages=\"errors.term_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.vat_id\"\n              :items=\"vats\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Vat\"\n              :error-messages=\"errors.vat_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_1\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Agent 1\"\n              :error-messages=\"errors.salesman_id_1\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_2\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Agent 2\"\n              :error-messages=\"errors.salesman_id_2\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.address\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.address\"\n              hide-details=\"auto\"\n              label=\"Address\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.remarks\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.remarks\"\n              hide-details=\"auto\"\n              label=\"Remarks\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.promo_code\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              dense\n              :error-messages=\"errors.promo_code\"\n              hide-details=\"auto\"\n              label=\"Promo Code\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n        <v-row class=\"mt-10\">\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"info\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"info\">\n                  {{ icons.mdiCardOff }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Sales DR\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-row justify=\"center\" align=\"center\" class=\"mt-3\">\n            <v-col cols=\"3\" v-show=\"showScanner\">\n              <v-alert\n                color=\"info\"\n                text\n                style=\"margin-bottom: -10px\"\n              >\n                <div class=\"d-flex align-start\" >\n                  <v-icon color=\"info\">\n                    {{ icons.mdiCardOff }}\n                  </v-icon>\n                  <div class=\"ms-3\">\n                    <p class=\"text-base font-weight-medium mb-1\">\n                      QR Code Scanner\n                    </p>\n                  </div>\n                </div>\n              </v-alert>\n              <qrcode-stream v-if=\"showScanner\" :track=\"scannerOptions\" @decode=\"onDecode\"\n                             @init=\"onInit\"></qrcode-stream>\n            </v-col>\n            <div class=\"d-flex align-center mb-2\">\n              <v-btn @click=\"showScanner = !showScanner\">\n                {{ showScanner ? 'Hide' : 'Show' }} Scanner\n              </v-btn>\n            </div>\n          </v-row>\n\n          <v-col\n            v-if=\"formData.customer_id\"\n            cols=\"12\"\n          >\n            <sales-dr-table\n              :customer-id=\"formData.customer_id\"\n              :data=\"salesDrList\"\n              @removeDr=\"removeDr\"\n              @showModal=\"toggleDrModal\"\n              @totalPayment=\"totalPaymentCheck\"\n            >\n            </sales-dr-table>\n          </v-col>\n        </v-row>\n        <v-row class=\"mt-10\">\n          <v-col\n            cols=\"12\"\n          >\n            <v-alert\n              color=\"success\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"success\">\n                  {{ icons.mdiCurrencySign }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Payments\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            v-if=\"paymentWarning\"\n            cols=\"12\"\n          >\n            <v-alert\n              color=\"error\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"error\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    There is still remaining amount payment needed.\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            v-if=\"formData.customer_id\"\n            cols=\"12\"\n          >\n            <collection-payment\n              :total-amount=\"totalAmount\"\n              :payments=\"payments\"\n              @toggleModal=\"togglePaymentModal\"\n              @removePayment=\"removePayment\"\n            ></collection-payment>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col\n            cols=\"auto\"\n            class=\"d-flex\"\n          >\n            <v-btn\n              v-if=\"formData.status !== 'Posted'\"\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"submit\"\n            >\n              <v-icon>\n                {{ icons.mdiContentSave }}\n              </v-icon>\n              {{ mode == 'Create' ? 'Create' : 'Update' }}\n            </v-btn>\n            <v-btn\n              v-if=\"formData.status === 'For Review'\"\n              color=\"success\"\n              class=\"me-3 mt-4\"\n              @click=\"postOrder\"\n            >\n              <v-icon>\n                {{ icons.mdiFinance }}\n              </v-icon>\n              Post\n            </v-btn>\n            <v-btn\n              v-if=\"formData.status === 'Posted'\"\n              color=\"error\"\n              class=\"me-3 mt-4\"\n              @click=\"unpostOrder\"\n            >\n              <v-icon>\n                {{ icons.mdiFinance }}\n              </v-icon>\n              Unpost\n            </v-btn>\n            <v-btn\n              outlined\n              class=\"me-3 mt-4\"\n              type=\"reset\"\n              color=\"info\"\n              @click.prevent=\"cancel\"\n            >\n              <v-icon>\n                {{ icons.mdiProgressClose }}\n              </v-icon>\n              Close\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n      <v-dialog\n        v-model=\"drListModal\"\n        hide-overlay\n        fullscreen\n        transition=\"dialog-bottom-transition\"\n      >\n        <dr-list-selection\n          :customer-id=\"formData.customer_id\"\n          :existing-selected-dr=\"salesDrList\"\n          @selectedDrs=\"selectedDrs\"\n          @cancel=\"drListModal = false\"\n        >\n        </dr-list-selection>\n      </v-dialog>\n      <v-dialog\n        v-model=\"customerModal\"\n        fullscreen\n        hide-overlay\n        width=\"1100px\"\n        height=\"500px\"\n        transition=\"dialog-bottom-transition\"\n      >\n        <customer-form\n          :mode=\"'Selecting'\"\n          @submit=\"onSelectCustomer\"\n          @clicked=\"cancel\"\n        ></customer-form>\n      </v-dialog>\n      <v-dialog\n        v-model=\"paymentModal\"\n        hide-overlay\n        width=\"1100px\"\n        height=\"700px\"\n        transition=\"dialog-bottom-transition\"\n      >\n        <payment-form\n          :total-amount=\"totalPaymentAmount\"\n          @submit=\"onSelectCustomer\"\n          @clicked=\"cancel\"\n          @toggleModal=\"togglePaymentModal\"\n          @addedPayment=\"addedPayment\"\n        ></payment-form>\n      </v-dialog>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport {\n  computed, onUnmounted, ref, toRef, watch,\n} from '@vue/composition-api'\nimport {\n  mdiAccountPlusOutline, mdiCardOff, mdiCurrencySign,\n  mdiInformation,\n} from '@mdi/js'\nimport CustomerForm from '@/views/pages/master-files/customers/CustomerForm.vue'\nimport store from '@/store'\nimport DrListSelection from '@/views/pages/sales/collections/DrListSelection.vue'\nimport SalesDrTable from './SalesDrTable.vue'\nimport CollectionPayment from './CollectionPayment.vue'\nimport PaymentForm from './PaymentForm.vue'\nimport {QrcodeStream} from 'vue-qrcode-reader'\n\nexport default {\n  name: 'CollectionForm',\n  components: {\n    CustomerForm,\n    SalesDrTable,\n    CollectionPayment,\n    DrListSelection,\n    PaymentForm,\n    QrcodeStream,\n  },\n  props: {\n    mode: {\n      type: String,\n      required: true,\n      default: (() => 'Create'),\n    },\n    data: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('TermStore/list')\n    store.dispatch('VatStore/list')\n    store.dispatch('SalesmanStore/list')\n    store.dispatch('DocumentStore/list')\n\n    const modeData = toRef(props, 'mode')\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n    const dataProp = toRef(props, 'data')\n    const customerModal = ref(false)\n    const drListModal = ref(false)\n    const paymentModal = ref(false)\n    const showScanner = ref(false)\n    const salesDrList = ref([])\n    const formData = ref({\n      dateModal: false,\n      customer_name: null,\n      customer_id: 0,\n      date_posted: null,\n      collection_order_number: null,\n      document_id: null,\n      address: null,\n      remarks: null,\n      area: null,\n      salesman_id_1: null,\n      salesman_id_2: null,\n      term_id: null,\n      vat_id: null,\n    })\n    const paymentWarning = ref(false)\n    const totalAmount = ref(0)\n    const payments = ref([])\n    const paymentsReinitialize = () => {\n      if (formData.value.payments?.length > 0) {\n        payments.value = formData.value.payments.map(payment => {\n          if (payment.payment_type.includes('CashPayment') === true) {\n            // eslint-disable-next-line no-param-reassign\n            payment.payment_type = 'Cash Payment'\n          }\n\n          if (payment.payment_type.includes('CheckPayment') === true) {\n            // eslint-disable-next-line no-param-reassign\n            payment.payment_type = 'Check Payment'\n          }\n\n          if (payment.payment_type.includes('OnlinePayment') === true) {\n            // eslint-disable-next-line no-param-reassign\n            payment.payment_type = 'Online Payment'\n          }\n\n          return payment\n        })\n      }\n    }\n\n    if (modeData.value === 'Edit') {\n      formData.value = dataProp.value\n      formData.value.customer_name = dataProp.value.customer.name\n      formData.value.customer_id = dataProp.value.customer.id\n      formData.value.type = dataProp.value.customer.type\n\n      if (formData.value.sales_dr_payments?.length > 0) {\n        salesDrList.value = []\n        salesDrList.value = formData.value.sales_dr_payments.map(item => {\n          item = item.sales_dr\n\n          if (item.amount) {\n            item.amount = parseFloat(item.amount)\n          }\n\n          return item\n        })\n      }\n\n      paymentsReinitialize()\n\n      store.dispatch('SalesDrStore/drListByCustomer', formData.value.customer.id)\n    } else {\n      formData.value = {\n        dateModal: false,\n        customer_name: null,\n        customer_id: null,\n        date_posted: null,\n        collection_order_number: null,\n        document_id: null,\n        address: null,\n        remarks: null,\n        area: null,\n        salesman_id_1: null,\n        salesman_id_2: null,\n        term_id: null,\n        vat_id: null,\n      }\n    }\n\n    if (formData.value.sales_dr_payments?.length > 0) {\n      salesDrList.value = []\n\n      salesDrList.value = formData.value.sales_dr_payments.map(item => {\n        item.id = item.sales_dr.id\n        item.sales_dr_number = item.sales_dr.sales_dr_number\n        item.amount = parseFloat(item.sales_dr.amount)\n\n        return item\n      })\n    }\n\n    onUnmounted(async () => {\n      paymentWarning.value = false\n\n      salesDrList.value = []\n      formData.value = {\n        dateModal: false,\n        customer_name: null,\n        customer_id: null,\n        date_posted: null,\n        collection_order_number: null,\n        document_id: null,\n        address: null,\n        remarks: null,\n        area: null,\n        salesman_id_1: null,\n        salesman_id_2: null,\n        term_id: null,\n        vat_id: null,\n      }\n    })\n\n    watch(dataProp, () => {\n      if (modeData.value === 'Edit') {\n        formData.value = dataProp.value\n        formData.value.customer_name = dataProp.value.customer.name\n        formData.value.customer_id = dataProp.value.customer.id\n        formData.value.type = dataProp.value.customer.type\n        if (formData.value.sales_dr_payments?.length > 0) {\n          salesDrList.value = []\n          salesDrList.value = formData.value.sales_dr_payments.map(item => {\n            item.sales_dr_number = item.sales_dr.sales_dr_number\n            item.amount = parseFloat(item.sales_dr.amount)\n\n            return item\n          })\n        }\n\n        paymentsReinitialize()\n\n        store.dispatch('SalesDrStore/drListByCustomer', formData.value.customer.id)\n      } else {\n        formData.value = {\n          dateModal: false,\n          customer_name: null,\n          customer_id: null,\n          date_posted: null,\n          collection_order_number: null,\n          document_id: null,\n          address: null,\n          remarks: null,\n          area: null,\n          salesman_id_1: null,\n          salesman_id_2: null,\n          term_id: null,\n          vat_id: null,\n        }\n\n        salesDrList.value = []\n      }\n    })\n\n    const cancel = () => {\n      emit('submit')\n    }\n\n    const totalPaymentAmount = ref(0)\n\n    const showCustomerModal = () => {\n      customerModal.value = true\n    }\n\n    const onSelectCustomer = customer => {\n      if (customer?.id) {\n        formData.value.customer_name = customer.name\n        formData.value.customer_id = customer.id\n        formData.value.document_id = customer.document_id\n        formData.value.address = customer.address\n        formData.value.remarks = customer.remarks\n        formData.value.area = customer.area\n        formData.value.salesman_id_1 = customer.salesman_id_1\n        formData.value.salesman_id_2 = customer.salesman_id_2\n        formData.value.term_id = customer.term_id\n        formData.value.vat_id = customer.vat_id\n        formData.value.type = customer.type\n        store.dispatch('SalesDrStore/drListByCustomer', customer.id)\n      }\n\n      customerModal.value = false\n    }\n\n    const toggleDrModal = () => {\n      drListModal.value = !drListModal.value\n    }\n\n    const togglePaymentModal = () => {\n      paymentModal.value = !paymentModal.value\n    }\n\n    const selectedDrs = salesDrs => {\n      salesDrList.value = []\n\n      salesDrs.forEach(element => {\n        element.amount = parseFloat(element.amount)\n        element.amount_to_pay = 0\n\n        salesDrList.value.push(element)\n      })\n\n      toggleDrModal()\n    }\n\n    const removeDr = item => {\n      const index = salesDrList.value.find(dr => dr.id === item.id)\n\n      salesDrList.value.splice(index, 1)\n    }\n\n    const removePayment = (item, index) => {\n      payments.value.splice(index, 1)\n    }\n\n    const submit = () => {\n      console.log(totalPaymentAmount.value)\n\n      if (totalPaymentAmount.value > 0) {\n        paymentWarning.value = true\n\n        return\n      }\n\n      paymentWarning.value = false\n\n      if (modeData.value === 'Create') {\n        const payload = formData.value\n        payload.amount = totalAmount.value\n        payload.date_posted = datePosted.value\n        payload.payment_items = payments.value\n        payload.dr_items = salesDrList.value\n\n        store.dispatch('CollectionStore/create', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      } else {\n        const payload = formData.value\n        payload.amount = totalAmount.value\n        payload.date_posted = datePosted.value\n        payload.payment_items = payments.value\n        payload.dr_items = salesDrList.value\n\n        store.dispatch('CollectionStore/update', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      }\n    }\n\n    watch(payments, value => {\n      totalPaymentAmount.value = totalAmount.value - 0\n\n      value.forEach(payment => {\n        totalPaymentAmount.value = parseFloat(totalPaymentAmount.value) - parseFloat(payment.amount)\n      })\n    })\n\n    const postOrder = () => {\n      store.dispatch('CollectionStore/postOrder', formData.value.id).then(\n        response => {\n          if (response.status === undefined) {\n            emit('submit', response.data)\n          }\n        },\n      )\n    }\n\n    const unpostOrder = () => {\n      store.dispatch('CollectionStore/unpostOrder', formData.value.id).then(\n        response => {\n          if (response.status === undefined) {\n            emit('submit', response.data)\n          }\n        },\n      )\n    }\n\n    const addedPayment = payment => {\n      togglePaymentModal()\n      payments.value.push(payment)\n    }\n\n    const totalPaymentCheck = amount => {\n      totalAmount.value = amount\n\n      totalPaymentAmount.value = amount\n    }\n\n    const onInit = promise => {\n      promise\n        .then(console.log)\n        .catch(console.error)\n    }\n\n    const onDecode = id => {\n      store.dispatch('SalesDrStore/get', id)\n      console.log(id)\n    }\n\n    const scannerOptions = (detectedCodes, ctx) => {\n      for (const detectedCode of detectedCodes) {\n        const [ firstPoint, ...otherPoints ] = detectedCode.cornerPoints\n\n        ctx.strokeStyle = \"red\";\n\n        ctx.beginPath();\n        ctx.moveTo(firstPoint.x, firstPoint.y);\n        for (const { x, y } of otherPoints) {\n          ctx.lineTo(x, y);\n        }\n        ctx.lineTo(firstPoint.x, firstPoint.y);\n        ctx.closePath();\n        ctx.stroke();\n      }\n    }\n\n    return {\n      totalPaymentAmount,\n      paymentWarning,\n      totalPaymentCheck,\n      postOrder,\n      unpostOrder,\n      removePayment,\n      addedPayment,\n      totalAmount,\n      togglePaymentModal,\n      payments,\n      paymentModal,\n      removeDr,\n      salesDrList,\n      drListModal,\n      selectedDrs,\n      toggleDrModal,\n      submit,\n      cancel,\n      errors: computed(() => store.state.CollectionStore.errors),\n      formData,\n      icons: {\n        mdiInformation,\n        mdiAccountPlusOutline,\n        mdiCardOff,\n        mdiCurrencySign,\n      },\n      showCustomerModal,\n      datePosted,\n      customerModal,\n      onSelectCustomer,\n      salesmans: computed(() => store.state.SalesmanStore.salesmans),\n      terms: computed(() => store.state.TermStore.terms),\n      vats: computed(() => store.state.VatStore.vats),\n      documents: computed(() => store.state.DocumentStore.documents.filter(documentItem => {\n        if (documentItem.module === 'Collection') {\n          documentItem.title = `${documentItem.document_name}`\n\n          return documentItem\n        }\n      })),\n      types: ref([\n        'Regular',\n        'Distributor',\n      ]),\n      onInit,\n      onDecode,\n      scannerOptions,\n      showScanner,\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}