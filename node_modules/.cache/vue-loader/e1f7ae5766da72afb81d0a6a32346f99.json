{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/user-access-management/roles/RoleListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/user-access-management/roles/RoleListTable.vue","mtime":1659098301276},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1kaUFjY291bnRFZGl0LCBtZGlEZWxldGVDaXJjbGUsIG1kaU1hZ25pZnkgfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgUm9sZUZvcm0gZnJvbSAnQC92aWV3cy9wYWdlcy91c2VyLWFjY2Vzcy1tYW5hZ2VtZW50L3JvbGVzL1JvbGVGb3JtLnZ1ZScKaW1wb3J0IHsgcmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUm9sZUZvcm0sCiAgfSwKICBzZXR1cCgpIHsKICAgIGNvbnN0IHNlYXJjaCA9IHJlZignJykKCiAgICByZXR1cm4gewogICAgICBpY29uczogewogICAgICAgIG1kaUFjY291bnRFZGl0LAogICAgICAgIG1kaURlbGV0ZUNpcmNsZSwKICAgICAgICBtZGlNYWduaWZ5LAogICAgICB9LAogICAgICBzZWFyY2gsCiAgICB9CiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgZGlhbG9nOiBmYWxzZSwKICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICBoZWFkZXJzOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAnVGl0bGUnLAogICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAndGl0bGUnLAogICAgICB9LAogICAgICB7IHRleHQ6ICdWYWx1ZScsIHZhbHVlOiAnbmFtZScgfSwKICAgICAgeyB0ZXh0OiAnRGF0ZSBDcmVhdGVkJywgdmFsdWU6ICdjcmVhdGVkX2F0JyB9LAogICAgICB7IHRleHQ6ICdBY3Rpb25zJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlIH0sCiAgICBdLAogICAgZWRpdGVkSW5kZXg6IC0xLAogICAgZWRpdGVkSXRlbTogewogICAgICBhYmlsaXRpZXM6IFtdLAogICAgICB0aXRsZTogJycsCiAgICAgIG5hbWU6ICcnLAogICAgICBzY29wZTogJycsCiAgICAgIGRhdGVfY3JlYXRlZDogJycsCiAgICAgIGFjdGlvbnM6ICcnLAogICAgfSwKICAgIGRlZmF1bHRJdGVtOiB7CiAgICAgIGFiaWxpdGllczogW10sCiAgICAgIHRpdGxlOiAnJywKICAgICAgbmFtZTogJycsCiAgICAgIHNjb3BlOiAnJywKICAgICAgZGF0ZV9jcmVhdGVkOiAnJywKICAgICAgYWN0aW9uczogJycsCiAgICB9LAogIH0pLAoKICBjb21wdXRlZDogewogICAgZm9ybVRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0ZWRJbmRleCA9PT0gLTEgPyAnTmV3IFJvbGUnIDogJ0VkaXQgUm9sZScKICAgIH0sCiAgICByb2xlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLlVzZXJBY2Nlc3NNYW5hZ2VtZW50U3RvcmUucm9sZXMKICAgIH0sCiAgICBsb2FkaW5nKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuVXNlckFjY2Vzc01hbmFnZW1lbnRTdG9yZS5sb2FkaW5nCiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBkaWFsb2codmFsKSB7CiAgICAgIHJldHVybiB2YWwgfHwgdGhpcy5jbG9zZSgpCiAgICB9LAogICAgZGlhbG9nRGVsZXRlKHZhbCkgewogICAgICByZXR1cm4gdmFsIHx8IHRoaXMuY2xvc2VEZWxldGUoKQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnVXNlckFjY2Vzc01hbmFnZW1lbnRTdG9yZS9nZXRSb2xlcycpCiAgfSwKICBtZXRob2RzOiB7CiAgICBlZGl0SXRlbShpdGVtKSB7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLnJvbGVzLmluZGV4T2YoaXRlbSkKICAgICAgdGhpcy5lZGl0ZWRJdGVtID0geyAuLi5pdGVtIH0KICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlCiAgICB9LAoKICAgIGRlbGV0ZUl0ZW0oaXRlbSkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5yb2xlcy5pbmRleE9mKGl0ZW0pCiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IHsgLi4uaXRlbSB9CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gdHJ1ZQogICAgfSwKCiAgICBkZWxldGVJdGVtQ29uZmlybSgpIHsKICAgICAgdGhpcy5yb2xlcy5zcGxpY2UodGhpcy5lZGl0ZWRJbmRleCwgMSkKICAgICAgdGhpcy5jbG9zZURlbGV0ZSgpCiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSB7IC4uLnRoaXMuZGVmYXVsdEl0ZW0gfQogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMQogICAgICB9KQogICAgfSwKCiAgICBjbG9zZURlbGV0ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSBmYWxzZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0geyAuLi50aGlzLmRlZmF1bHRJdGVtIH0KICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTEKICAgICAgfSkKICAgIH0sCgogICAgc2F2ZSgpIHsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xlc1t0aGlzLmVkaXRlZEluZGV4XSwgdGhpcy5lZGl0ZWRJdGVtKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucm9sZXMucHVzaCh0aGlzLmVkaXRlZEl0ZW0pCiAgICAgIH0KICAgICAgdGhpcy5jbG9zZSgpCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["RoleListTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoleListTable.vue","sourceRoot":"src/views/pages/user-access-management/roles","sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"roles\"\n      :search=\"search\"\n      sort-by=\"title\"\n      class=\"elevation-1\"\n      fixed-header\n      :loading=\"loading\"\n    >\n      <template v-slot:top>\n        <v-toolbar\n          flat\n        >\n          <v-col\n            cols=\"12\"\n            offset-md=\"12\"\n            md=\"2\"\n          >\n            <v-toolbar-title>Roles</v-toolbar-title>\n          </v-col>\n          <v-divider\n            class=\"mx-4\"\n            inset\n            vertical\n          ></v-divider>\n          <v-card-text>\n            <v-row>\n              <v-col\n                cols=\"8\"\n                offset-md=\"8\"\n                md=\"4\"\n              >\n                <v-text-field\n                  v-model=\"search\"\n                  :append-icon=\"icons.mdiMagnify\"\n                  label=\"Search\"\n                  single-line\n                  hide-details\n                  outlined\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-card-text>\n\n          <v-spacer></v-spacer>\n          <v-dialog\n            v-model=\"dialog\"\n            max-width=\"800px\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">{{ formTitle }}</span>\n              </v-card-title>\n              <v-card-text>\n                <role-form\n                  :role=\"editedItem\"\n                  @clicked=\"dialog=false\"\n                ></role-form>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n          <v-dialog\n            v-model=\"dialogDelete\"\n            max-width=\"500px\"\n          >\n            <v-card>\n              <v-card-title>\n                Are you sure you want to delete this item?\n              </v-card-title>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"error\"\n                  text\n                  @click=\"closeDelete\"\n                >\n                  Cancel\n                </v-btn>\n                <v-btn\n                  disabled\n                  color=\"success\"\n                  text\n                  @click=\"deleteItemConfirm\"\n                >\n                  OK\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon\n          small\n          class=\"mr-2\"\n          @click=\"editItem(item)\"\n        >\n          {{ icons.mdiAccountEdit }}\n        </v-icon>\n        <v-icon\n          small\n          @click=\"deleteItem(item)\"\n        >\n          {{ icons.mdiDeleteCircle }}\n        </v-icon>\n      </template>\n      <template v-slot:no-data>\n        <v-btn\n          color=\"primary\"\n        >\n          Refresh\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport { mdiAccountEdit, mdiDeleteCircle, mdiMagnify } from '@mdi/js'\nimport RoleForm from '@/views/pages/user-access-management/roles/RoleForm.vue'\nimport { ref } from '@vue/composition-api'\n\nexport default {\n  components: {\n    RoleForm,\n  },\n  setup() {\n    const search = ref('')\n\n    return {\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n        mdiMagnify,\n      },\n      search,\n    }\n  },\n  data: () => ({\n    dialog: false,\n    dialogDelete: false,\n    headers: [\n      {\n        text: 'Title',\n        align: 'start',\n        sortable: true,\n        value: 'title',\n      },\n      { text: 'Value', value: 'name' },\n      { text: 'Date Created', value: 'created_at' },\n      { text: 'Actions', value: 'actions', sortable: false },\n    ],\n    editedIndex: -1,\n    editedItem: {\n      abilities: [],\n      title: '',\n      name: '',\n      scope: '',\n      date_created: '',\n      actions: '',\n    },\n    defaultItem: {\n      abilities: [],\n      title: '',\n      name: '',\n      scope: '',\n      date_created: '',\n      actions: '',\n    },\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? 'New Role' : 'Edit Role'\n    },\n    roles() {\n      return this.$store.state.UserAccessManagementStore.roles\n    },\n    loading() {\n      return this.$store.state.UserAccessManagementStore.loading\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      return val || this.close()\n    },\n    dialogDelete(val) {\n      return val || this.closeDelete()\n    },\n  },\n  created() {\n    this.$store.dispatch('UserAccessManagementStore/getRoles')\n  },\n  methods: {\n    editItem(item) {\n      this.editedIndex = this.roles.indexOf(item)\n      this.editedItem = { ...item }\n      this.dialog = true\n    },\n\n    deleteItem(item) {\n      this.editedIndex = this.roles.indexOf(item)\n      this.editedItem = { ...item }\n      this.dialogDelete = true\n    },\n\n    deleteItemConfirm() {\n      this.roles.splice(this.editedIndex, 1)\n      this.closeDelete()\n    },\n\n    close() {\n      this.dialog = false\n      this.$nextTick(() => {\n        this.editedItem = { ...this.defaultItem }\n        this.editedIndex = -1\n      })\n    },\n\n    closeDelete() {\n      this.dialogDelete = false\n      this.$nextTick(() => {\n        this.editedItem = { ...this.defaultItem }\n        this.editedIndex = -1\n      })\n    },\n\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.roles[this.editedIndex], this.editedItem)\n      } else {\n        this.roles.push(this.editedItem)\n      }\n      this.close()\n    },\n  },\n}\n</script>\n"]}]}