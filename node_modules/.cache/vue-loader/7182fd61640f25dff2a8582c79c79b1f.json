{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/PurchaseOrderListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/PurchaseOrderListTable.vue","mtime":1659636479927},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWRpQmFsbG90UmVjb3VudE91dGxpbmUsIG1kaURlbGV0ZUNpcmNsZX0gZnJvbSAnQG1kaS9qcycKaW1wb3J0IHsKICBHRVRfUFVSQ0hBU0VfT1JERVJTLAogIENMT1NFX1BVUkNIQVNFX09SREVSLAp9IGZyb20gJ0Avc3RvcmUvYWN0aW9ucy50eXBlJwppbXBvcnQgewogIHJlZiwgbmV4dFRpY2ssIGNvbXB1dGVkLCBvbk1vdW50ZWQsCn0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwoKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwKCkgewogICAgY29uc3Qgc2VhcmNoID0gcmVmKCcnKQogICAgY29uc3QgZGlhbG9nRGVsZXRlID0gcmVmKGZhbHNlKQogICAgY29uc3QgaGVhZGVycyA9IHJlZihbCiAgICAgIHsKICAgICAgICB0ZXh0OiAnTnVtYmVyJywKICAgICAgICBhbGlnbjogJ3N0YXJ0JywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgdmFsdWU6ICdudW1iZXInLAogICAgICB9LAogICAgICB7dGV4dDogJ0Rlc2NyaXB0aW9uJywgdmFsdWU6ICdkZXNjcmlwdGlvbid9LAogICAgICB7dGV4dDogJ1N0YXR1cycsIHZhbHVlOiAnc3RhdHVzJywgYWxpZ246ICdjZW50ZXInfSwKICAgICAge3RleHQ6ICdDaGFuZ2UgdG8gTmV4dCBTdGF0dXMnLCB2YWx1ZTogJ2FjdGlvbnMnLCBhbGlnbjogJ2NlbnRlcicsIHNvcnRhYmxlOiBmYWxzZX0sCiAgICBdKQoKICAgIGNvbnN0IGRlZmF1bHRJdGVtID0gcmVmKHsKICAgICAgbnVtYmVyOiAnJywKICAgICAgY29udGFpbmVyX251bWJlcjogJycsCiAgICAgIHN0YXR1czogJycsCiAgICAgIHBhaWRfYW1vdW50OiAnJywKICAgICAgYW1vdW50OiAnJywKICAgICAgcGF5bWVudF9tZXRob2Q6ICcnLAogICAgICByZWZ1bmRlZF9hdDogJycsCiAgICAgIHBhaWRfYXQ6ICcnLAogICAgfSkKICAgIGNvbnN0IGRlbGV0ZWRJbmRleCA9IHJlZigtMSkKICAgIGNvbnN0IGRlbGV0ZWRJdGVtID0gcmVmKHsKICAgICAgbmFtZTogJycsCiAgICAgIHNrdTogJycsCiAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgaW5fc3RvY2s6ICcnLAogICAgfSkKCiAgICBjb25zdCBwdXJjaGFzZU9yZGVycyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLmdldHRlcnMucHVyY2hhc2VPcmRlcnMpCiAgICBjb25zdCBwdXJjaGFzZU9yZGVyID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuZ2V0dGVycy5wdXJjaGFzZU9yZGVyKQogICAgY29uc3QgZXJyb3JzID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuZ2V0dGVycy5lcnJvcnMpCiAgICBjb25zdCBsb2FkaW5nID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuZ2V0dGVycy5sb2FkaW5nKQoKICAgIGNvbnN0IGluaXRpYWxpemUgPSAoKSA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKEdFVF9QVVJDSEFTRV9PUkRFUlMpCiAgICB9CgogICAgY29uc3Qgc3RhdHVzQ29sb3IgPSB7CiAgICAgIC8qIGVzbGludC1kaXNhYmxlIGtleS1zcGFjaW5nICovCiAgICAgIHBpZXJfdG9fd2FyZWhvdXNlOiAnaW5mbycsCiAgICAgIGFwcHJvdmVkOiAnc3VjY2VzcycsCiAgICAgIHJlY2VpdmVkOiAncHJpbWFyeScsCiAgICAgIHBlbmRpbmdfYXBwcm92YWw6ICdlcnJvcicsCiAgICAgIGFycml2ZWQ6ICdzdWNjZXNzJywKICAgICAgZm9yX2Fycml2YWw6ICdpbmZvJywKICAgICAgLyogZXNsaW50LWVuYWJsZSBrZXktc3BhY2luZyAqLwogICAgfQoKICAgIGNvbnN0IHN0YXR1cyA9IHsKICAgICAgcGVuZGluZ19hcHByb3ZhbDogJ05FRURTIEFQUFJPVkFMJywKICAgICAgcGllcl90b193YXJlaG91c2U6ICdQSUVSIFRPIFdBUkVIT1VTRScsCiAgICAgIGFycml2ZWQ6ICdBUlJJVkVEIFRPIFdBUkVIT1VTRScsCiAgICAgIGFwcHJvdmVkOiAnUE8gQVBQUk9WRUQnLAogICAgICBmb3JfYXJyaXZhbDogJ0FSUklWSU5HIFRPIFdBUkVIT1VTRScsCiAgICB9CgogICAgY29uc3QgZGVsZXRlSXRlbSA9IGl0ZW0gPT4gewogICAgICBkZWxldGVkSW5kZXgudmFsdWUgPSBwdXJjaGFzZU9yZGVycy52YWx1ZS5pbmRleE9mKGl0ZW0pCiAgICAgIGRlbGV0ZWRJdGVtLnZhbHVlID0gey4uLml0ZW19CiAgICAgIGRpYWxvZ0RlbGV0ZS52YWx1ZSA9IHRydWUKICAgIH0KCiAgICBjb25zdCBjbG9zZURlbGV0ZSA9ICgpID0+IHsKICAgICAgZGlhbG9nRGVsZXRlLnZhbHVlID0gZmFsc2UKICAgICAgbmV4dFRpY2soKCkgPT4gewogICAgICAgIGRlbGV0ZWRJdGVtLnZhbHVlID0gey4uLmRlZmF1bHRJdGVtLnZhbHVlfQogICAgICAgIGRlbGV0ZWRJbmRleC52YWx1ZSA9IC0xCiAgICAgIH0pCiAgICB9CgogICAgY29uc3QgZGVsZXRlSXRlbUNvbmZpcm0gPSAoKSA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKENMT1NFX1BVUkNIQVNFX09SREVSLCBkZWxldGVkSXRlbS52YWx1ZSkudGhlbigoKSA9PiB7CiAgICAgICAgcHVyY2hhc2VPcmRlcnMudmFsdWUuc3BsaWNlKGRlbGV0ZWRJbmRleC52YWx1ZSwgMSkKICAgICAgICBjbG9zZURlbGV0ZSgpCiAgICAgIH0pCiAgICB9CgogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgaW5pdGlhbGl6ZSgpCiAgICB9KQoKICAgIHJldHVybiB7CiAgICAgIHN0YXR1c0NvbG9yLAogICAgICBzdGF0dXMsCiAgICAgIG1kaUJhbGxvdFJlY291bnRPdXRsaW5lLAogICAgICBtZGlEZWxldGVDaXJjbGUsCiAgICAgIGRlZmF1bHRJdGVtLAogICAgICBoZWFkZXJzLAogICAgICBkaWFsb2dEZWxldGUsCiAgICAgIHNlYXJjaCwKICAgICAgcHVyY2hhc2VPcmRlcnMsCiAgICAgIHB1cmNoYXNlT3JkZXIsCiAgICAgIGVycm9ycywKICAgICAgZGVsZXRlSXRlbSwKICAgICAgZGVsZXRlSXRlbUNvbmZpcm0sCiAgICAgIGNsb3NlRGVsZXRlLAogICAgICBpbml0aWFsaXplLAogICAgICBkZWxldGVkSXRlbSwKICAgICAgZGVsZXRlZEluZGV4LAogICAgICBsb2FkaW5nLAogICAgfQogIH0sCn0K"},{"version":3,"sources":["PurchaseOrderListTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PurchaseOrderListTable.vue","sourceRoot":"src/views/pages/purchase-orders","sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"purchaseOrders\"\n      sort-by=\"name\"\n      class=\"elevation-1 font-weight-black\"\n      :search=\"search\"\n      :loading=\"loading\"\n    >\n      <template #item.name=\"{ item }\">\n        <router-link :to=\"{ name: 'purchase-order', params: { id: item.number } }\">\n          {{ item.number }}\n        </router-link>\n      </template>\n\n      <template v-slot:top>\n        <v-toolbar\n          color=\"teal\"\n          outlined\n        >\n          <v-toolbar-title class=\"font-weight-black text-uppercase\">Purchase Orders\n          </v-toolbar-title>\n          <v-divider\n            class=\"mx-4\"\n            inset\n            vertical\n          ></v-divider>\n          <v-spacer></v-spacer>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n            class=\"mr-4\"\n          ></v-text-field>\n          <router-link :to=\"{ name: 'create-purchase-order' }\">\n            <v-btn\n              color=\"primary\"\n              dark\n              class=\"mb-2 font-weight-black\"\n            >\n              Create a Purchase Order\n            </v-btn>\n          </router-link>\n          <v-dialog\n            v-model=\"dialogDelete\"\n            max-width=\"500px\"\n          >\n            <v-card>\n              <v-card-title class=\"text-h3\">\n                Are you sure you want to delete this Purchase Order?\n              </v-card-title>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"closeDelete\"\n                >\n                  Cancel\n                </v-btn>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"deleteItemConfirm\"\n                >\n                  OK\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template #[`item.status`]=\"{item}\">\n        <div class=\"d-flex justify-center\">\n          <v-chip\n            small\n            :class=\"`${statusColor[item.status]}--text`\"\n            class=\"v-chip-light-bg text-center\"\n          >\n            {{ status[item.status] }}\n          </v-chip>\n        </div>\n\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <div class=\"d-flex justify-center\">\n          <router-link v-if=\"item.status == 'pending_approval'\"\n                       :to=\"{ name: 'approve-purchase-order', params: { id: item.id } }\">\n            <v-icon\n              large\n              class=\"mr-2\"\n            >\n              {{ mdiBallotRecountOutline }}\n            </v-icon>\n          </router-link>\n          <router-link v-if=\"item.status == 'approved'\"\n                       :to=\"{ name: 'in-transit-purchase-order', params: { id: item.id } }\">\n            <v-icon\n              large\n              class=\"mr-2\"\n            >\n              {{ mdiBallotRecountOutline }}\n            </v-icon>\n          </router-link>\n          <router-link v-if=\"item.status == 'pier_to_warehouse'\"\n                       :to=\"{ name: 'arrival-purchase-order', params: { id: item.id } }\">\n            <v-icon\n              large\n              class=\"mr-2\"\n            >\n              {{ mdiBallotRecountOutline }}\n            </v-icon>\n          </router-link>\n        </div>\n      </template>\n      <template v-slot:no-data>\n        <v-btn\n          color=\"primary\"\n          @click=\"initialize\"\n        >\n          Reset\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport {mdiBallotRecountOutline, mdiDeleteCircle} from '@mdi/js'\nimport {\n  GET_PURCHASE_ORDERS,\n  CLOSE_PURCHASE_ORDER,\n} from '@/store/actions.type'\nimport {\n  ref, nextTick, computed, onMounted,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  setup() {\n    const search = ref('')\n    const dialogDelete = ref(false)\n    const headers = ref([\n      {\n        text: 'Number',\n        align: 'start',\n        sortable: false,\n        value: 'number',\n      },\n      {text: 'Description', value: 'description'},\n      {text: 'Status', value: 'status', align: 'center'},\n      {text: 'Change to Next Status', value: 'actions', align: 'center', sortable: false},\n    ])\n\n    const defaultItem = ref({\n      number: '',\n      container_number: '',\n      status: '',\n      paid_amount: '',\n      amount: '',\n      payment_method: '',\n      refunded_at: '',\n      paid_at: '',\n    })\n    const deletedIndex = ref(-1)\n    const deletedItem = ref({\n      name: '',\n      sku: '',\n      description: '',\n      in_stock: '',\n    })\n\n    const purchaseOrders = computed(() => store.getters.purchaseOrders)\n    const purchaseOrder = computed(() => store.getters.purchaseOrder)\n    const errors = computed(() => store.getters.errors)\n    const loading = computed(() => store.getters.loading)\n\n    const initialize = () => {\n      store.dispatch(GET_PURCHASE_ORDERS)\n    }\n\n    const statusColor = {\n      /* eslint-disable key-spacing */\n      pier_to_warehouse: 'info',\n      approved: 'success',\n      received: 'primary',\n      pending_approval: 'error',\n      arrived: 'success',\n      for_arrival: 'info',\n      /* eslint-enable key-spacing */\n    }\n\n    const status = {\n      pending_approval: 'NEEDS APPROVAL',\n      pier_to_warehouse: 'PIER TO WAREHOUSE',\n      arrived: 'ARRIVED TO WAREHOUSE',\n      approved: 'PO APPROVED',\n      for_arrival: 'ARRIVING TO WAREHOUSE',\n    }\n\n    const deleteItem = item => {\n      deletedIndex.value = purchaseOrders.value.indexOf(item)\n      deletedItem.value = {...item}\n      dialogDelete.value = true\n    }\n\n    const closeDelete = () => {\n      dialogDelete.value = false\n      nextTick(() => {\n        deletedItem.value = {...defaultItem.value}\n        deletedIndex.value = -1\n      })\n    }\n\n    const deleteItemConfirm = () => {\n      store.dispatch(CLOSE_PURCHASE_ORDER, deletedItem.value).then(() => {\n        purchaseOrders.value.splice(deletedIndex.value, 1)\n        closeDelete()\n      })\n    }\n\n    onMounted(() => {\n      initialize()\n    })\n\n    return {\n      statusColor,\n      status,\n      mdiBallotRecountOutline,\n      mdiDeleteCircle,\n      defaultItem,\n      headers,\n      dialogDelete,\n      search,\n      purchaseOrders,\n      purchaseOrder,\n      errors,\n      deleteItem,\n      deleteItemConfirm,\n      closeDelete,\n      initialize,\n      deletedItem,\n      deletedIndex,\n      loading,\n    }\n  },\n}\n</script>\n"]}]}