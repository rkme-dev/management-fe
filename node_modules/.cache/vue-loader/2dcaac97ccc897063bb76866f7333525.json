{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/component/PurchaseOrderAddSelector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/component/PurchaseOrderAddSelector.vue","mtime":1661667901199},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cmVmLCB3YXRjaCwgcmVhY3RpdmUsIGNvbXB1dGVkfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaS9kaXN0L3Z1ZS1jb21wb3NpdGlvbi1hcGknCgppbXBvcnQgewogIG1kaVBsdXMKfSBmcm9tICdAbWRpL2pzJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpdGVtTnVtYmVyOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMCwKICAgIH0sCiAgICBwcm9kdWN0RHJvcGRvd246IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLAogICAgfSwKICAgIGZvcm1TdWJtaXQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogIH0sCiAgc2V0dXAocHJvcHMsIHtlbWl0fSkgewogICAgY29uc3QgZm9ybVN1Ym1pc3Npb24gPSBjb21wdXRlZCgoKSA9PiBwcm9wcy5mb3JtU3VibWl0KQogICAgY29uc3QgcHJvZHVjdCA9IHJlYWN0aXZlKHtwcm9kdWN0X2lkOiBudWxsLCBxdWFudGl0eTogbnVsbH0pCiAgICBjb25zdCBwcm9kdWN0U2VsZWN0aW9uID0gcmVmKFtdKQogICAgY29uc3QgaXNEaXNhYmxlZCA9IHJlZih0cnVlKQogICAgY29uc3QgZXJyb3JzID0gcmVhY3RpdmUoe3F1YW50aXR5OiAnJ30pCgogICAgY29uc3QgaGFuZGxlSXNOdW1iZXIgPSAoZXZ0KSA9PiB7CiAgICAgIGV2dCA9IChldnQpID8gZXZ0IDogd2luZG93LmV2ZW50OwogICAgICBjb25zdCBjb2RlID0gKGV2dC53aGljaCkgPyBldnQud2hpY2ggOiBldnQua2V5Q29kZTsKICAgICAgaWYgKChjb2RlID4gMzEgJiYgKGNvZGUgPCA0OCB8fCBjb2RlID4gNTcpKSAmJiBjb2RlICE9PSA0NikgewogICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgfQoKICAgIC8vIGRpc2FibGUgaXRlbSBpbiBkcm9wZG93bgogICAgY29uc3QgaGFuZGxlRGlzYWJsZWRJdGVtID0gaXRlbSA9PiB7CiAgICAgIHJldHVybiBpdGVtLmRpc2FibGVkID8gdHJ1ZSA6IGZhbHNlCiAgICB9CgoKICAgIHdhdGNoKAogICAgICBwcm9kdWN0LAogICAgICAoKSA9PiB7CiAgICAgICAgaWYgKHByb2R1Y3QucHJvZHVjdF9pZCAmJiBwcm9kdWN0LnF1YW50aXR5KSBpc0Rpc2FibGVkLnZhbHVlID0gZmFsc2UKICAgICAgICBlbHNlIGlzRGlzYWJsZWQudmFsdWUgPSB0cnVlCgogICAgICAgIGVtaXQoJ3NlbGVjdGVkUHJvZHVjdCcsIHsuLi5wcm9kdWN0LCBxdWFudGl0eTogTnVtYmVyKHByb2R1Y3QucXVhbnRpdHkpfSwgcHJvcHMuaXRlbU51bWJlcikKICAgICAgfSwKICAgICkKCiAgICB3YXRjaCgKICAgICAgZm9ybVN1Ym1pc3Npb24sCiAgICAgIHZhbHVlID0+IHsKICAgICAgICBpZiAodmFsdWUgPT09IHRydWUpIHsKICAgICAgICAgIGVycm9ycy52YWx1ZSA9IHtwcm9kdWN0OiBudWxsLCBxdWFudGl0eTogbnVsbH0KCiAgICAgICAgICBpZiAocHJvZHVjdC5wcm9kdWN0X2lkID09PSBudWxsKSB7CiAgICAgICAgICAgIGVycm9ycy5wcm9kdWN0ID0gJ1BsZWFzZSBzZWxlY3QgYSBwcm9kdWN0LicKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocHJvZHVjdC5xdWFudGl0eSA9PT0gbnVsbCkgewogICAgICAgICAgICBlcnJvcnMucXVhbnRpdHkgPSAnUXVhbnRpdHkgaXMgcmVxdWlyZWQuJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICkKCiAgICByZXR1cm4gewogICAgICBwcm9kdWN0LAogICAgICBwcm9kdWN0U2VsZWN0aW9uLAogICAgICBpc0Rpc2FibGVkLAogICAgICBpY29uczogewogICAgICAgIG1kaVBsdXMsCiAgICAgIH0sCiAgICAgIGhhbmRsZUlzTnVtYmVyLAogICAgICBoYW5kbGVEaXNhYmxlZEl0ZW0sCiAgICAgIGVycm9ycywKICAgIH0KICB9Cn0K"},{"version":3,"sources":["PurchaseOrderAddSelector.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PurchaseOrderAddSelector.vue","sourceRoot":"src/views/pages/purchase-orders/component","sourcesContent":["<template>\n  <v-card>\n    <v-row>\n      <v-col cols=\"7\">\n        <v-select\n          v-model=\"product.product_id\"\n          label=\"Select a Product\"\n          item-text=\"name\"\n          item-value=\"id\"\n          dense\n          :items=\"productDropdown\"\n          :item-disabled=\"handleDisabledItem\"\n          :error-messages=\"errors.product\"\n        ></v-select>\n      </v-col>\n\n      <v-col cols=\"4\">\n        <v-text-field\n          v-model=\"product.quantity\"\n          label=\"Quantity\"\n          hide-details=\"auto\"\n          dense\n          :error-messages=\"errors.quantity\"\n          @keypress=\"handleIsNumber\"\n        />\n      </v-col>\n\n      <v-col cols=\"1\">\n        <v-btn\n          class=\"mx-2\"\n          x-small\n          fab\n          :disabled=\"isDisabled\"\n          @click=\"$emit('addProductRow')\"\n        >\n          <v-icon dark>\n            {{ icons.mdiPlus }}\n          </v-icon>\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-card>\n</template>\n\n<script>\nimport {ref, watch, reactive, computed} from '@vue/composition-api/dist/vue-composition-api'\n\nimport {\n  mdiPlus\n} from '@mdi/js'\n\nexport default {\n  props: {\n    itemNumber: {\n      type: Number,\n      default: 0,\n    },\n    productDropdown: {\n      type: Array,\n      default: () => [],\n    },\n    formSubmit: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props, {emit}) {\n    const formSubmission = computed(() => props.formSubmit)\n    const product = reactive({product_id: null, quantity: null})\n    const productSelection = ref([])\n    const isDisabled = ref(true)\n    const errors = reactive({quantity: ''})\n\n    const handleIsNumber = (evt) => {\n      evt = (evt) ? evt : window.event;\n      const code = (evt.which) ? evt.which : evt.keyCode;\n      if ((code > 31 && (code < 48 || code > 57)) && code !== 46) {\n        evt.preventDefault()\n      } else {\n        return true\n      }\n    }\n\n    // disable item in dropdown\n    const handleDisabledItem = item => {\n      return item.disabled ? true : false\n    }\n\n\n    watch(\n      product,\n      () => {\n        if (product.product_id && product.quantity) isDisabled.value = false\n        else isDisabled.value = true\n\n        emit('selectedProduct', {...product, quantity: Number(product.quantity)}, props.itemNumber)\n      },\n    )\n\n    watch(\n      formSubmission,\n      value => {\n        if (value === true) {\n          errors.value = {product: null, quantity: null}\n\n          if (product.product_id === null) {\n            errors.product = 'Please select a product.'\n          }\n\n          if (product.quantity === null) {\n            errors.quantity = 'Quantity is required.'\n          }\n        }\n      },\n    )\n\n    return {\n      product,\n      productSelection,\n      isDisabled,\n      icons: {\n        mdiPlus,\n      },\n      handleIsNumber,\n      handleDisabledItem,\n      errors,\n    }\n  }\n}\n</script>\n"]}]}