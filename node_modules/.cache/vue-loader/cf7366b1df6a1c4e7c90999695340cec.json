{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/drs/components/DrListSelection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/drs/components/DrListSelection.vue","mtime":1664972738676},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1662812531040},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1662812531113},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1662812546066}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgY29tcHV0ZWQsIHJlZiwgdG9SZWYsIHdhdGNoLAp9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRHJMaXN0U2VsZWN0aW9uJywKICBwcm9wczogewogICAgY3VzdG9tZXJJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgY29uc3QgaWQgPSB0b1JlZihwcm9wcywgJ2N1c3RvbWVySWQnKQogICAgc3RvcmUuZGlzcGF0Y2goJ1NhbGVzRHJTdG9yZS9kckxpc3RCeUN1c3RvbWVyJywgaWQudmFsdWUpCiAgICBjb25zdCBzZWxlY3RlZERycyA9IHJlZihbXSkKICAgIGNvbnN0IGxpc3QgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5zdGF0ZS5TYWxlc0RyU3RvcmUuaXRlbXMpCiAgICBjb25zdCBsb2FkaW5nID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuU2FsZXNEclN0b3JlLmxvYWRpbmcpCiAgICBjb25zdCBzaG93U3VibWl0ID0gcmVmKGZhbHNlKQogICAgY29uc3Qgc2VhcmNoID0gcmVmKCkKCiAgICB3YXRjaChzZWxlY3RlZERycywgdmFsdWUgPT4gewogICAgICBsZXQgY291bnRlciA9IDAKCiAgICAgIHZhbHVlLmZvckVhY2goZHIgPT4gewogICAgICAgIGlmIChkci5hbW91bnRfdG9fcGF5ID4gMCkgewogICAgICAgICAgY291bnRlciArPSAxCiAgICAgICAgfQogICAgICB9KQoKICAgICAgc2hvd1N1Ym1pdC52YWx1ZSA9IGNvdW50ZXIgPT09IHZhbHVlLmxlbmd0aCAmJiB2YWx1ZS5sZW5ndGggIT09IDAKICAgIH0pCgogICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICBlbWl0KCdzZWxlY3RlZERycycsIHNlbGVjdGVkRHJzLnZhbHVlKQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaCwKICAgICAgc2hvd1N1Ym1pdCwKICAgICAgc3VibWl0LAogICAgICBsaXN0LAogICAgICBsb2FkaW5nLAogICAgICBzZWxlY3RlZERycywKICAgICAgaGVhZGVyczogWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICdEYXRlJywKICAgICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAgdmFsdWU6ICdjcmVhdGVkX2F0JywKICAgICAgICB9LAogICAgICAgIHsgdGV4dDogJ0RSIE5vJywgdmFsdWU6ICdzYWxlc19kcl9udW1iZXInIH0sCiAgICAgICAgeyB0ZXh0OiAnQmFsYW5jZScsIHZhbHVlOiAnYW1vdW50JyB9LAogICAgICAgIHsgdGV4dDogJ1RvIFBheScsIHZhbHVlOiAnYW1vdW50X3RvX3BheScgfSwKICAgICAgXSwKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["DrListSelection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DrListSelection.vue","sourceRoot":"src/views/pages/sales/drs/components","sourcesContent":["<template>\n  <v-card>\n    <v-card-text>\n      <v-row>\n        <v-col cols=\"12\">\n          <v-data-table\n            v-model=\"selectedDrs\"\n            :items=\"list\"\n            :headers=\"headers\"\n            show-select\n            :loading=\"loading\"\n            :search=\"search\"\n          >\n            <template v-slot:top>\n              <v-toolbar\n                color=\"info\"\n                outlined\n              >\n                <v-toolbar-title>Sales DR List</v-toolbar-title>\n                <v-divider\n                  class=\"mx-4\"\n                  inset\n                  vertical\n                ></v-divider>\n                <v-spacer></v-spacer>\n                <v-text-field\n                  v-model=\"search\"\n                  append-icon=\"mdi-magnify\"\n                  label=\"Search\"\n                  single-line\n                  hide-details\n                  class=\"mr-4\"\n                ></v-text-field>\n              </v-toolbar>\n            </template>\n            <template #item.amount=\"{ item }\">\n              <v-currency-field\n                v-model=\"item.amount\"\n                disabled\n                prefix=\"PHP\"\n                class=\"text-green\"\n              >\n              </v-currency-field>\n            </template>\n            <template #item.amount_to_pay=\"{ item }\">\n              <v-currency-field\n                v-model=\"item.amount_to_pay\"\n                prefix=\"PHP\"\n                class=\"text-green\"\n              >\n              </v-currency-field>\n            </template>\n            <template #footer>\n              <v-row class=\"mb-2 mt-2\">\n                <v-col cols=\"8\"></v-col>\n                <v-col\n                  cols=\"2\"\n                  class=\"ml-auto\"\n                >\n                  <v-btn\n                    v-if=\"showSubmit\"\n                    color=\"info\"\n                    class=\"\"\n                    @click=\"submit\"\n                  >\n                    Submit\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </template>\n          </v-data-table>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport {\n  computed, ref, toRef, watch,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  name: 'DrListSelection',\n  props: {\n    customerId: {\n      type: Number,\n      required: true,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const id = toRef(props, 'customerId')\n    store.dispatch('SalesDrStore/drListByCustomer', id.value)\n    const selectedDrs = ref([])\n    const list = computed(() => store.state.SalesDrStore.items)\n    const loading = computed(() => store.state.SalesDrStore.loading)\n    const showSubmit = ref(false)\n    const search = ref()\n\n    watch(selectedDrs, value => {\n      let counter = 0\n\n      value.forEach(dr => {\n        if (dr.amount_to_pay > 0) {\n          counter += 1\n        }\n      })\n\n      showSubmit.value = counter === value.length && value.length !== 0\n    })\n\n    const submit = () => {\n      emit('selectedDrs', selectedDrs.value)\n    }\n\n    return {\n      search,\n      showSubmit,\n      submit,\n      list,\n      loading,\n      selectedDrs,\n      headers: [\n        {\n          text: 'Date',\n          align: 'start',\n          sortable: false,\n          value: 'created_at',\n        },\n        { text: 'DR No', value: 'sales_dr_number' },\n        { text: 'Balance', value: 'amount' },\n        { text: 'To Pay', value: 'amount_to_pay' },\n      ],\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}