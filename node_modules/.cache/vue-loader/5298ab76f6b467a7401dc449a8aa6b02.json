{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/products/ProductsListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/products/ProductsListTable.vue","mtime":1660820917021},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1kaUFjY291bnRFZGl0LCBtZGlEZWxldGVDaXJjbGUgfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgewogIEdFVF9QUk9EVUNUUywKICBSRU1PVkVfUFJPRFVDVCwKfSBmcm9tICdAL3N0b3JlL2FjdGlvbnMudHlwZScKaW1wb3J0IHsKICByZWYsIG5leHRUaWNrLCBjb21wdXRlZCwgb25Nb3VudGVkLAp9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cCgpIHsKICAgIGNvbnN0IHNlYXJjaCA9IHJlZignJykKICAgIGNvbnN0IGRpYWxvZ0RlbGV0ZSA9IHJlZihmYWxzZSkKICAgIGNvbnN0IGhlYWRlcnMgPSByZWYoWwogICAgICB7CiAgICAgICAgdGV4dDogJ05hbWUnLAogICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogJ25hbWUnLAogICAgICB9LAogICAgICB7CiAgICAgICAgdGV4dDogJ0l0ZW0gTnVtYmVyJywKICAgICAgICBhbGlnbjogJ3N0YXJ0JywKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogJ3Byb2R1Y3RfbnVtYmVyJywKICAgICAgfSwKICAgICAgeyB0ZXh0OiAnU2t1JywgdmFsdWU6ICdza3UnIH0sCiAgICAgIHsgdGV4dDogJ0l0ZW0gUGVyIEJveCcsIHZhbHVlOiAnaXRlbXNfcGVyX2JveCcgfSwKICAgIF0pCgogICAgY29uc3QgZGVmYXVsdEl0ZW0gPSByZWYoewogICAgICBuYW1lOiAnJywKICAgICAgc2t1OiAnJywKICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICBpbl9zdG9jazogJycsCiAgICB9KQogICAgY29uc3QgZGVsZXRlZEluZGV4ID0gcmVmKC0xKQogICAgY29uc3QgZGVsZXRlZEl0ZW0gPSByZWYoewogICAgICBuYW1lOiAnJywKICAgICAgc2t1OiAnJywKICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICBpbl9zdG9jazogJycsCiAgICB9KQoKICAgIGNvbnN0IHByb2R1Y3RzID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuZ2V0dGVycy5wcm9kdWN0cykKICAgIGNvbnN0IHByb2R1Y3QgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5nZXR0ZXJzLnByb2R1Y3QpCiAgICBjb25zdCBlcnJvcnMgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5nZXR0ZXJzLmVycm9ycykKICAgIGNvbnN0IGxvYWRpbmcgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5nZXR0ZXJzLmxvYWRpbmcpCgogICAgY29uc3QgaW5pdGlhbGl6ZSA9ICgpID0+IHsKICAgICAgc3RvcmUuZGlzcGF0Y2goR0VUX1BST0RVQ1RTKQogICAgfQoKICAgIGNvbnN0IGRlbGV0ZUl0ZW0gPSBpdGVtID0+IHsKICAgICAgZGVsZXRlZEluZGV4LnZhbHVlID0gcHJvZHVjdHMudmFsdWUuaW5kZXhPZihpdGVtKQogICAgICBkZWxldGVkSXRlbS52YWx1ZSA9IHsgLi4uaXRlbSB9CiAgICAgIGRpYWxvZ0RlbGV0ZS52YWx1ZSA9IHRydWUKICAgIH0KCiAgICBjb25zdCBjbG9zZURlbGV0ZSA9ICgpID0+IHsKICAgICAgZGlhbG9nRGVsZXRlLnZhbHVlID0gZmFsc2UKICAgICAgbmV4dFRpY2soKCkgPT4gewogICAgICAgIGRlbGV0ZWRJdGVtLnZhbHVlID0geyAuLi5kZWZhdWx0SXRlbS52YWx1ZSB9CiAgICAgICAgZGVsZXRlZEluZGV4LnZhbHVlID0gLTEKICAgICAgfSkKICAgIH0KCiAgICBjb25zdCBkZWxldGVJdGVtQ29uZmlybSA9ICgpID0+IHsKICAgICAgc3RvcmUuZGlzcGF0Y2goUkVNT1ZFX1BST0RVQ1QsIGRlbGV0ZWRJdGVtLnZhbHVlKS50aGVuKCgpID0+IHsKICAgICAgICBwcm9kdWN0cy52YWx1ZS5zcGxpY2UoZGVsZXRlZEluZGV4LnZhbHVlLCAxKQogICAgICAgIGNsb3NlRGVsZXRlKCkKICAgICAgfSkKICAgIH0KCiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBpbml0aWFsaXplKCkKICAgIH0pCgogICAgcmV0dXJuIHsKICAgICAgbWRpQWNjb3VudEVkaXQsCiAgICAgIG1kaURlbGV0ZUNpcmNsZSwKICAgICAgZGVmYXVsdEl0ZW0sCiAgICAgIGhlYWRlcnMsCiAgICAgIGRpYWxvZ0RlbGV0ZSwKICAgICAgc2VhcmNoLAogICAgICBwcm9kdWN0cywKICAgICAgcHJvZHVjdCwKICAgICAgZXJyb3JzLAogICAgICBkZWxldGVJdGVtLAogICAgICBkZWxldGVJdGVtQ29uZmlybSwKICAgICAgY2xvc2VEZWxldGUsCiAgICAgIGluaXRpYWxpemUsCiAgICAgIGRlbGV0ZWRJdGVtLAogICAgICBkZWxldGVkSW5kZXgsCiAgICAgIGxvYWRpbmcsCiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["ProductsListTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductsListTable.vue","sourceRoot":"src/views/pages/products","sourcesContent":["<template>\n  <div>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"products\"\n      sort-by=\"name\"\n      class=\"elevation-1\"\n      :search=\"search\"\n      :loading=\"loading\"\n    >\n      <template #item.name=\"{ item }\">\n        <router-link :to=\"{ name: 'update-product', params: { id: item.id } }\">\n          {{ item.name }}\n        </router-link>\n      </template>\n      <template v-slot:top>\n        <v-toolbar\n          color=\"teal\"\n          outlined\n        >\n          <v-toolbar-title>Raw Materials</v-toolbar-title>\n          <v-divider\n            class=\"mx-4\"\n            inset\n            vertical\n          ></v-divider>\n          <v-spacer></v-spacer>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n            class=\"mr-4\"\n          ></v-text-field>\n          <router-link :to=\"{ name: 'create-product' }\">\n            <v-btn\n              color=\"primary\"\n              dark\n              class=\"mb-2\"\n            >\n              Add New Raw Material\n            </v-btn>\n          </router-link>\n          <v-dialog\n            v-model=\"dialogDelete\"\n            max-width=\"500px\"\n          >\n            <v-card>\n              <v-card-title class=\"text-h3\">\n                Are you sure you want to delete this client?\n              </v-card-title>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"closeDelete\"\n                >\n                  Cancel\n                </v-btn>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"deleteItemConfirm\"\n                >\n                  OK\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <router-link :to=\"{ name: 'update-product', params: { id: item.id } }\">\n          <v-icon\n            small\n            class=\"mr-2\"\n          >\n            {{ mdiAccountEdit }}\n          </v-icon>\n        </router-link>\n        <v-icon\n          small\n          @click=\"deleteItem(item)\"\n        >\n          {{ mdiDeleteCircle }}\n        </v-icon>\n      </template>\n      <template v-slot:no-data>\n        <v-btn\n          color=\"primary\"\n          @click=\"initialize\"\n        >\n          Reset\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport { mdiAccountEdit, mdiDeleteCircle } from '@mdi/js'\nimport {\n  GET_PRODUCTS,\n  REMOVE_PRODUCT,\n} from '@/store/actions.type'\nimport {\n  ref, nextTick, computed, onMounted,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  setup() {\n    const search = ref('')\n    const dialogDelete = ref(false)\n    const headers = ref([\n      {\n        text: 'Name',\n        align: 'start',\n        sortable: false,\n        value: 'name',\n      },\n      {\n        text: 'Item Number',\n        align: 'start',\n        sortable: true,\n        value: 'product_number',\n      },\n      { text: 'Sku', value: 'sku' },\n      { text: 'Item Per Box', value: 'items_per_box' },\n    ])\n\n    const defaultItem = ref({\n      name: '',\n      sku: '',\n      description: '',\n      in_stock: '',\n    })\n    const deletedIndex = ref(-1)\n    const deletedItem = ref({\n      name: '',\n      sku: '',\n      description: '',\n      in_stock: '',\n    })\n\n    const products = computed(() => store.getters.products)\n    const product = computed(() => store.getters.product)\n    const errors = computed(() => store.getters.errors)\n    const loading = computed(() => store.getters.loading)\n\n    const initialize = () => {\n      store.dispatch(GET_PRODUCTS)\n    }\n\n    const deleteItem = item => {\n      deletedIndex.value = products.value.indexOf(item)\n      deletedItem.value = { ...item }\n      dialogDelete.value = true\n    }\n\n    const closeDelete = () => {\n      dialogDelete.value = false\n      nextTick(() => {\n        deletedItem.value = { ...defaultItem.value }\n        deletedIndex.value = -1\n      })\n    }\n\n    const deleteItemConfirm = () => {\n      store.dispatch(REMOVE_PRODUCT, deletedItem.value).then(() => {\n        products.value.splice(deletedIndex.value, 1)\n        closeDelete()\n      })\n    }\n\n    onMounted(() => {\n      initialize()\n    })\n\n    return {\n      mdiAccountEdit,\n      mdiDeleteCircle,\n      defaultItem,\n      headers,\n      dialogDelete,\n      search,\n      products,\n      product,\n      errors,\n      deleteItem,\n      deleteItemConfirm,\n      closeDelete,\n      initialize,\n      deletedItem,\n      deletedIndex,\n      loading,\n    }\n  },\n}\n</script>\n"]}]}