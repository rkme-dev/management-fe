{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/user-access-management/roles/RoleForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/user-access-management/roles/RoleForm.vue","mtime":1659098301275},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgd2F0Y2gsCiAgb25Nb3VudGVkLAogIHJlZiwKICB0b1JlZiwKfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaS9kaXN0L3Z1ZS1jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7CiAgbWRpQWNjb3VudE91dGxpbmUsCiAgbWRpQ2VsbHBob25lLAogIG1kaUVtYWlsT3V0bGluZSwKICBtZGlMb2NrT3V0bGluZSwKfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgVXNlckFjY2Vzc01hbmFnZW1lbnRTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9Vc2VyQWNjZXNzTWFuYWdlbWVudFNlcnZpY2UnCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICByb2xlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgY29uc3Qgc2VydmljZSA9IG5ldyBVc2VyQWNjZXNzTWFuYWdlbWVudFNlcnZpY2UoKQogICAgY29uc3Qgcm9sZURhdGEgPSB0b1JlZihwcm9wcywgJ3JvbGUnKQogICAgY29uc3QgYWJpbGl0aWVzT3B0aW9ucyA9IHJlZihbXSkKICAgIGNvbnN0IGFiaWxpdGllc1NlbGVjdGVkID0gcmVmKFtdKQoKICAgIHdhdGNoKHJvbGVEYXRhLCB2YWx1ZSA9PiB7CiAgICAgIGFiaWxpdGllc1NlbGVjdGVkLnZhbHVlID0gdmFsdWUuYWJpbGl0aWVzLm1hcChhYmlsaXR5ID0+IGFiaWxpdHkuaWQpCiAgICB9KQoKICAgIG9uTW91bnRlZChhc3luYyAoKSA9PiB7CiAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0QWJpbGl0aWVzKHRydWUpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgYWJpbGl0aWVzT3B0aW9ucy52YWx1ZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIGFiaWxpdGllc1NlbGVjdGVkLnZhbHVlID0gcm9sZURhdGEudmFsdWUuYWJpbGl0aWVzLm1hcChhYmlsaXR5ID0+IGFiaWxpdHkuaWQpCiAgICAgICAgfSkKICAgIH0pCgogICAgY29uc3QgY2FuY2VsID0gKCkgPT4gewogICAgICBlbWl0KCdjbGlja2VkJywgZmFsc2UpCiAgICB9CgogICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICBzdG9yZS5kaXNwYXRjaCgnVXNlckFjY2Vzc01hbmFnZW1lbnRTdG9yZS91cGRhdGVSb2xlJywgewogICAgICAgIGlkOiByb2xlRGF0YS52YWx1ZS5pZCwKICAgICAgICBhYmlsaXRpZXM6IGFiaWxpdGllc1NlbGVjdGVkLnZhbHVlLAogICAgICB9KS50aGVuKAogICAgICAgICgpID0+IHsKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdVc2VyQWNjZXNzTWFuYWdlbWVudFN0b3JlL2dldFJvbGVzJykKICAgICAgICAgIGVtaXQoJ2NsaWNrZWQnLCBmYWxzZSkKICAgICAgICB9LAogICAgICApCiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgYWJpbGl0aWVzU2VsZWN0ZWQsCiAgICAgIGFiaWxpdGllc09wdGlvbnMsCiAgICAgIGNhbmNlbCwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlBY2NvdW50T3V0bGluZSwKICAgICAgICBtZGlFbWFpbE91dGxpbmUsCiAgICAgICAgbWRpQ2VsbHBob25lLAogICAgICAgIG1kaUxvY2tPdXRsaW5lLAogICAgICB9LAogICAgICByb2xlRGF0YSwKICAgICAgc3VibWl0LAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICB9LAogIG1ldGhvZHM6IHsKICB9LAp9Cg=="},{"version":3,"sources":["RoleForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoleForm.vue","sourceRoot":"src/views/pages/user-access-management/roles","sourcesContent":["<template>\n  <v-form>\n    <v-row>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Role Name</label>\n      </v-col>\n\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-text-field\n          id=\"firstnameHorizontalIcons\"\n          v-model=\"roleData.title\"\n          disabled\n          :prepend-inner-icon=\"icons.mdiAccountOutline\"\n          outlined\n          dense\n          placeholder=\"Role Name\"\n          hide-details\n        ></v-text-field>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        md=\"3\"\n      >\n        <label for=\"firstnameHorizontalIcons\">Abilities</label>\n      </v-col>\n\n      <v-col\n        cols=\"12\"\n        md=\"9\"\n      >\n        <v-treeview\n          v-model=\"abilitiesSelected\"\n          selectable\n          selected-color=\"primary\"\n          item-disabled=\"locked\"\n          item-key=\"id\"\n          item-text=\"name\"\n          item-children=\"abilities\"\n          :items=\"abilitiesOptions\"\n        ></v-treeview>\n      </v-col>\n      <v-col\n        offset-md=\"3\"\n        cols=\"12\"\n      >\n        <v-btn\n          color=\"primary\"\n          @click=\"submit\"\n        >\n          Submit\n        </v-btn>\n        <v-btn\n          type=\"reset\"\n          outlined\n          class=\"mx-2\"\n          @click=\"cancel\"\n        >\n          Cancel\n        </v-btn>\n      </v-col>\n    </v-row>\n  </v-form>\n</template>\n\n<script>\nimport {\n  watch,\n  onMounted,\n  ref,\n  toRef,\n} from '@vue/composition-api/dist/vue-composition-api'\nimport {\n  mdiAccountOutline,\n  mdiCellphone,\n  mdiEmailOutline,\n  mdiLockOutline,\n} from '@mdi/js'\nimport UserAccessManagementService from '@/service/UserAccessManagementService'\nimport store from '@/store'\n\nexport default {\n  props: {\n    role: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const service = new UserAccessManagementService()\n    const roleData = toRef(props, 'role')\n    const abilitiesOptions = ref([])\n    const abilitiesSelected = ref([])\n\n    watch(roleData, value => {\n      abilitiesSelected.value = value.abilities.map(ability => ability.id)\n    })\n\n    onMounted(async () => {\n      await service.getAbilities(true)\n        .then(response => {\n          abilitiesOptions.value = response.data\n          abilitiesSelected.value = roleData.value.abilities.map(ability => ability.id)\n        })\n    })\n\n    const cancel = () => {\n      emit('clicked', false)\n    }\n\n    const submit = () => {\n      store.dispatch('UserAccessManagementStore/updateRole', {\n        id: roleData.value.id,\n        abilities: abilitiesSelected.value,\n      }).then(\n        () => {\n          store.dispatch('UserAccessManagementStore/getRoles')\n          emit('clicked', false)\n        },\n      )\n    }\n\n    return {\n      abilitiesSelected,\n      abilitiesOptions,\n      cancel,\n      icons: {\n        mdiAccountOutline,\n        mdiEmailOutline,\n        mdiCellphone,\n        mdiLockOutline,\n      },\n      roleData,\n      submit,\n    }\n  },\n  computed: {\n  },\n  methods: {\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}