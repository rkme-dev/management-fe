{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/drs/SalesDrForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/drs/SalesDrForm.vue","mtime":1665318347235},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgY29tcHV0ZWQsIHJlZiwgdG9SZWYsIHdhdGNoLAp9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJwppbXBvcnQgewogIG1kaUluZm9ybWF0aW9uLAogIG1kaUFjY291bnRQbHVzT3V0bGluZSwKfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgQ3VzdG9tZXJGb3JtIGZyb20gJ0Avdmlld3MvcGFnZXMvbWFzdGVyLWZpbGVzL2N1c3RvbWVycy9DdXN0b21lckZvcm0udnVlJwppbXBvcnQgU2FsZXNPcmRlckl0ZW1zIGZyb20gJ0Avdmlld3MvcGFnZXMvc2FsZXMvZHJzL1NhbGVzT3JkZXJJdGVtcy52dWUnCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTYWxlc0RyRm9ybScsCiAgY29tcG9uZW50czogewogICAgQ3VzdG9tZXJGb3JtLAogICAgU2FsZXNPcmRlckl0ZW1zLAogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogKCgpID0+ICdDcmVhdGUnKSwKICAgIH0sCiAgICBpZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgY29uc3QgY3VzdG9tZXJNb2RhbCA9IHJlZihmYWxzZSkKICAgIGNvbnN0IG1vZGVEYXRhID0gdG9SZWYocHJvcHMsICdtb2RlJykKICAgIGNvbnN0IGRhdGFQcm9wID0gdG9SZWYocHJvcHMsICdkYXRhJykKICAgIGNvbnN0IGZvcm1EYXRhID0gcmVmKHsKICAgICAgZGF0ZU1vZGFsOiBmYWxzZSwKICAgICAgY3VzdG9tZXJfbmFtZTogbnVsbCwKICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsCiAgICAgIGRhdGVfcG9zdGVkOiBudWxsLAogICAgICBzYWxlc19vcmRlcl9udW1iZXI6IG51bGwsCiAgICAgIGRvY3VtZW50X2lkOiBudWxsLAogICAgICBhZGRyZXNzOiBudWxsLAogICAgICByZW1hcmtzOiBudWxsLAogICAgICBhcmVhOiBudWxsLAogICAgICBzYWxlc21hbl9pZF8xOiBudWxsLAogICAgICBzYWxlc21hbl9pZF8yOiBudWxsLAogICAgICB0ZXJtX2lkOiBudWxsLAogICAgICB2YXRfaWQ6IG51bGwsCiAgICAgIHNhbGVzX2RyX2l0ZW1zOiBbXSwKICAgIH0pCiAgICBjb25zdCBvcmRlckl0ZW1zID0gcmVmKFtdKQoKICAgIHN0b3JlLmRpc3BhdGNoKCdUZXJtU3RvcmUvbGlzdCcpCiAgICBzdG9yZS5kaXNwYXRjaCgnVmF0U3RvcmUvbGlzdCcpCiAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNtYW5TdG9yZS9saXN0JykKICAgIHN0b3JlLmRpc3BhdGNoKCdEb2N1bWVudFN0b3JlL2xpc3QnKQogICAgY29uc3QgdGVybXMgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5zdGF0ZS5UZXJtU3RvcmUudGVybXMpCiAgICBjb25zdCB2YXRzID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuVmF0U3RvcmUudmF0cykKICAgIGNvbnN0IGRvY3VtZW50cyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLkRvY3VtZW50U3RvcmUuZG9jdW1lbnRzLmZpbHRlcihkb2N1bWVudEl0ZW0gPT4gewogICAgICBpZiAoZG9jdW1lbnRJdGVtLm1vZHVsZSA9PT0gJ09yZGVycycpIHsKICAgICAgICBkb2N1bWVudEl0ZW0udGl0bGUgPSBgJHtkb2N1bWVudEl0ZW0uZG9jdW1lbnRfbmFtZX1gCgogICAgICAgIHJldHVybiBkb2N1bWVudEl0ZW0KICAgICAgfQogICAgfSkpCiAgICBjb25zdCB0eXBlcyA9IHJlZihbCiAgICAgICdSZWd1bGFyJywKICAgICAgJ0Rpc3RyaWJ1dG9yJywKICAgIF0pCgogICAgY29uc3QgZGF0ZVBvc3RlZCA9IHJlZihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSkKCiAgICBmb3JtRGF0YS52YWx1ZSA9IGRhdGFQcm9wLnZhbHVlID8/IGZvcm1EYXRhLnZhbHVlCgogICAgY29uc3QgZmV0Y2hPcmRlckl0ZW1zID0gaXRlbXMgPT4gewogICAgICBvcmRlckl0ZW1zLnZhbHVlID0gaXRlbXMKICAgIH0KCiAgICBpZiAobW9kZURhdGEudmFsdWUgPT09ICdFZGl0JykgewogICAgICBmb3JtRGF0YS52YWx1ZSA9IGRhdGFQcm9wLnZhbHVlCiAgICAgIGZvcm1EYXRhLnZhbHVlLmN1c3RvbWVyX25hbWUgPSBkYXRhUHJvcC52YWx1ZS5jdXN0b21lci5uYW1lCiAgICAgIGZvcm1EYXRhLnZhbHVlLmN1c3RvbWVyX2lkID0gZGF0YVByb3AudmFsdWUuY3VzdG9tZXIuaWQKICAgICAgZm9ybURhdGEudmFsdWUudHlwZSA9IGRhdGFQcm9wLnZhbHVlLmN1c3RvbWVyLnR5cGUKICAgICAgZm9ybURhdGEudmFsdWUuc2FsZXNfZHJfaXRlbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGFQcm9wLnZhbHVlLnNhbGVzX2RyX2l0ZW1zKSkKICAgICAgc3RvcmUuZGlzcGF0Y2goJ1NhbGVzT3JkZXJTdG9yZS9vcmRlckl0ZW1zJywgZGF0YVByb3AudmFsdWUuY3VzdG9tZXIuaWQpCiAgICB9IGVsc2UgewogICAgICBmb3JtRGF0YS52YWx1ZSA9IHsKICAgICAgICBkYXRlTW9kYWw6IGZhbHNlLAogICAgICAgIGN1c3RvbWVyX25hbWU6IG51bGwsCiAgICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsCiAgICAgICAgZGF0ZV9wb3N0ZWQ6IG51bGwsCiAgICAgICAgc2FsZXNfb3JkZXJfbnVtYmVyOiBudWxsLAogICAgICAgIGRvY3VtZW50X2lkOiBudWxsLAogICAgICAgIGFkZHJlc3M6IG51bGwsCiAgICAgICAgcmVtYXJrczogbnVsbCwKICAgICAgICBhcmVhOiBudWxsLAogICAgICAgIHNhbGVzbWFuX2lkXzE6IG51bGwsCiAgICAgICAgc2FsZXNtYW5faWRfMjogbnVsbCwKICAgICAgICB0ZXJtX2lkOiBudWxsLAogICAgICAgIHZhdF9pZDogbnVsbCwKICAgICAgfQoKICAgICAgb3JkZXJJdGVtcy52YWx1ZSA9IFtdCiAgICB9CgogICAgd2F0Y2goZGF0YVByb3AsICgpID0+IHsKICAgICAgaWYgKG1vZGVEYXRhLnZhbHVlID09PSAnRWRpdCcpIHsKICAgICAgICBmb3JtRGF0YS52YWx1ZSA9IGRhdGFQcm9wLnZhbHVlCiAgICAgICAgZm9ybURhdGEudmFsdWUuY3VzdG9tZXJfbmFtZSA9IGRhdGFQcm9wLnZhbHVlLmN1c3RvbWVyLm5hbWUKICAgICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9pZCA9IGRhdGFQcm9wLnZhbHVlLmN1c3RvbWVyLmlkCiAgICAgICAgZm9ybURhdGEudmFsdWUudHlwZSA9IGRhdGFQcm9wLnZhbHVlLmN1c3RvbWVyLnR5cGUKICAgICAgICBmb3JtRGF0YS52YWx1ZS5zYWxlc19kcl9pdGVtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YVByb3AudmFsdWUuc2FsZXNfZHJfaXRlbXMpKQogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc09yZGVyU3RvcmUvb3JkZXJJdGVtcycsIGRhdGFQcm9wLnZhbHVlLmN1c3RvbWVyLmlkKQogICAgICAgIGNvbnNvbGUubG9nKGZvcm1EYXRhLnZhbHVlLnNhbGVzX2RyX2l0ZW1zKQoKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3JtRGF0YS52YWx1ZSA9IHsKICAgICAgICAgIGRhdGVNb2RhbDogZmFsc2UsCiAgICAgICAgICBjdXN0b21lcl9uYW1lOiBudWxsLAogICAgICAgICAgY3VzdG9tZXJfaWQ6IG51bGwsCiAgICAgICAgICBkYXRlX3Bvc3RlZDogbnVsbCwKICAgICAgICAgIHNhbGVzX29yZGVyX251bWJlcjogbnVsbCwKICAgICAgICAgIGRvY3VtZW50X2lkOiBudWxsLAogICAgICAgICAgYWRkcmVzczogbnVsbCwKICAgICAgICAgIHJlbWFya3M6IG51bGwsCiAgICAgICAgICBhcmVhOiBudWxsLAogICAgICAgICAgc2FsZXNtYW5faWRfMTogbnVsbCwKICAgICAgICAgIHNhbGVzbWFuX2lkXzI6IG51bGwsCiAgICAgICAgICB0ZXJtX2lkOiBudWxsLAogICAgICAgICAgdmF0X2lkOiBudWxsLAogICAgICAgIH0KCiAgICAgICAgb3JkZXJJdGVtcy52YWx1ZSA9IFtdCiAgICAgIH0KICAgIH0pCgogICAgY29uc3Qgc2FsZXNPcmRlclRvdGFsQW1vdW50ID0gcmVmKDApCiAgICBjb25zdCBvcmRlckl0ZW1JZHMgPSByZWYoW10pCgogICAgY29uc3QgY2FuY2VsID0gKCkgPT4gewogICAgICBlbWl0KCdzdWJtaXQnKQogICAgfQoKICAgIGNvbnN0IHNob3dDdXN0b21lck1vZGFsID0gKCkgPT4gewogICAgICBjdXN0b21lck1vZGFsLnZhbHVlID0gdHJ1ZQogICAgfQoKICAgIGNvbnN0IG9uU2VsZWN0Q3VzdG9tZXIgPSBjdXN0b21lciA9PiB7CiAgICAgIGlmIChjdXN0b21lcj8uaWQpIHsKICAgICAgICBmb3JtRGF0YS52YWx1ZS5jdXN0b21lcl9uYW1lID0gY3VzdG9tZXIubmFtZQogICAgICAgIGZvcm1EYXRhLnZhbHVlLmN1c3RvbWVyX2lkID0gY3VzdG9tZXIuaWQKICAgICAgICBmb3JtRGF0YS52YWx1ZS5kb2N1bWVudF9pZCA9IGN1c3RvbWVyLmRvY3VtZW50X2lkCiAgICAgICAgZm9ybURhdGEudmFsdWUuYWRkcmVzcyA9IGN1c3RvbWVyLmFkZHJlc3MKICAgICAgICBmb3JtRGF0YS52YWx1ZS5yZW1hcmtzID0gY3VzdG9tZXIucmVtYXJrcwogICAgICAgIGZvcm1EYXRhLnZhbHVlLmFyZWEgPSBjdXN0b21lci5hcmVhCiAgICAgICAgZm9ybURhdGEudmFsdWUuc2FsZXNtYW5faWRfMSA9IGN1c3RvbWVyLnNhbGVzbWFuX2lkXzEKICAgICAgICBmb3JtRGF0YS52YWx1ZS5zYWxlc21hbl9pZF8yID0gY3VzdG9tZXIuc2FsZXNtYW5faWRfMgogICAgICAgIGZvcm1EYXRhLnZhbHVlLnRlcm1faWQgPSBjdXN0b21lci50ZXJtX2lkCiAgICAgICAgZm9ybURhdGEudmFsdWUudmF0X2lkID0gY3VzdG9tZXIudmF0X2lkCiAgICAgICAgZm9ybURhdGEudmFsdWUudHlwZSA9IGN1c3RvbWVyLnR5cGUKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNPcmRlclN0b3JlL29yZGVySXRlbXMnLCBjdXN0b21lci5pZCkKICAgICAgfQoKICAgICAgY3VzdG9tZXJNb2RhbC52YWx1ZSA9IGZhbHNlCiAgICB9CgogICAgY29uc3QgZmV0Y2hUb3RhbEFtb3VudCA9IHRvdGFsQW1vdW50ID0+IHsKICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gdG90YWxBbW91bnQKICAgIH0KCiAgICBjb25zdCBmZXRjaE9yZGVySXRlbUlkcyA9IGlkcyA9PiB7CiAgICAgIG9yZGVySXRlbUlkcy52YWx1ZSA9IGlkcwogICAgfQoKICAgIGNvbnN0IHN1Ym1pdCA9ICgpID0+IHsKICAgICAgY29uc3QgcGF5bG9hZCA9IGZvcm1EYXRhLnZhbHVlCiAgICAgIHBheWxvYWQuZGF0ZV9wb3N0ZWQgPSBkYXRlUG9zdGVkLnZhbHVlCiAgICAgIHBheWxvYWQub3JkZXJfaXRlbV9pZHMgPSBvcmRlckl0ZW1JZHMudmFsdWUKICAgICAgcGF5bG9hZC5hbW91bnQgPSBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUKCiAgICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0NyZWF0ZScpIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNEclN0b3JlL2NyZWF0ZScsIHBheWxvYWQpLnRoZW4oCiAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGVtaXQoJ3N1Ym1pdCcsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgKQogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvdXBkYXRlJywgcGF5bG9hZCkudGhlbigKICAgICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgZW1pdCgnc3VibWl0JywgcmVzcG9uc2UuZGF0YSkKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICApCiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBwb3N0T3JkZXIgPSAoKSA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvcG9zdE9yZGVyJywgZm9ybURhdGEudmFsdWUuaWQpLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGVtaXQoJ3N1Ym1pdCcsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgKQogICAgfQoKICAgIGNvbnN0IHVucG9zdE9yZGVyID0gKCkgPT4gewogICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNEclN0b3JlL3VucG9zdE9yZGVyJywgZm9ybURhdGEudmFsdWUuaWQpLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGVtaXQoJ3N1Ym1pdCcsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgKQogICAgfQoKICAgIGNvbnN0IGVycm9ycyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLlNhbGVzRHJTdG9yZS5lcnJvcnMpCgogICAgcmV0dXJuIHsKICAgICAgcG9zdE9yZGVyLAogICAgICB1bnBvc3RPcmRlciwKICAgICAgZmV0Y2hUb3RhbEFtb3VudCwKICAgICAgZmV0Y2hPcmRlckl0ZW1JZHMsCiAgICAgIG1vZGVEYXRhLAogICAgICBzYWxlc09yZGVyVG90YWxBbW91bnQsCiAgICAgIGRvY3VtZW50cywKICAgICAgZXJyb3JzLAogICAgICB0ZXJtcywKICAgICAgdHlwZXMsCiAgICAgIHZhdHMsCiAgICAgIGZldGNoT3JkZXJJdGVtcywKICAgICAgc2FsZXNtYW5zOiBjb21wdXRlZCgoKSA9PiBzdG9yZS5zdGF0ZS5TYWxlc21hblN0b3JlLnNhbGVzbWFucyksCiAgICAgIHN1Ym1pdCwKICAgICAgZGF0ZVBvc3RlZCwKICAgICAgb25TZWxlY3RDdXN0b21lciwKICAgICAgc2hvd0N1c3RvbWVyTW9kYWwsCiAgICAgIGNhbmNlbCwKICAgICAgY3VzdG9tZXJNb2RhbCwKICAgICAgZm9ybURhdGEsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpSW5mb3JtYXRpb24sCiAgICAgICAgbWRpQWNjb3VudFBsdXNPdXRsaW5lLAogICAgICB9LAogICAgfQogIH0sCn0K"},{"version":3,"sources":["SalesDrForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SalesDrForm.vue","sourceRoot":"src/views/pages/sales/drs","sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"pa-6\">\n      {{ mode }} Sales DR\n    </v-card-title>\n    <v-card-text>\n      <v-form>\n        <v-row>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"primary\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Information\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-menu\n              v-model=\"formData.dateModal\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              :disabled=\"formData.status === 'Posted'\"\n              max-width=\"290px\"\n              min-width=\"auto\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"datePosted\"\n                  label=\"Date\"\n                  persistent-hint\n                  :prepend-icon=\"icons.mdiCalendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                ></v-text-field>\n              </template>\n\n              <v-date-picker\n                v-model=\"datePosted\"\n                no-title\n                color=\"primary\"\n                @input=\"formData.dateModal = false\"\n              ></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.sales_dr_number\"\n              outlined\n              :disabled=\"formData.id !== undefined\"\n              :error-messages=\"errors.sales_dr_number\"\n              dense\n              hide-details=\"auto\"\n              label=\"Sales DR Number\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.document_id\"\n              :items=\"documents\"\n              item-text=\"title\"\n              item-value=\"id\"\n              label=\"Document\"\n              :disabled=\"formData.status === 'Posted'\"\n              :error-messages=\"errors.document_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"4\"\n            class=\"pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.customer_name\"\n              outlined\n              readonly\n              :error-messages=\"errors.customer_id\"\n              dense\n              hide-details=\"auto\"\n              label=\"Customer\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"2\"\n          >\n            <v-btn\n              v-if=\"modeData === 'Create'\"\n              class=\"md4\"\n              color=\"primary\"\n              x-small\n              dark\n              @click=\"showCustomerModal\"\n            >\n              Get Customer\n              <v-icon>\n                {{ icons.mdiAccountPlusOutline }}\n              </v-icon>\n            </v-btn>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.type\"\n              :items=\"types\"\n              label=\"Customer Type\"\n              disabled\n              :error-messages=\"errors.type\"\n              readonly\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.area\"\n              outlined\n              dense\n              :disabled=\"formData.status === 'Posted'\"\n              :error-messages=\"errors.area\"\n              hide-details=\"auto\"\n              label=\"Area\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.term_id\"\n              :items=\"terms\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Term\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :error-messages=\"errors.term_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.vat_id\"\n              :items=\"vats\"\n              item-text=\"code\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Vat\"\n              :error-messages=\"errors.vat_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_1\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Agent 1\"\n              :error-messages=\"errors.salesman_id_1\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-select\n              v-model=\"formData.salesman_id_2\"\n              :items=\"salesmans\"\n              item-text=\"salesman_name\"\n              item-value=\"id\"\n              :disabled=\"formData.status === 'Posted'\"\n              label=\"Agent 2\"\n              :error-messages=\"errors.salesman_id_2\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.address\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.address\"\n              hide-details=\"auto\"\n              label=\"Address\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-textarea\n              v-model=\"formData.remarks\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              rows=\"2\"\n              dense\n              :error-messages=\"errors.remarks\"\n              hide-details=\"auto\"\n              label=\"Remarks\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.promo_code\"\n              outlined\n              :disabled=\"formData.status === 'Posted'\"\n              dense\n              :error-messages=\"errors.promo_code\"\n              hide-details=\"auto\"\n              label=\"Promo Code\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n        <sales-order-items\n          class=\"mt-6\"\n          :mode=\"mode\"\n          :disabled=\"formData.status === 'Posted'\"\n          :items=\"formData.sales_dr_items\"\n          :customer-id=\"formData.customer_id\"\n          @totalAmount=\"fetchTotalAmount\"\n          @orderItemIds=\"fetchOrderItemIds\"\n        ></sales-order-items>\n        <v-row>\n          <v-col\n            cols=\"auto\"\n            class=\"d-flex\"\n          >\n            <v-btn\n              v-if=\"formData.status !== 'Posted'\"\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"submit\"\n            >\n              <v-icon>\n                {{ icons.mdiContentSave }}\n              </v-icon>\n              {{ modeData === 'Create' ? 'Create' : 'Update' }}\n            </v-btn>\n            <v-btn\n              v-if=\"formData.status === 'For Review'\"\n              color=\"success\"\n              class=\"me-3 mt-4\"\n              @click=\"postOrder\"\n            >\n              <v-icon>\n                {{ icons.mdiFinance }}\n              </v-icon>\n              Post\n            </v-btn>\n            <v-btn\n              v-if=\"formData.status === 'Posted'\"\n              color=\"error\"\n              class=\"me-3 mt-4\"\n              @click=\"unpostOrder\"\n            >\n              <v-icon>\n                {{ icons.mdiFinance }}\n              </v-icon>\n              Unpost\n            </v-btn>\n            <v-btn\n              outlined\n              class=\"me-3 mt-4\"\n              type=\"reset\"\n              color=\"info\"\n              @click.prevent=\"cancel\"\n            >\n              <v-icon>\n                {{ icons.mdiProgressClose }}\n              </v-icon>\n              Close\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n      <v-dialog\n        v-model=\"customerModal\"\n        fullscreen\n        hide-overlay\n        width=\"1100px\"\n        height=\"500px\"\n        transition=\"dialog-bottom-transition\"\n      >\n        <customer-form\n          :mode=\"'Selecting'\"\n          @submit=\"onSelectCustomer\"\n          @clicked=\"cancel\"\n        ></customer-form>\n      </v-dialog>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport {\n  computed, ref, toRef, watch,\n} from '@vue/composition-api'\nimport {\n  mdiInformation,\n  mdiAccountPlusOutline,\n} from '@mdi/js'\nimport CustomerForm from '@/views/pages/master-files/customers/CustomerForm.vue'\nimport SalesOrderItems from '@/views/pages/sales/drs/SalesOrderItems.vue'\nimport store from '@/store'\n\nexport default {\n  name: 'SalesDrForm',\n  components: {\n    CustomerForm,\n    SalesOrderItems,\n  },\n  props: {\n    mode: {\n      type: String,\n      required: true,\n      default: (() => 'Create'),\n    },\n    id: {\n      type: Number,\n      required: false,\n      default: null,\n    },\n    data: {\n      type: Object,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const customerModal = ref(false)\n    const modeData = toRef(props, 'mode')\n    const dataProp = toRef(props, 'data')\n    const formData = ref({\n      dateModal: false,\n      customer_name: null,\n      customer_id: null,\n      date_posted: null,\n      sales_order_number: null,\n      document_id: null,\n      address: null,\n      remarks: null,\n      area: null,\n      salesman_id_1: null,\n      salesman_id_2: null,\n      term_id: null,\n      vat_id: null,\n      sales_dr_items: [],\n    })\n    const orderItems = ref([])\n\n    store.dispatch('TermStore/list')\n    store.dispatch('VatStore/list')\n    store.dispatch('SalesmanStore/list')\n    store.dispatch('DocumentStore/list')\n    const terms = computed(() => store.state.TermStore.terms)\n    const vats = computed(() => store.state.VatStore.vats)\n    const documents = computed(() => store.state.DocumentStore.documents.filter(documentItem => {\n      if (documentItem.module === 'Orders') {\n        documentItem.title = `${documentItem.document_name}`\n\n        return documentItem\n      }\n    }))\n    const types = ref([\n      'Regular',\n      'Distributor',\n    ])\n\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n\n    formData.value = dataProp.value ?? formData.value\n\n    const fetchOrderItems = items => {\n      orderItems.value = items\n    }\n\n    if (modeData.value === 'Edit') {\n      formData.value = dataProp.value\n      formData.value.customer_name = dataProp.value.customer.name\n      formData.value.customer_id = dataProp.value.customer.id\n      formData.value.type = dataProp.value.customer.type\n      formData.value.sales_dr_items = JSON.parse(JSON.stringify(dataProp.value.sales_dr_items))\n      store.dispatch('SalesOrderStore/orderItems', dataProp.value.customer.id)\n    } else {\n      formData.value = {\n        dateModal: false,\n        customer_name: null,\n        customer_id: null,\n        date_posted: null,\n        sales_order_number: null,\n        document_id: null,\n        address: null,\n        remarks: null,\n        area: null,\n        salesman_id_1: null,\n        salesman_id_2: null,\n        term_id: null,\n        vat_id: null,\n      }\n\n      orderItems.value = []\n    }\n\n    watch(dataProp, () => {\n      if (modeData.value === 'Edit') {\n        formData.value = dataProp.value\n        formData.value.customer_name = dataProp.value.customer.name\n        formData.value.customer_id = dataProp.value.customer.id\n        formData.value.type = dataProp.value.customer.type\n        formData.value.sales_dr_items = JSON.parse(JSON.stringify(dataProp.value.sales_dr_items))\n        store.dispatch('SalesOrderStore/orderItems', dataProp.value.customer.id)\n        console.log(formData.value.sales_dr_items)\n\n      } else {\n        formData.value = {\n          dateModal: false,\n          customer_name: null,\n          customer_id: null,\n          date_posted: null,\n          sales_order_number: null,\n          document_id: null,\n          address: null,\n          remarks: null,\n          area: null,\n          salesman_id_1: null,\n          salesman_id_2: null,\n          term_id: null,\n          vat_id: null,\n        }\n\n        orderItems.value = []\n      }\n    })\n\n    const salesOrderTotalAmount = ref(0)\n    const orderItemIds = ref([])\n\n    const cancel = () => {\n      emit('submit')\n    }\n\n    const showCustomerModal = () => {\n      customerModal.value = true\n    }\n\n    const onSelectCustomer = customer => {\n      if (customer?.id) {\n        formData.value.customer_name = customer.name\n        formData.value.customer_id = customer.id\n        formData.value.document_id = customer.document_id\n        formData.value.address = customer.address\n        formData.value.remarks = customer.remarks\n        formData.value.area = customer.area\n        formData.value.salesman_id_1 = customer.salesman_id_1\n        formData.value.salesman_id_2 = customer.salesman_id_2\n        formData.value.term_id = customer.term_id\n        formData.value.vat_id = customer.vat_id\n        formData.value.type = customer.type\n        store.dispatch('SalesOrderStore/orderItems', customer.id)\n      }\n\n      customerModal.value = false\n    }\n\n    const fetchTotalAmount = totalAmount => {\n      salesOrderTotalAmount.value = totalAmount\n    }\n\n    const fetchOrderItemIds = ids => {\n      orderItemIds.value = ids\n    }\n\n    const submit = () => {\n      const payload = formData.value\n      payload.date_posted = datePosted.value\n      payload.order_item_ids = orderItemIds.value\n      payload.amount = salesOrderTotalAmount.value\n\n      if (modeData.value === 'Create') {\n        store.dispatch('SalesDrStore/create', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      } else {\n        store.dispatch('SalesDrStore/update', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      }\n    }\n\n    const postOrder = () => {\n      store.dispatch('SalesDrStore/postOrder', formData.value.id).then(\n        response => {\n          if (response.status === undefined) {\n            emit('submit', response.data)\n          }\n        },\n      )\n    }\n\n    const unpostOrder = () => {\n      store.dispatch('SalesDrStore/unpostOrder', formData.value.id).then(\n        response => {\n          if (response.status === undefined) {\n            emit('submit', response.data)\n          }\n        },\n      )\n    }\n\n    const errors = computed(() => store.state.SalesDrStore.errors)\n\n    return {\n      postOrder,\n      unpostOrder,\n      fetchTotalAmount,\n      fetchOrderItemIds,\n      modeData,\n      salesOrderTotalAmount,\n      documents,\n      errors,\n      terms,\n      types,\n      vats,\n      fetchOrderItems,\n      salesmans: computed(() => store.state.SalesmanStore.salesmans),\n      submit,\n      datePosted,\n      onSelectCustomer,\n      showCustomerModal,\n      cancel,\n      customerModal,\n      formData,\n      icons: {\n        mdiInformation,\n        mdiAccountPlusOutline,\n      },\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}