{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/logistics/trip-tickets/TripTicketForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/logistics/trip-tickets/TripTicketForm.vue","mtime":1665378135696},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgY29tcHV0ZWQsIHJlZiwgdG9SZWYsIG9uTW91bnRlZCwgd2F0Y2gsCn0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7CiAgbWRpQWNjb3VudFBsdXNPdXRsaW5lLCBtZGlDYXJkT2ZmLCBtZGlDdXJyZW5jeVNpZ24sCiAgbWRpSW5mb3JtYXRpb24sCn0gZnJvbSAnQG1kaS9qcycKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnCmltcG9ydCBTYWxlc0RySXRlbVNlbGVjdGlvbiBmcm9tICcuL1NhbGVzRHJJdGVtU2VsZWN0aW9uLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVHJpcFRpY2tldEZvcm0nLAogIGNvbXBvbmVudHM6IHsKICAgIFNhbGVzRHJJdGVtU2VsZWN0aW9uLAogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogKCgpID0+ICdDcmVhdGUnKSwKICAgIH0sCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiAoKCkgPT4gKHsKICAgICAgICBhcmVhOiBudWxsLAogICAgICB9KSksCiAgICB9LAogIH0sCiAgc2V0dXAocHJvcHMsIHsgZW1pdCB9KSB7CiAgICBjb25zdCBhcmVhcyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLlNhbGVzRHJTdG9yZS5hcmVhcykKICAgIGNvbnN0IGVycm9ycyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLlRyaXBUaWNrZXRTdG9yZS5lcnJvcnMpCiAgICBjb25zdCBkYXRhUHJvcCA9IHRvUmVmKHByb3BzLCAnZGF0YScpCiAgICBjb25zdCBkb2N1bWVudHMgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5zdGF0ZS5Eb2N1bWVudFN0b3JlLmRvY3VtZW50cy5maWx0ZXIoZG9jdW1lbnRJdGVtID0+IHsKICAgICAgaWYgKGRvY3VtZW50SXRlbS5tb2R1bGUgPT09ICdUcmlwLXRpY2tldCcpIHsKICAgICAgICBkb2N1bWVudEl0ZW0udGl0bGUgPSBgJHtkb2N1bWVudEl0ZW0uZG9jdW1lbnRfbmFtZX1gCgogICAgICAgIHJldHVybiBkb2N1bWVudEl0ZW0KICAgICAgfQogICAgfSkpCiAgICBjb25zdCBkckxpc3REaWFsb2cgPSByZWYoZmFsc2UpCiAgICBjb25zdCBmb3JtRGF0YSA9IHJlZih7CiAgICAgIGFyZWE6IG51bGwsCiAgICB9KQogICAgY29uc3Qgc2VsZWN0ZWREckl0ZW1zID0gcmVmKFtdKQogICAgY29uc3QgZHJJdGVtc1NlbGVjdGlvbiA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLlNhbGVzRHJTdG9yZS5pdGVtcykKICAgIGNvbnN0IGRhdGVQb3N0ZWQgPSByZWYobmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMCkpCiAgICBjb25zdCBtb2RlRGF0YSA9IHRvUmVmKHByb3BzLCAnbW9kZScpCiAgICBjb25zdCBoZWFkZXJzID0gWwogICAgICB7CiAgICAgICAgdGV4dDogJ0RhdGUnLAogICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogJ3NhbGVzX2RyX2l0ZW0uc2FsZXNfZHIuZGF0ZV9wb3N0ZWQnLAogICAgICB9LAogICAgICB7IHRleHQ6ICdEUiBOdW1iZXInLCB2YWx1ZTogJ3NhbGVzX2RyX2l0ZW0uc2FsZXNfZHIuc2FsZXNfZHJfbnVtYmVyJyB9LAogICAgICB7IHRleHQ6ICdDdXN0b21lcicsIHZhbHVlOiAnc2FsZXNfZHJfaXRlbS5zYWxlc19kci5jdXN0b21lci5uYW1lJyB9LAogICAgICB7IHRleHQ6ICdBcmVhJywgdmFsdWU6ICdzYWxlc19kcl9pdGVtLnNhbGVzX2RyLmFyZWEnIH0sCiAgICAgIHsgdGV4dDogJ0l0ZW0gTmFtZScsIHZhbHVlOiAncHJvZHVjdC5uYW1lJyB9LAogICAgICB7IHRleHQ6ICdRdWFudGl0eScsIHZhbHVlOiAncXVhbnRpdHknIH0sCiAgICAgIHsgdGV4dDogJ1VuaXQnLCB2YWx1ZTogJ3VuaXQnIH0sCiAgICBdCgogICAgY29uc3QgcmVJbml0aWFsaXplU2VsZWN0ZWRJdGVtID0gKCkgPT4gewogICAgICBzZWxlY3RlZERySXRlbXMudmFsdWUgPSBbXQoKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC1leHByZXNzaW9ucwogICAgICBkYXRhUHJvcC52YWx1ZS5vcmRlcl9pdGVtcz8uZm9yRWFjaChvcmRlckl0ZW0gPT4gewogICAgICAgIGlmIChkckl0ZW1zU2VsZWN0aW9uLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKICAgICAgICBjb25zdCBleGlzdCA9IGRySXRlbXNTZWxlY3Rpb24udmFsdWU/LmZpbmQoaXRlbVNlbGVjdGlvbiA9PiBpdGVtU2VsZWN0aW9uLmlkID09PSBvcmRlckl0ZW0uaWQpCgogICAgICAgIGlmIChleGlzdCkgewogICAgICAgICAgc2VsZWN0ZWREckl0ZW1zLnZhbHVlLnB1c2goZXhpc3QpCiAgICAgICAgfQogICAgICB9KQogICAgfQoKICAgIGNvbnN0IGluaXRpYWxpemUgPSAoKSA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdTYWxlc0RyU3RvcmUvZ2V0QXJlYXMnKQogICAgICBzdG9yZS5kaXNwYXRjaCgnRG9jdW1lbnRTdG9yZS9saXN0JykKCiAgICAgIGZvcm1EYXRhLnZhbHVlID0gZGF0YVByb3AudmFsdWUgPz8gZm9ybURhdGEudmFsdWUKCiAgICAgIGlmIChkYXRhUHJvcC52YWx1ZS5hcmVhICYmIGRhdGFQcm9wLnZhbHVlLmlkKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgIGFyZWE6IGRhdGFQcm9wLnZhbHVlLmFyZWEsCiAgICAgICAgICBpZDogZGF0YVByb3AudmFsdWUuaWQsCiAgICAgICAgfQoKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnU2FsZXNEclN0b3JlL2dldFVubGlua0l0ZW1zJywgZGF0YSkKICAgICAgfQogICAgfQoKICAgIG9uTW91bnRlZChhc3luYyAoKSA9PiB7CiAgICAgIGluaXRpYWxpemUoKQogICAgfSkKCiAgICBjb25zdCBjYW5jZWwgPSAoKSA9PiB7CiAgICAgIGVtaXQoJ3N1Ym1pdCcpCiAgICB9CgogICAgY29uc3QgYWRkT3JVcGRhdGVJdGVtcyA9IGl0ZW1zID0+IHsKICAgICAgc2VsZWN0ZWREckl0ZW1zLnZhbHVlID0gaXRlbXMKICAgICAgZHJMaXN0RGlhbG9nLnZhbHVlID0gZmFsc2UKICAgIH0KCiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IHBheWxvYWQgPSBmb3JtRGF0YS52YWx1ZQogICAgICBwYXlsb2FkLmRhdGVfcG9zdGVkID0gZGF0ZVBvc3RlZC52YWx1ZQogICAgICBwYXlsb2FkLmRyX2l0ZW1zID0gc2VsZWN0ZWREckl0ZW1zLnZhbHVlLm1hcChpdGVtID0+IGl0ZW0uaWQpCgogICAgICBpZiAobW9kZURhdGEudmFsdWUgPT09ICdDcmVhdGUnKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ1RyaXBUaWNrZXRTdG9yZS9jcmVhdGUnLCBwYXlsb2FkKS50aGVuKAogICAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBlbWl0KCdzdWJtaXQnLCByZXNwb25zZS5kYXRhKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICkKICAgICAgfSBlbHNlIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnVHJpcFRpY2tldFN0b3JlL3VwZGF0ZScsIHBheWxvYWQpLnRoZW4oCiAgICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGVtaXQoJ3N1Ym1pdCcsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgKQogICAgICB9CiAgICB9CgogICAgY29uc3QgYXJlYUNoYW5nZWQgPSAoKSA9PiB7CiAgICAgIHNlbGVjdGVkRHJJdGVtcy52YWx1ZSA9IFtdCiAgICB9CgogICAgY29uc3QgdXBkYXRlVG9JblRyYW5zaXQgPSAoKSA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdUcmlwVGlja2V0U3RvcmUvdXBkYXRlVG9JblRyYW5zaXQnLCBmb3JtRGF0YS52YWx1ZSkudGhlbigKICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZW1pdCgnc3VibWl0JywgcmVzcG9uc2UuZGF0YSkKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICApCiAgICB9CgogICAgY29uc3QgdXBkYXRlVG9EZWxpdmVyZWQgPSAoKSA9PiB7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdUcmlwVGlja2V0U3RvcmUvdXBkYXRlVG9EZWxpdmVyZWQnLCBmb3JtRGF0YS52YWx1ZSkudGhlbigKICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZW1pdCgnc3VibWl0JywgcmVzcG9uc2UuZGF0YSkKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICApCiAgICB9CgogICAgd2F0Y2goZHJJdGVtc1NlbGVjdGlvbiwgKCkgPT4gewogICAgICByZUluaXRpYWxpemVTZWxlY3RlZEl0ZW0oKQogICAgfSkKCiAgICB3YXRjaChkYXRhUHJvcCwgKCkgPT4gewogICAgICBpbml0aWFsaXplKCkKICAgIH0pCgogICAgcmV0dXJuIHsKICAgICAgYXJlYUNoYW5nZWQsCiAgICAgIGFkZE9yVXBkYXRlSXRlbXMsCiAgICAgIGFyZWFzLAogICAgICBjYW5jZWwsCiAgICAgIHVwZGF0ZVRvSW5UcmFuc2l0LAogICAgICB1cGRhdGVUb0RlbGl2ZXJlZCwKICAgICAgZGF0ZVBvc3RlZCwKICAgICAgZG9jdW1lbnRzLAogICAgICBkckxpc3REaWFsb2csCiAgICAgIGVycm9ycywKICAgICAgZm9ybURhdGEsCiAgICAgIGhlYWRlcnMsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpSW5mb3JtYXRpb24sCiAgICAgICAgbWRpQWNjb3VudFBsdXNPdXRsaW5lLAogICAgICAgIG1kaUNhcmRPZmYsCiAgICAgICAgbWRpQ3VycmVuY3lTaWduLAogICAgICB9LAogICAgICBzZWxlY3RlZERySXRlbXMsCiAgICAgIHN1Ym1pdCwKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["TripTicketForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TripTicketForm.vue","sourceRoot":"src/views/pages/logistics/trip-tickets","sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"pa-6\">\n      {{ mode }} Trip Ticket\n    </v-card-title>\n    <v-card-text>\n      <v-form>\n        <v-row>\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"primary\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"primary\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Information\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col\n            cols=\"6\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-menu\n              v-model=\"formData.dateModal\"\n              :close-on-content-click=\"false\"\n              transition=\"scale-transition\"\n              offset-y\n              :disabled=\"formData.status === 'In Transit'\"\n              max-width=\"290px\"\n              min-width=\"auto\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"datePosted\"\n                  label=\"Date\"\n                  persistent-hint\n                  :prepend-icon=\"icons.mdiCalendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                ></v-text-field>\n              </template>\n\n              <v-date-picker\n                v-model=\"datePosted\"\n                no-title\n                color=\"primary\"\n                @input=\"formData.dateModal = false\"\n              ></v-date-picker>\n            </v-menu>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n            <v-text-field\n              v-model=\"formData.trip_ticket_number\"\n              outlined\n              :disabled=\"formData.status === 'In Transit'\"\n              :error-messages=\"errors.trip_ticket_number\"\n              dense\n              hide-details=\"auto\"\n              label=\"Trip Ticket Order Number\"\n            ></v-text-field>\n          </v-col>\n          <v-col\n            cols=\"3\"\n            class=\"pr-8 pl-8\"\n          >\n          </v-col>\n          <v-col cols=\"4\">\n            <v-select\n              v-model=\"formData.area\"\n              :items=\"areas\"\n              label=\"Area\"\n              :disabled=\"formData.status === 'In Transit'\"\n              :error-messages=\"errors.area\"\n              outlined\n              dense\n              hide-details=\"auto\"\n              @change=\"areaChanged\"\n            >\n            </v-select>\n          </v-col>\n          <v-col cols=\"1\"></v-col>\n          <v-col cols=\"4\">\n            <v-select\n              v-model=\"formData.document_id\"\n              :items=\"documents\"\n              item-text=\"title\"\n              item-value=\"id\"\n              label=\"Document\"\n              :disabled=\"formData.status === 'In Transit'\"\n              :error-messages=\"errors.document_id\"\n              outlined\n              dense\n              hide-details=\"auto\"\n            ></v-select>\n          </v-col>\n          <v-col cols=\"\"></v-col>\n          <v-col cols=\"4\">\n            <v-text-field\n              v-model=\"formData.driver\"\n              outlined\n              :error-messages=\"errors.driver\"\n              dense\n              :disabled=\"formData.status === 'In Transit'\"\n              hide-details=\"auto\"\n              label=\"Driver\"\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"6\"></v-col>\n          <v-col cols=\"4\">\n            <v-text-field\n              v-model=\"formData.assistant\"\n              outlined\n              :disabled=\"formData.status === 'In Transit'\"\n              :error-messages=\"errors.assistant\"\n              dense\n              hide-details=\"auto\"\n              label=\"Assistant\"\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"6\"></v-col>\n          <v-col cols=\"4\">\n            <v-text-field\n              v-model=\"formData.truck\"\n              outlined\n              :disabled=\"formData.status === 'In Transit'\"\n              :error-messages=\"errors.truck\"\n              dense\n              hide-details=\"auto\"\n              label=\"Truck\"\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"1\"></v-col>\n          <v-col\n            cols=\"6\"\n            class=\"mt-n16\"\n          >\n            <v-textarea\n              v-model=\"formData.remarks\"\n              outlined\n              dense\n              :disabled=\"formData.status === 'In Transit'\"\n              label=\"Remarks\"\n            ></v-textarea>\n          </v-col>\n          <v-col\n            cols=\"4\"\n            class=\"mt-n16\"\n          >\n            <v-text-field\n              v-model=\"formData.plate_number\"\n              outlined\n              :disabled=\"formData.status === 'In Transit'\"\n              :error-messages=\"errors.plate_number\"\n              dense\n              hide-details=\"auto\"\n              label=\"Plate Number\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n        <v-row\n          v-if=\"formData.area\"\n          class=\"mt-8\"\n        >\n          <v-col cols=\"12\">\n            <v-alert\n              color=\"success\"\n              text\n              style=\"margin-bottom: -10px\"\n            >\n              <div class=\"d-flex align-start\">\n                <v-icon color=\"success\">\n                  {{ icons.mdiInformation }}\n                </v-icon>\n                <div class=\"ms-3\">\n                  <p class=\"text-base font-weight-medium mb-1\">\n                    Sales DR Items\n                  </p>\n                </div>\n              </div>\n            </v-alert>\n          </v-col>\n          <v-col cols=\"10\"></v-col>\n          <v-col\n            cols=\"2\"\n            class=\"ml-n4\"\n          >\n            <v-btn\n              v-if=\"formData.status !== 'In Transit'\"\n              dense\n              color=\"success\"\n              @click=\"drListDialog=true\"\n            >\n              Add Sales DR Items\n            </v-btn>\n          </v-col>\n          <v-col cols=\"12\">\n            <v-data-table\n              :headers=\"headers\"\n              :items=\"selectedDrItems\"\n            >\n            </v-data-table>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col\n            cols=\"auto\"\n            class=\"d-flex\"\n          >\n            <v-btn\n              v-if=\"selectedDrItems.length > 0 && formData.status !== 'In Transit'\"\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"submit\"\n            >\n              <v-icon>\n                {{ icons.mdiContentSave }}\n              </v-icon>\n              {{ mode == 'Create' ? 'Create' : 'Update' }}\n            </v-btn>\n            <v-btn\n              v-if=\"formData.status === 'For Transit'\"\n              color=\"success\"\n              class=\"me-3 mt-4\"\n              @click=\"updateToInTransit\"\n            >\n              <v-icon>\n                {{ icons.mdiFinance }}\n              </v-icon>\n              In Transit\n            </v-btn>\n            <v-btn\n              v-if=\"formData.status === 'In Transit'\"\n              color=\"primary\"\n              class=\"me-3 mt-4\"\n              @click=\"updateToDelivered\"\n            >\n              <v-icon>\n                {{ icons.mdiFinance }}\n              </v-icon>\n              Delivered\n            </v-btn>\n            <v-btn\n              outlined\n              class=\"me-3 mt-4\"\n              type=\"reset\"\n              color=\"info\"\n              @click.prevent=\"cancel\"\n            >\n              <v-icon>\n                {{ icons.mdiProgressClose }}\n              </v-icon>\n              Close\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n      <v-dialog\n        v-model=\"drListDialog\"\n        hide-overlay\n        width=\"1100px\"\n        height=\"700px\"\n        transition=\"dialog-bottom-transition\"\n      >\n        <v-card class=\"elevation-13\">\n          <v-card-text class=\"pa-10\">\n            <sales-dr-item-selection\n              :id=\"formData.id\"\n              :area=\"formData.area\"\n              :selected-items=\"selectedDrItems\"\n              @cancel=\"drListDialog=false\"\n              @addOrUpdateItems=\"addOrUpdateItems\"\n            >\n            </sales-dr-item-selection>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport {\n  computed, ref, toRef, onMounted, watch,\n} from '@vue/composition-api'\nimport {\n  mdiAccountPlusOutline, mdiCardOff, mdiCurrencySign,\n  mdiInformation,\n} from '@mdi/js'\nimport store from '@/store'\nimport SalesDrItemSelection from './SalesDrItemSelection.vue'\n\nexport default {\n  name: 'TripTicketForm',\n  components: {\n    SalesDrItemSelection,\n  },\n  props: {\n    mode: {\n      type: String,\n      required: true,\n      default: (() => 'Create'),\n    },\n    data: {\n      type: Object,\n      required: false,\n      default: (() => ({\n        area: null,\n      })),\n    },\n  },\n  setup(props, { emit }) {\n    const areas = computed(() => store.state.SalesDrStore.areas)\n    const errors = computed(() => store.state.TripTicketStore.errors)\n    const dataProp = toRef(props, 'data')\n    const documents = computed(() => store.state.DocumentStore.documents.filter(documentItem => {\n      if (documentItem.module === 'Trip-ticket') {\n        documentItem.title = `${documentItem.document_name}`\n\n        return documentItem\n      }\n    }))\n    const drListDialog = ref(false)\n    const formData = ref({\n      area: null,\n    })\n    const selectedDrItems = ref([])\n    const drItemsSelection = computed(() => store.state.SalesDrStore.items)\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n    const modeData = toRef(props, 'mode')\n    const headers = [\n      {\n        text: 'Date',\n        align: 'start',\n        sortable: false,\n        value: 'sales_dr_item.sales_dr.date_posted',\n      },\n      { text: 'DR Number', value: 'sales_dr_item.sales_dr.sales_dr_number' },\n      { text: 'Customer', value: 'sales_dr_item.sales_dr.customer.name' },\n      { text: 'Area', value: 'sales_dr_item.sales_dr.area' },\n      { text: 'Item Name', value: 'product.name' },\n      { text: 'Quantity', value: 'quantity' },\n      { text: 'Unit', value: 'unit' },\n    ]\n\n    const reInitializeSelectedItem = () => {\n      selectedDrItems.value = []\n\n      // eslint-disable-next-line no-unused-expressions\n      dataProp.value.order_items?.forEach(orderItem => {\n        if (drItemsSelection.value.length === 0) {\n          return\n        }\n\n        const exist = drItemsSelection.value?.find(itemSelection => itemSelection.id === orderItem.id)\n\n        if (exist) {\n          selectedDrItems.value.push(exist)\n        }\n      })\n    }\n\n    const initialize = () => {\n      store.dispatch('SalesDrStore/getAreas')\n      store.dispatch('DocumentStore/list')\n\n      formData.value = dataProp.value ?? formData.value\n\n      if (dataProp.value.area && dataProp.value.id) {\n        const data = {\n          area: dataProp.value.area,\n          id: dataProp.value.id,\n        }\n\n        store.dispatch('SalesDrStore/getUnlinkItems', data)\n      }\n    }\n\n    onMounted(async () => {\n      initialize()\n    })\n\n    const cancel = () => {\n      emit('submit')\n    }\n\n    const addOrUpdateItems = items => {\n      selectedDrItems.value = items\n      drListDialog.value = false\n    }\n\n    const submit = () => {\n      const payload = formData.value\n      payload.date_posted = datePosted.value\n      payload.dr_items = selectedDrItems.value.map(item => item.id)\n\n      if (modeData.value === 'Create') {\n        store.dispatch('TripTicketStore/create', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      } else {\n        store.dispatch('TripTicketStore/update', payload).then(\n          response => {\n            if (response.status === undefined) {\n              emit('submit', response.data)\n            }\n          },\n        )\n      }\n    }\n\n    const areaChanged = () => {\n      selectedDrItems.value = []\n    }\n\n    const updateToInTransit = () => {\n      store.dispatch('TripTicketStore/updateToInTransit', formData.value).then(\n        response => {\n          if (response.status === undefined) {\n            emit('submit', response.data)\n          }\n        },\n      )\n    }\n\n    const updateToDelivered = () => {\n      store.dispatch('TripTicketStore/updateToDelivered', formData.value).then(\n        response => {\n          if (response.status === undefined) {\n            emit('submit', response.data)\n          }\n        },\n      )\n    }\n\n    watch(drItemsSelection, () => {\n      reInitializeSelectedItem()\n    })\n\n    watch(dataProp, () => {\n      initialize()\n    })\n\n    return {\n      areaChanged,\n      addOrUpdateItems,\n      areas,\n      cancel,\n      updateToInTransit,\n      updateToDelivered,\n      datePosted,\n      documents,\n      drListDialog,\n      errors,\n      formData,\n      headers,\n      icons: {\n        mdiInformation,\n        mdiAccountPlusOutline,\n        mdiCardOff,\n        mdiCurrencySign,\n      },\n      selectedDrItems,\n      submit,\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}