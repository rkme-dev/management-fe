{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/collections/PaymentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/collections/PaymentForm.vue","mtime":1666285212611},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvbXB1dGVkLCByZWYsIHRvUmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7IG1kaUN1cnJlbmN5U2lnbiwgbWRpRGF0YWJhc2VBcnJvd0xlZnQgfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGF5bWVudEZvcm0nLAogIHByb3BzOiB7CiAgICB0b3RhbEFtb3VudDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogKCgpID0+IDApLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgc3RvcmUuZGlzcGF0Y2goJ0FjY291bnRTdG9yZS9saXN0JykKICAgIGNvbnN0IHRvdGFsQW1vdW50VG9QYXkgPSB0b1JlZihwcm9wcywgJ3RvdGFsQW1vdW50JykKICAgIGNvbnN0IHR5cGVzID0gWwogICAgICB7IHZhbHVlOiAnY2FzaF9wYXltZW50JywgdGl0bGU6ICdDYXNoIFBheW1lbnQnIH0sCiAgICAgIHsgdmFsdWU6ICdvbmxpbmVfcGF5bWVudCcsIHRpdGxlOiAnT25saW5lIFBheW1lbnQnIH0sCiAgICAgIHsgdmFsdWU6ICdjaGVja19wYXltZW50JywgdGl0bGU6ICdDaGVjayBQYXltZW50JyB9LAogICAgXQogICAgY29uc3QgZGF0ZVBvc3RlZCA9IHJlZihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSkKICAgIGNvbnN0IGZvcm1EYXRhID0gcmVmKHsKICAgICAgYW1vdW50OiAwLAogICAgICB0eXBlOiBudWxsLAogICAgfSkKCiAgICBjb25zdCBlcnJvcnMgPSByZWYoewogICAgICBhY2NvdW50X2lkOiBudWxsLAogICAgICBhbW91bnQ6IG51bGwsCiAgICB9KQoKICAgIGNvbnN0IGNvcHlUb3RhbEFtb3VudCA9ICgpID0+IHsKICAgICAgZm9ybURhdGEudmFsdWUuYW1vdW50ID0gdG90YWxBbW91bnRUb1BheS52YWx1ZQogICAgfQoKICAgIGNvbnN0IGNoZWNrVHlwZXMgPSBbCiAgICAgICdMb2NhbCcsCiAgICAgICdSZWdpb25hbCcsCiAgICBdCgogICAgY29uc3QgcGF5bWVudFR5cGVzTWFwcGluZyA9IHsKICAgICAgY2FzaF9wYXltZW50OiAnQ2FzaCBQYXltZW50JywKICAgICAgY2hlY2tfcGF5bWVudDogJ0NoZWNrIFBheW1lbnQnLAogICAgICBvbmxpbmVfcGF5bWVudDogJ09ubGluZSBQYXltZW50JywKICAgIH0KCiAgICBjb25zdCBhY2NvdW50cyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLkFjY291bnRTdG9yZS5hY2NvdW50cy5maWx0ZXIoYWNjb3VudCA9PiBhY2NvdW50LnR5cGUgPT09ICdCYW5rJykpCgogICAgY29uc3QgaGFzRXJyb3IgPSByZWYoMCkKCiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IHBheW1lbnQgPSB7CiAgICAgICAgdHlwZTogZm9ybURhdGEudmFsdWUudHlwZSwKICAgICAgICBhY2NvdW50X2lkOiBmb3JtRGF0YS52YWx1ZS5hY2NvdW50X2lkLAogICAgICAgIHBheW1lbnRfdHlwZTogcGF5bWVudFR5cGVzTWFwcGluZ1tmb3JtRGF0YS52YWx1ZS50eXBlXSwKICAgICAgICBhbW91bnQ6IGZvcm1EYXRhLnZhbHVlLmFtb3VudCwKICAgICAgICBwYXltZW50X2RhdGU6IGRhdGVQb3N0ZWQudmFsdWUsCiAgICAgICAgbW9kZV9vZl90cmFuc2ZlcjogZm9ybURhdGEudmFsdWUubW9kZV9vZl90cmFuc2ZlciwKICAgICAgICByZWZlcmVuY2VfbnVtYmVyOiBmb3JtRGF0YS52YWx1ZS50cmFuc2FjdGlvbl9udW1iZXIgPz8gZm9ybURhdGEudmFsdWUuY2hlY2tfbnVtYmVyLAogICAgICAgIHRyYW5zYWN0aW9uX251bWJlcjogZm9ybURhdGEudmFsdWUudHJhbnNhY3Rpb25fbnVtYmVyLAogICAgICAgIGNoZWNrX251bWJlcjogZm9ybURhdGEudmFsdWUuY2hlY2tfbnVtYmVyLAogICAgICAgIGJhbms6IGZvcm1EYXRhLnZhbHVlLmJhbmssCiAgICAgICAgYmFua19hY2NvdW50X251bWJlcjogZm9ybURhdGEudmFsdWUuYmFua19hY2NvdW50X251bWJlciwKICAgICAgICBjaGVja190eXBlOiBmb3JtRGF0YS52YWx1ZS5jaGVja190eXBlLAogICAgICB9CgogICAgICBpZiAocGF5bWVudC50eXBlID09PSAnb25saW5lX3BheW1lbnQnKSB7CiAgICAgICAgaWYgKCFmb3JtRGF0YS52YWx1ZS5tb2RlX29mX3RyYW5zZmVyKSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSArPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUubW9kZV9vZl90cmFuc2ZlciA9ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLm1vZGVfb2ZfdHJhbnNmZXIgPSBudWxsCiAgICAgICAgfQoKICAgICAgICBpZiAoIWZvcm1EYXRhLnZhbHVlLnRyYW5zYWN0aW9uX251bWJlcikgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLnRyYW5zYWN0aW9uX251bWJlciA9ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLnRyYW5zYWN0aW9uX251bWJlciA9IG51bGwKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChwYXltZW50LnR5cGUgPT09ICdjaGVja19wYXltZW50JykgewogICAgICAgIGlmICghZm9ybURhdGEudmFsdWUuY2hlY2tfbnVtYmVyKSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSArPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUuY2hlY2tfbnVtYmVyID0gJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSAtPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUuY2hlY2tfbnVtYmVyID0gbnVsbAogICAgICAgIH0KICAgICAgICBpZiAoIWZvcm1EYXRhLnZhbHVlLmJhbmspIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlICs9IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS5iYW5rID0gJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSAtPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUuYmFuayA9IG51bGwKICAgICAgICB9CiAgICAgICAgaWYgKCFmb3JtRGF0YS52YWx1ZS5iYW5rX2FjY291bnRfbnVtYmVyKSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSArPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUuYmFua19hY2NvdW50X251bWJlciA9ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLmJhbmtfYWNjb3VudF9udW1iZXIgPSBudWxsCiAgICAgICAgfQogICAgICAgIGlmICghZm9ybURhdGEudmFsdWUuY2hlY2tfdHlwZSkgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLmNoZWNrX3R5cGUgPSAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlIC09IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS5jaGVja190eXBlID0gbnVsbAogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKCFwYXltZW50LmFjY291bnRfaWQpIHsKICAgICAgICBoYXNFcnJvci52YWx1ZSArPSAxCiAgICAgICAgZXJyb3JzLnZhbHVlLmFjY291bnRfaWQgPSAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgIGVycm9ycy52YWx1ZS5hY2NvdW50X2lkID0gbnVsbAogICAgICB9CgogICAgICBpZiAoIXBheW1lbnQuYW1vdW50IHx8IHBheW1lbnQuYW1vdW50ID09PSAwKSB7CiAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgIGVycm9ycy52YWx1ZS5hbW91bnQgPSAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgIGVycm9ycy52YWx1ZS5hbW91bnQgPSBudWxsCiAgICAgIH0KCiAgICAgIGlmIChwYXltZW50LmFjY291bnRfaWQgJiYgaGFzRXJyb3IudmFsdWUgPD0gMCkgewogICAgICAgIGVtaXQoJ2FkZGVkUGF5bWVudCcsIHBheW1lbnQpCgogICAgICAgIGZvcm1EYXRhLnZhbHVlID0gewogICAgICAgICAgYW1vdW50OiAwLAogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGNvbnN0IG9uQ2hhbmdlT2ZQYXltZW50VHlwZSA9ICgpID0+IHsKICAgICAgZXJyb3JzLnZhbHVlID0gewogICAgICAgIGFjY291bnRfaWQ6IG51bGwsCiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBjYW5jZWwgPSAoKSA9PiB7CiAgICAgIGVtaXQoJ3RvZ2dsZU1vZGFsJykKICAgIH0KCiAgICByZXR1cm4gewogICAgICBvbkNoYW5nZU9mUGF5bWVudFR5cGUsCiAgICAgIGVycm9ycywKICAgICAgY2hlY2tUeXBlcywKICAgICAgc3VibWl0LAogICAgICBjYW5jZWwsCiAgICAgIGFjY291bnRzLAogICAgICBjb3B5VG90YWxBbW91bnQsCiAgICAgIGRhdGVQb3N0ZWQsCiAgICAgIGZvcm1EYXRhLAogICAgICB0eXBlcywKICAgICAgdG90YWxBbW91bnRUb1BheSwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlDdXJyZW5jeVNpZ24sCiAgICAgICAgbWRpRGF0YWJhc2VBcnJvd0xlZnQsCiAgICAgIH0sCiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["PaymentForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4cA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PaymentForm.vue","sourceRoot":"src/views/pages/sales/collections","sourcesContent":["<template>\n  <v-card class=\"pa-2\">\n    <v-card-text>\n      <v-row v-if=\"totalAmountToPay <= 0\">\n        <v-col\n          cols=\"12\"\n        >\n          <v-alert\n            color=\"primary\"\n            text\n            style=\"margin-bottom: -10px\"\n          >\n            <div class=\"d-flex align-start\">\n              <v-icon color=\"primary\">\n                {{ icons.mdiCurrencySign }}\n              </v-icon>\n              <div class=\"ms-3\">\n                <p class=\"text-base font-weight-medium mb-1\">\n                  Total Amount to Pay was already covered.\n                </p>\n              </div>\n            </div>\n          </v-alert>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"totalAmountToPay > 0\">\n        <v-col\n          cols=\"12\"\n        >\n          <v-alert\n            color=\"success\"\n            text\n            style=\"margin-bottom: -10px\"\n          >\n            <div class=\"d-flex align-start\">\n              <v-icon color=\"success\">\n                {{ icons.mdiCurrencySign }}\n              </v-icon>\n              <div class=\"ms-3\">\n                <p class=\"text-base font-weight-medium mb-1\">\n                  Add Payment\n                </p>\n              </div>\n            </div>\n          </v-alert>\n        </v-col>\n      </v-row>\n      <v-row class=\"mt-2\" v-if=\"totalAmountToPay > 0\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Payment Type</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mr-16\"\n        >\n          <v-select\n            v-model=\"formData.type\"\n            :items=\"types\"\n            item-text=\"title\"\n            item-value=\"value\"\n            label=\"Payment Type\"\n            outlined\n            dense\n            clearable\n            hide-details=\"auto\"\n            @change=\"onChangeOfPaymentType\"\n          ></v-select>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Account</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mr-16\"\n        >\n          <v-select\n            v-model=\"formData.account_id\"\n            :items=\"accounts\"\n            item-text=\"account_title\"\n            item-value=\"id\"\n            label=\"Account\"\n            outlined\n            :error-messages=\"errors.account_id\"\n            dense\n            clearable\n            hide-details=\"auto\"\n          ></v-select>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type === 'cash_payment'\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Date</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"pr-8 pl-8 ml-n4\"\n        >\n          <v-menu\n            v-model=\"formData.paymentDate\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            :disabled=\"formData.status === 'Posted'\"\n            max-width=\"290px\"\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"datePosted\"\n                label=\"Date\"\n                persistent-hint\n                :prepend-icon=\"icons.mdiCalendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              v-model=\"datePosted\"\n              no-title\n              color=\"primary\"\n              @input=\"formData.paymentDate = false\"\n            ></v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"3\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Amount </label>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"formData.amount\"\n            :max=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            :error-messages=\"errors.amount\"\n            class=\"text-green mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-btn\n            class=\"mt-n8\"\n            small\n            color=\"success\"\n            @click.prevent=\"copyTotalAmount\"\n          >\n            Copy Total Amount\n          </v-btn>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            disabled=\"\"\n            class=\"text-green ml-n12  mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type === 'online_payment'\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Date</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"pr-8 pl-8 ml-n4\"\n        >\n          <v-menu\n            v-model=\"formData.paymentDate\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            :disabled=\"formData.status === 'Posted'\"\n            max-width=\"290px\"\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"datePosted\"\n                label=\"Date\"\n                persistent-hint\n                :prepend-icon=\"icons.mdiCalendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              v-model=\"datePosted\"\n              no-title\n              color=\"primary\"\n              @input=\"formData.paymentDate = false\"\n            ></v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"3\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Mode of Transfer</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.mode_of_transfer\"\n            :error-messages=\"errors.mode_of_transfer\"\n            class=\"mt-n8\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Transaction Number</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.transaction_number\"\n            :error-messages=\"errors.transaction_number\"\n            class=\"mt-n8\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Amount </label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-currency-field\n            v-model=\"formData.amount\"\n            :max=\"totalAmountToPay\"\n            :error-messages=\"errors.amount\"\n            prefix=\"PHP\"\n            class=\"text-green mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n        <v-col cols=\"2\">\n          <v-btn\n            class=\"mt-n8\"\n            small\n            color=\"success\"\n            @click.prevent=\"copyTotalAmount\"\n          >\n            <v-icon>\n              {{ icons.mdiDatabaseArrowLeft }}\n            </v-icon>\n          </v-btn>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            disabled=\"\"\n            class=\"text-green ml-n12  mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type === 'check_payment'\">\n        <v-col\n          cols=\"3\"\n          class=\"mt-4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Date</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"pr-8 pl-8\"\n        >\n          <v-menu\n            v-model=\"formData.paymentDate\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            :disabled=\"formData.status === 'Posted'\"\n            max-width=\"290px\"\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"datePosted\"\n                label=\"Date\"\n                persistent-hint\n                :prepend-icon=\"icons.mdiCalendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              v-model=\"datePosted\"\n              no-title\n              color=\"primary\"\n              @input=\"formData.paymentDate = false\"\n            ></v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"3\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Bank Check</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.bank\"\n            class=\"mt-n8\"\n            :error-messages=\"errors.bank\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Bank Account Number</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.bank_account_number\"\n            class=\"mt-n8\"\n            :error-messages=\"errors.bank_account_number\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Check Type</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mt-n4\"\n        >\n          <v-select\n            v-model=\"formData.check_type\"\n            :items=\"checkTypes\"\n            :error-messages=\"errors.check_type\"\n            label=\"Check Type\"\n            outlined\n            dense\n            clearable\n            hide-details=\"auto\"\n          ></v-select>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Check Number</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.check_number\"\n            label=\"Check Number\"\n            :error-messages=\"errors.check_number\"\n            dense\n            hide-details=\"auto\"\n            class=\"mt-4\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-2\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Amount </label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mt-6\"\n        >\n          <v-currency-field\n            v-model=\"formData.amount\"\n            :max=\"totalAmountToPay\"\n            :error-messages=\"errors.amount\"\n            prefix=\"PHP\"\n            class=\"text-green mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n        <v-col cols=\"2\">\n          <v-btn\n            class=\"mt-2\"\n            small\n            color=\"success\"\n            @click.prevent=\"copyTotalAmount\"\n          >\n            <v-icon>\n              {{ icons.mdiDatabaseArrowLeft }}\n            </v-icon>\n          </v-btn>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            disabled=\"\"\n            class=\"text-green ml-n12  mt-n2\"\n          >\n          </v-currency-field>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col\n          offset-md=\"5\"\n          cols=\"12\"\n          class=\"mt-6\"\n        >\n          <v-btn\n            v-if=\"totalAmountToPay > 0\"\n            color=\"primary\"\n            @click=\"submit\"\n          >\n            Submit\n          </v-btn>\n          <v-btn\n            type=\"reset\"\n            outlined\n            color=\"error\"\n            class=\"mx-2\"\n            @click.prevent=\"cancel\"\n          >\n            Cancel\n          </v-btn>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { computed, ref, toRef } from '@vue/composition-api'\nimport { mdiCurrencySign, mdiDatabaseArrowLeft } from '@mdi/js'\nimport store from '@/store'\n\nexport default {\n  name: 'PaymentForm',\n  props: {\n    totalAmount: {\n      type: Number,\n      required: false,\n      default: (() => 0),\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('AccountStore/list')\n    const totalAmountToPay = toRef(props, 'totalAmount')\n    const types = [\n      { value: 'cash_payment', title: 'Cash Payment' },\n      { value: 'online_payment', title: 'Online Payment' },\n      { value: 'check_payment', title: 'Check Payment' },\n    ]\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n    const formData = ref({\n      amount: 0,\n      type: null,\n    })\n\n    const errors = ref({\n      account_id: null,\n      amount: null,\n    })\n\n    const copyTotalAmount = () => {\n      formData.value.amount = totalAmountToPay.value\n    }\n\n    const checkTypes = [\n      'Local',\n      'Regional',\n    ]\n\n    const paymentTypesMapping = {\n      cash_payment: 'Cash Payment',\n      check_payment: 'Check Payment',\n      online_payment: 'Online Payment',\n    }\n\n    const accounts = computed(() => store.state.AccountStore.accounts.filter(account => account.type === 'Bank'))\n\n    const hasError = ref(0)\n\n    const submit = () => {\n      const payment = {\n        type: formData.value.type,\n        account_id: formData.value.account_id,\n        payment_type: paymentTypesMapping[formData.value.type],\n        amount: formData.value.amount,\n        payment_date: datePosted.value,\n        mode_of_transfer: formData.value.mode_of_transfer,\n        reference_number: formData.value.transaction_number ?? formData.value.check_number,\n        transaction_number: formData.value.transaction_number,\n        check_number: formData.value.check_number,\n        bank: formData.value.bank,\n        bank_account_number: formData.value.bank_account_number,\n        check_type: formData.value.check_type,\n      }\n\n      if (payment.type === 'online_payment') {\n        if (!formData.value.mode_of_transfer) {\n          hasError.value += 1\n          errors.value.mode_of_transfer = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.mode_of_transfer = null\n        }\n\n        if (!formData.value.transaction_number) {\n          hasError.value += 1\n          errors.value.transaction_number = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.transaction_number = null\n        }\n      }\n\n      if (payment.type === 'check_payment') {\n        if (!formData.value.check_number) {\n          hasError.value += 1\n          errors.value.check_number = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.check_number = null\n        }\n        if (!formData.value.bank) {\n          hasError.value += 1\n          errors.value.bank = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.bank = null\n        }\n        if (!formData.value.bank_account_number) {\n          hasError.value += 1\n          errors.value.bank_account_number = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.bank_account_number = null\n        }\n        if (!formData.value.check_type) {\n          hasError.value += 1\n          errors.value.check_type = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.check_type = null\n        }\n      }\n\n      if (!payment.account_id) {\n        hasError.value += 1\n        errors.value.account_id = 'This field is required.'\n      } else {\n        hasError.value -= 1\n        errors.value.account_id = null\n      }\n\n      if (!payment.amount || payment.amount === 0) {\n        hasError.value += 1\n        errors.value.amount = 'This field is required.'\n      } else {\n        hasError.value -= 1\n        errors.value.amount = null\n      }\n\n      if (payment.account_id && hasError.value <= 0) {\n        emit('addedPayment', payment)\n\n        formData.value = {\n          amount: 0,\n        }\n      }\n    }\n\n    const onChangeOfPaymentType = () => {\n      errors.value = {\n        account_id: null,\n      }\n    }\n\n    const cancel = () => {\n      emit('toggleModal')\n    }\n\n    return {\n      onChangeOfPaymentType,\n      errors,\n      checkTypes,\n      submit,\n      cancel,\n      accounts,\n      copyTotalAmount,\n      datePosted,\n      formData,\n      types,\n      totalAmountToPay,\n      icons: {\n        mdiCurrencySign,\n        mdiDatabaseArrowLeft,\n      },\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}