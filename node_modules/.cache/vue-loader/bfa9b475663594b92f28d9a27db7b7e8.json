{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/purchase-order/PurchaseOrderInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/purchase-orders/purchase-order/PurchaseOrderInfo.vue","mtime":1659511233735},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Y29tcHV0ZWQsIHJlZiwgd2F0Y2h9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKaW1wb3J0IHsKICBDUkVBVEVfUFVSQ0hBU0VfT1JERVIsCiAgVVBEQVRFX1BVUkNIQVNFX09SREVSLAogIEdFVF9QUk9EVUNUUwp9IGZyb20gJ0Avc3RvcmUvYWN0aW9ucy50eXBlJwppbXBvcnQgUHVyY2hhc2VPcmRlckFkZFNlbGVjdG9yIGZyb20gIkAvdmlld3MvcGFnZXMvcHVyY2hhc2Utb3JkZXJzL2NvbXBvbmVudC9QdXJjaGFzZU9yZGVyQWRkU2VsZWN0b3IiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHtQdXJjaGFzZU9yZGVyQWRkU2VsZWN0b3J9LAogIHByb3BzOiB7CiAgICBpbmZvcm1hdGlvbkRhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHNrdTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIGluX3N0b2NrOiAnJywKICAgICAgICB0b3RhbDogJycsCiAgICAgICAgcGFpZF9hbW91bnQ6ICcnLAogICAgICB9KSwKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgIH0sCiAgfSwKICBzZXR1cChwcm9wcykgewogICAgY29uc3QgYnV0dG9uTGFiZWwgPSBwcm9wcy5tb2RlID09PSAnY3JlYXRlJyA/ICdTYXZlJyA6ICdVcGRhdGUnCiAgICBjb25zdCBzaG93QWxlcnQgPSByZWYoZmFsc2UpCiAgICBjb25zdCBzZWxlY3RlZFN1cHBsaWVyID0gcmVmKCcnKQogICAgY29uc3Qgc2VsZWN0ZWRQcm9kdWN0ID0gcmVmKCcnKQogICAgY29uc3QgYXR0YWNoZWRQcm9kdWN0cyA9IHJlZihbXSkKICAgIGNvbnN0IHNlbGVjdGVkUHJvZHVjdElkcyA9IHJlZihbXSkKICAgIGNvbnN0IHByb2R1Y3RSb3cgPSByZWYoMSkKICAgIGNvbnN0IHByb2R1Y3REcm9wZG93biA9IHJlZihbXSkKICAgIGNvbnN0IGVycm9ycyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLmdldHRlcnMuZXJyb3JzKQogICAgY29uc3Qgb3B0aW9uc0xvY2FsID0gY29tcHV0ZWQoKCkgPT4gcHJvcHMuaW5mb3JtYXRpb25EYXRhKQogICAgY29uc3QgcHJvZHVjdHMgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5nZXR0ZXJzLnByb2R1Y3RzKQoKICAgIGNvbnN0IGdvQmFjayA9ICgpID0+IHsKICAgICAgcm91dGVyLnB1c2goJy9wdXJjaGFzZS1vcmRlcnMnKQogICAgfQoKICAgIGNvbnN0IGF0dGFjaFByb2R1Y3RzID0gKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgIGF0dGFjaGVkUHJvZHVjdHMudmFsdWVbaW5kZXggLSAxXSA9IGl0ZW0KICAgICAgc2VsZWN0ZWRQcm9kdWN0SWRzLnZhbHVlW2luZGV4IC0gMV0gPSBpdGVtLnByb2R1Y3RfaWQKCiAgICAgIGlmIChzZWxlY3RlZFByb2R1Y3RJZHMudmFsdWUubGVuZ3RoKSB7CiAgICAgICAgLy8gYWRkIGRpc2FibGUgcHJvcGVydHkgdG8gcHJldmlvdXMgc2VsZWN0ZWQgaXRlbXMKICAgICAgICBwcm9kdWN0RHJvcGRvd24udmFsdWUgPSBwcm9kdWN0RHJvcGRvd24udmFsdWUubWFwKHByb2R1Y3QgPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLi4ucHJvZHVjdCwKICAgICAgICAgICAgZGlzYWJsZWQ6IHNlbGVjdGVkUHJvZHVjdElkcy52YWx1ZS5pbmNsdWRlcyhwcm9kdWN0LmlkKSA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9CgogICAgY29uc3QgcmVzb2x2ZUZvcm1TdWNjZXNzID0gKCkgPT4gewogICAgICBzaG93QWxlcnQudmFsdWUgPSB0cnVlCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGdvQmFjaygpCiAgICAgIH0sIDUwMDApCiAgICB9CgogICAgY29uc3QgaGFuZGxlQWRkUHJvZHVjdFJvdyA9ICgpID0+IHsKICAgICAgaWYgKHByb2R1Y3RSb3cudmFsdWUgPCA1KSBwcm9kdWN0Um93LnZhbHVlICs9IDEKICAgIH0KCiAgICBjb25zdCBzYXZlID0gKCkgPT4gewogICAgICBjb25zdCBjdXJyZW50Rm9ybSA9IG9wdGlvbnNMb2NhbC52YWx1ZQogICAgICBjdXJyZW50Rm9ybS5pdGVtcyA9IGF0dGFjaGVkUHJvZHVjdHMudmFsdWUKICAgICAgY29uc3QgZm9ybSA9IGN1cnJlbnRGb3JtCgogICAgICBjb25zb2xlLmxvZyhmb3JtKQoKICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICd1cGRhdGUnKSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goVVBEQVRFX1BVUkNIQVNFX09SREVSLCBmb3JtKS50aGVuKGRhdGEgPT4gewogICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICByZXNvbHZlRm9ybVN1Y2Nlc3MoKQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgICAgIC8vIHN0b3JlLmRpc3BhdGNoKEdFVF9QVVJDSEFTRV9PUkRFUlMsIGZvcm0pLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgLy8gICBpZiAoZGF0YSAhPSBudWxsKSB7CiAgICAgICAgLy8gICAgIHJlc29sdmVGb3JtU3VjY2VzcygpCiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gfSkKICAgICAgfQoKICAgICAgLy8gaWYgKHByb3BzLm1vZGUgPT09ICdjcmVhdGUnKSB7CiAgICAgIC8vICAgc3RvcmUuZGlzcGF0Y2goQ1JFQVRFX1BVUkNIQVNFX09SREVSLCBmb3JtKS50aGVuKGRhdGEgPT4gewogICAgICAvLyAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAvLyAgICAgICByZXNvbHZlRm9ybVN1Y2Nlc3MoKQogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0pCiAgICAgIC8vIH0KICAgIH0KCiAgICB3YXRjaCgKICAgICAgcHJvZHVjdHMsCiAgICAgICgpID0+IHsKICAgICAgICBwcm9kdWN0RHJvcGRvd24udmFsdWUgPSBwcm9kdWN0cy52YWx1ZQogICAgICB9LAogICAgICB7IGltbWVkaWF0ZTogdHJ1ZSB9CiAgICApCgogICAgc3RvcmUuZGlzcGF0Y2goR0VUX1BST0RVQ1RTKQoKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkU3VwcGxpZXIsCiAgICAgIHNlbGVjdGVkUHJvZHVjdCwKICAgICAgb3B0aW9uc0xvY2FsLAogICAgICBzaG93QWxlcnQsCiAgICAgIGVycm9ycywKICAgICAgYnV0dG9uTGFiZWwsCiAgICAgIHByb2R1Y3RSb3csCiAgICAgIHByb2R1Y3REcm9wZG93biwKICAgICAgZ29CYWNrLAogICAgICBzYXZlLAogICAgICBhdHRhY2hQcm9kdWN0cywKICAgICAgaGFuZGxlQWRkUHJvZHVjdFJvdywKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["PurchaseOrderInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PurchaseOrderInfo.vue","sourceRoot":"src/views/pages/purchase-orders/purchase-order","sourcesContent":["<template>\n  <v-card\n    flat\n    class=\"pa-3 mt-2\"\n  >\n    <v-alert\n      v-show=\"showAlert\"\n      dense\n      text\n      type=\"success\"\n    >\n      Successfully <strong>{{ mode }}d</strong> a purchase order. You will be automatically\n      redirected in a bit.\n    </v-alert>\n    <v-form class=\"multi-col-validation\">\n      <v-card-text class=\"pt-5\">\n        <v-row>\n          <v-col>\n            <div\n              v-for=\"index in productRow\"\n              :key=\"index\"\n            >\n              <purchase-order-add-selector\n                @selectedProduct=\"attachProducts\"\n                @addProductRow=\"handleAddProductRow\"\n                :product-dropdown=\"productDropdown\"\n                :item-number=\"index\"\n              />\n            </div>\n          </v-col>\n          <div\n            v-show=\"selectedProduct\"\n            class=\"h-full w-full\"\n          >\n            <v-col\n              cols=\"12\"\n            >\n              <v-text-field\n                v-model=\"optionsLocal.payment_method\"\n                outlined\n                dense\n                label=\"Description\"\n                :readonly=\"mode === 'show'\"\n                hide-details=\"auto\"\n                :persistent-placeholder=\"mode === 'show'\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"6\">\n              <v-text-field\n                v-model=\"optionsLocal.total\"\n                outlined\n                dense\n                label=\"Total Amount Payable\"\n                :readonly=\"mode === 'show'\"\n                hide-details=\"auto\"\n                :persistent-placeholder=\"mode === 'show'\"\n              ></v-text-field>\n            </v-col>\n            <v-col\n              cols=\"12\"\n              md=\"6\"\n            >\n              <v-text-field\n                v-model=\"optionsLocal.paid_amount\"\n                outlined\n                dense\n                label=\"Paid Amount\"\n                :readonly=\"mode === 'show'\"\n                hide-details=\"auto\"\n                :persistent-placeholder=\"mode === 'show'\"\n              ></v-text-field>\n            </v-col>\n          </div>\n        </v-row>\n      </v-card-text>\n\n      <v-card-text>\n        <v-btn\n          v-show=\"mode === 'create' || mode === 'update'\"\n          outlined\n          class=\"mt-3 mr-3\"\n          color=\"primary\"\n          @click=\"save\"\n        >\n          {{ buttonLabel }}\n        </v-btn>\n        <v-btn\n          outlined\n          class=\"mt-3\"\n          type=\"reset\"\n          @click.prevent=\"goBack\"\n        >\n          Back to List\n        </v-btn>\n      </v-card-text>\n    </v-form>\n  </v-card>\n</template>\n\n<script>\nimport {computed, ref, watch} from '@vue/composition-api'\nimport router from '@/router'\nimport store from '@/store'\nimport {\n  CREATE_PURCHASE_ORDER,\n  UPDATE_PURCHASE_ORDER,\n  GET_PRODUCTS\n} from '@/store/actions.type'\nimport PurchaseOrderAddSelector from \"@/views/pages/purchase-orders/component/PurchaseOrderAddSelector\";\n\nexport default {\n  components: {PurchaseOrderAddSelector},\n  props: {\n    informationData: {\n      type: Object,\n      default: () => ({\n        name: '',\n        sku: '',\n        description: '',\n        in_stock: '',\n        total: '',\n        paid_amount: '',\n      }),\n    },\n    mode: {\n      type: String,\n    },\n  },\n  setup(props) {\n    const buttonLabel = props.mode === 'create' ? 'Save' : 'Update'\n    const showAlert = ref(false)\n    const selectedSupplier = ref('')\n    const selectedProduct = ref('')\n    const attachedProducts = ref([])\n    const selectedProductIds = ref([])\n    const productRow = ref(1)\n    const productDropdown = ref([])\n    const errors = computed(() => store.getters.errors)\n    const optionsLocal = computed(() => props.informationData)\n    const products = computed(() => store.getters.products)\n\n    const goBack = () => {\n      router.push('/purchase-orders')\n    }\n\n    const attachProducts = (item, index) => {\n      attachedProducts.value[index - 1] = item\n      selectedProductIds.value[index - 1] = item.product_id\n\n      if (selectedProductIds.value.length) {\n        // add disable property to previous selected items\n        productDropdown.value = productDropdown.value.map(product => {\n          return {\n            ...product,\n            disabled: selectedProductIds.value.includes(product.id) ? true : false,\n          }\n        })\n      }\n    }\n\n    const resolveFormSuccess = () => {\n      showAlert.value = true\n      setTimeout(() => {\n        goBack()\n      }, 5000)\n    }\n\n    const handleAddProductRow = () => {\n      if (productRow.value < 5) productRow.value += 1\n    }\n\n    const save = () => {\n      const currentForm = optionsLocal.value\n      currentForm.items = attachedProducts.value\n      const form = currentForm\n\n      console.log(form)\n\n      if (props.mode === 'update') {\n        store.dispatch(UPDATE_PURCHASE_ORDER, form).then(data => {\n          if (data != null) {\n            resolveFormSuccess()\n          }\n        })\n\n        // store.dispatch(GET_PURCHASE_ORDERS, form).then(data => {\n        //   if (data != null) {\n        //     resolveFormSuccess()\n        //   }\n        // })\n      }\n\n      // if (props.mode === 'create') {\n      //   store.dispatch(CREATE_PURCHASE_ORDER, form).then(data => {\n      //     if (data != null) {\n      //       resolveFormSuccess()\n      //     }\n      //   })\n      // }\n    }\n\n    watch(\n      products,\n      () => {\n        productDropdown.value = products.value\n      },\n      { immediate: true }\n    )\n\n    store.dispatch(GET_PRODUCTS)\n\n    return {\n      selectedSupplier,\n      selectedProduct,\n      optionsLocal,\n      showAlert,\n      errors,\n      buttonLabel,\n      productRow,\n      productDropdown,\n      goBack,\n      save,\n      attachProducts,\n      handleAddProductRow,\n    }\n  },\n}\n</script>\n"]}]}