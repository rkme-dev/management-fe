{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/master-files/vats/VatListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/master-files/vats/VatListTable.vue","mtime":1662690970165},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1652172763063},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1650363912993},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1650363919730}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1kaUFjY291bnRFZGl0LCBtZGlEZWxldGVDaXJjbGUgfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgewogIHJlZiwKICB3YXRjaCwKfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScKaW1wb3J0IFZhdEZvcm0gZnJvbSAnQC92aWV3cy9wYWdlcy9tYXN0ZXItZmlsZXMvdmF0cy9WYXRGb3JtLnZ1ZScKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVmF0Rm9ybSwKICB9LAogIHNldHVwKCkgewogICAgY29uc3Qgc3RhdHVzQ29sb3IgPSB7CiAgICAgIEFjdGl2ZTogJ3N1Y2Nlc3MnLAogICAgICBJbmFjdGl2ZTogJ2Vycm9yJywKICAgIH0KCiAgICBjb25zdCBzdGF0dXNGaWx0ZXIgPSByZWYoJycpCiAgICBjb25zdCBzdGF0dXNPcHRpb25zID0gcmVmKFsKICAgICAgewogICAgICAgIHRpdGxlOiAnQWN0aXZlJywKICAgICAgICBpZDogJ0FjdGl2ZScsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogJ0luYWN0aXZlJywKICAgICAgICBpZDogJ0luYWN0aXZlJywKICAgICAgfSwKICAgIF0pCgogICAgY29uc3Qgc2VhcmNoID0gcmVmKCkKCiAgICB3YXRjaChzdGF0dXNGaWx0ZXIsIHZhbHVlID0+IHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ1ZhdFN0b3JlL2ZpbHRlclZhdCcsIHN0YXR1c0ZpbHRlci52YWx1ZSkKICAgIH0pCgogICAgcmV0dXJuIHsKICAgICAgYWxlcnQsCiAgICAgIHN0YXR1c0ZpbHRlciwKICAgICAgc3RhdHVzT3B0aW9ucywKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlBY2NvdW50RWRpdCwKICAgICAgICBtZGlEZWxldGVDaXJjbGUsCiAgICAgIH0sCiAgICAgIHNlYXJjaCwKICAgICAgc3RhdHVzQ29sb3IsCiAgICB9CiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgYWxlcnQ6IHsKICAgICAgbWVzc2FnZTogJycsCiAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgc2hvdzogZmFsc2UsCiAgICB9LAogICAgZGlhbG9nOiBmYWxzZSwKICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICBoZWFkZXJzOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAnVmF0IENvZGUnLAogICAgICAgIGFsaWduOiAnc3RhcnQnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiAnY29kZScsCiAgICAgIH0sCiAgICAgIHsgdGV4dDogJ05hbWUnLCB2YWx1ZTogJ25hbWUnIH0sCiAgICAgIHsgdGV4dDogJ1BlcmNlbnRhZ2UnLCB2YWx1ZTogJ3BlcmNlbnRhZ2UnLCBhbGlnbjogJ2NlbnRlcicgfSwKICAgICAgewogICAgICAgIHRleHQ6ICdTdGF0dXMnLCB2YWx1ZTogJ2lzX2FjdGl2ZScsIGFsaWduOiAnY2VudGVyJywgc29ydGFibGU6IHRydWUsCiAgICAgIH0sCiAgICAgIHsgdGV4dDogJ0FjdGlvbnMnLCB2YWx1ZTogJ2FjdGlvbnMnLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgIF0sCiAgICBlZGl0ZWRJbmRleDogLTEsCiAgICBlZGl0ZWRJdGVtOiB7CiAgICAgIGNvZGU6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgcGVyY2VudGFnZTogJycsCiAgICAgIGlzX2FjdGl2ZTogJycsCiAgICAgIGFjdGlvbnM6ICcnLAogICAgfSwKICAgIGRlZmF1bHRJdGVtOiB7CiAgICAgIGNvZGU6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgcGVyY2VudGFnZTogJycsCiAgICAgIGlzX2FjdGl2ZTogJycsCiAgICAgIGFjdGlvbnM6ICcnLAogICAgfSwKICAgIG1vZGU6ICdjcmVhdGUnLAogIH0pLAoKICBjb21wdXRlZDogewogICAgZm9ybVRpdGxlKCkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdnVlL25vLXNpZGUtZWZmZWN0cy1pbi1jb21wdXRlZC1wcm9wZXJ0aWVzCiAgICAgIHRoaXMubW9kZSA9IHRoaXMuZWRpdGVkSW5kZXggPT09IC0xID8gJ2NyZWF0ZScgOiAnZWRpdCcKCiAgICAgIHJldHVybiB0aGlzLmVkaXRlZEluZGV4ID09PSAtMSA/ICdOZXcgVmF0JyA6ICdFZGl0IFZhdCcKICAgIH0sCiAgICB2YXRzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuVmF0U3RvcmUudmF0cwogICAgfSwKICAgIGxvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5WYXRTdG9yZS5sb2FkaW5nCiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBkaWFsb2codmFsKSB7CiAgICAgIHJldHVybiB2YWwgfHwgdGhpcy5jbG9zZSgpCiAgICB9LAogICAgZGlhbG9nRGVsZXRlKHZhbCkgewogICAgICByZXR1cm4gdmFsIHx8IHRoaXMuY2xvc2VEZWxldGUoKQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnVmF0U3RvcmUvbGlzdCcpCiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnVmF0U3RvcmUvcmVtb3ZlRXJyb3JzJykKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlVXNlckNyZWF0ZSh2YWx1ZSkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuYWxlcnQubWVzc2FnZSA9IHZhbHVlLmFsZXJ0TWVzc2FnZQogICAgICB0aGlzLmFsZXJ0LnR5cGUgPSB2YWx1ZS5hbGVydFR5cGUKICAgICAgdGhpcy5hbGVydC5zaG93ID0gdHJ1ZQoKICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuYWxlcnQuc2hvdyA9IGZhbHNlIH0sIDE1MDApCiAgICB9LAoKICAgIGVkaXRJdGVtKGl0ZW0pIHsKICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMudmF0cy5pbmRleE9mKGl0ZW0pCiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IHsgLi4uaXRlbSB9CiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgfSwKCiAgICBkZWxldGVJdGVtKGl0ZW0pIHsKICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMudmF0cy5pbmRleE9mKGl0ZW0pCiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IHsgLi4uaXRlbSB9CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gdHJ1ZQogICAgfSwKCiAgICBkZWxldGVJdGVtQ29uZmlybSgpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ1ZhdFN0b3JlL2RlbGV0ZVRlcm0nLCB0aGlzLnZhdHNbdGhpcy5lZGl0ZWRJbmRleF0uaWQpCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdWYXRTdG9yZS9saXN0JykKICAgICAgdGhpcy5jbG9zZURlbGV0ZSgpCiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSB7IC4uLnRoaXMuZGVmYXVsdEl0ZW0gfQogICAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSAtMQogICAgICB9KQogICAgfSwKCiAgICBjbG9zZURlbGV0ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSBmYWxzZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0geyAuLi50aGlzLmRlZmF1bHRJdGVtIH0KICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTEKICAgICAgfSkKICAgIH0sCgogICAgc2F2ZSgpIHsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy51c2Vyc1t0aGlzLmVkaXRlZEluZGV4XSwgdGhpcy5lZGl0ZWRJdGVtKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXNlcnMucHVzaCh0aGlzLmVkaXRlZEl0ZW0pCiAgICAgIH0KICAgICAgdGhpcy5jbG9zZSgpCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["VatListTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VatListTable.vue","sourceRoot":"src/views/pages/master-files/vats","sourcesContent":["<template>\n  <div>\n    <v-alert\n      :type=\"alert.type\"\n      dismissible\n      :value=\"alert.show\"\n    >\n      {{ alert.message }}\n    </v-alert>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"vats\"\n      :search=\"search\"\n      class=\"elevation-1 font-weight-light\"\n      :loading=\"loading\"\n      sort-by=\"name\"\n      fixed-header\n    >\n      <!-- is_active -->\n      <template #[`item.is_active`]=\"{item}\">\n        <div class=\"d-flex justify-center\">\n          <v-chip\n            small\n            :class=\"`${statusColor[item.is_active]}--text`\"\n            class=\"v-chip-light-bg text-center\"\n          >\n            {{ item.is_active }}\n          </v-chip>\n        </div>\n      </template>\n      <template v-slot:top>\n        <v-toolbar\n          flat\n        >\n          <v-col\n            cols=\"12\"\n            offset-md=\"12\"\n            md=\"2\"\n          >\n            <v-toolbar-title>Vats</v-toolbar-title>\n          </v-col>\n          <v-divider\n            class=\"mx-2\"\n            inset\n            vertical\n          ></v-divider>\n          <v-card-text>\n            <v-row>\n              <v-col\n                cols=\"4\"\n              >\n                <v-text-field\n                  v-model=\"search\"\n                  :append-icon=\"icons.mdiMagnify\"\n                  label=\"Search\"\n                  single-line\n                  hide-details\n                ></v-text-field>\n              </v-col>\n              <v-col\n                cols=\"4\"\n                offset-md=\"4\"\n              >\n                <v-select\n                  v-model=\"statusFilter\"\n                  dense\n                  outlined\n                  multiple\n                  :prepend-inner-icon=\"icons.mdiHumanEdit\"\n                  item-text=\"title\"\n                  item-value=\"id\"\n                  label=\"Status\"\n                  :items=\"statusOptions\"\n                  hide-details=\"auto\"\n                ></v-select>\n              </v-col>\n\n            </v-row>\n          </v-card-text>\n          <v-dialog\n            v-model=\"dialog\"\n            max-width=\"900px\"\n            max-height=\"900px\"\n            height=\"500px\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                color=\"primary\"\n                dark\n                class=\"mb-2\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                Create Vat\n              </v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">{{ formTitle }}</span>\n              </v-card-title>\n              <v-card-text>\n                <vat-form\n                  :mode=\"mode\"\n                  :vat=\"editedItem\"\n                  @clicked=\"dialog=false\"\n                ></vat-form>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n          <v-dialog\n            v-model=\"dialogDelete\"\n            max-width=\"500px\"\n          >\n            <v-card>\n              <v-card-title>\n                Are you sure you want to delete this item?\n              </v-card-title>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"error\"\n                  text\n                  @click=\"closeDelete\"\n                >\n                  Cancel\n                </v-btn>\n                <v-btn\n                  color=\"success\"\n                  text\n                  @click=\"deleteItemConfirm\"\n                >\n                  OK\n                </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-icon\n          medium\n          class=\"mr-2\"\n          @click=\"editItem(item)\"\n        >\n          {{ icons.mdiAccountEdit }}\n        </v-icon>\n        <v-icon\n          v-if=\"item.is_active === 'Active'\"\n          small\n          @click=\"deleteItem(item)\"\n        >\n          {{ icons.mdiDeleteCircle }}\n        </v-icon>\n      </template>\n      <template v-slot:no-data>\n        <v-btn\n          color=\"primary\"\n        >\n          Refresh\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nimport { mdiAccountEdit, mdiDeleteCircle } from '@mdi/js'\nimport {\n  ref,\n  watch,\n} from '@vue/composition-api'\nimport VatForm from '@/views/pages/master-files/vats/VatForm.vue'\nimport store from '@/store'\n\nexport default {\n  components: {\n    VatForm,\n  },\n  setup() {\n    const statusColor = {\n      Active: 'success',\n      Inactive: 'error',\n    }\n\n    const statusFilter = ref('')\n    const statusOptions = ref([\n      {\n        title: 'Active',\n        id: 'Active',\n      },\n      {\n        title: 'Inactive',\n        id: 'Inactive',\n      },\n    ])\n\n    const search = ref()\n\n    watch(statusFilter, value => {\n      store.dispatch('VatStore/filterVat', statusFilter.value)\n    })\n\n    return {\n      alert,\n      statusFilter,\n      statusOptions,\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n      },\n      search,\n      statusColor,\n    }\n  },\n  data: () => ({\n    alert: {\n      message: '',\n      type: 'success',\n      show: false,\n    },\n    dialog: false,\n    dialogDelete: false,\n    headers: [\n      {\n        text: 'Vat Code',\n        align: 'start',\n        sortable: true,\n        value: 'code',\n      },\n      { text: 'Name', value: 'name' },\n      { text: 'Percentage', value: 'percentage', align: 'center' },\n      {\n        text: 'Status', value: 'is_active', align: 'center', sortable: true,\n      },\n      { text: 'Actions', value: 'actions', sortable: false },\n    ],\n    editedIndex: -1,\n    editedItem: {\n      code: '',\n      name: '',\n      percentage: '',\n      is_active: '',\n      actions: '',\n    },\n    defaultItem: {\n      code: '',\n      name: '',\n      percentage: '',\n      is_active: '',\n      actions: '',\n    },\n    mode: 'create',\n  }),\n\n  computed: {\n    formTitle() {\n      // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n      this.mode = this.editedIndex === -1 ? 'create' : 'edit'\n\n      return this.editedIndex === -1 ? 'New Vat' : 'Edit Vat'\n    },\n    vats() {\n      return this.$store.state.VatStore.vats\n    },\n    loading() {\n      return this.$store.state.VatStore.loading\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      return val || this.close()\n    },\n    dialogDelete(val) {\n      return val || this.closeDelete()\n    },\n  },\n  created() {\n    this.$store.dispatch('VatStore/list')\n    this.$store.dispatch('VatStore/removeErrors')\n  },\n  methods: {\n    closeUserCreate(value) {\n      this.dialog = false\n      this.alert.message = value.alertMessage\n      this.alert.type = value.alertType\n      this.alert.show = true\n\n      setTimeout(() => { this.alert.show = false }, 1500)\n    },\n\n    editItem(item) {\n      this.editedIndex = this.vats.indexOf(item)\n      this.editedItem = { ...item }\n      this.dialog = true\n    },\n\n    deleteItem(item) {\n      this.editedIndex = this.vats.indexOf(item)\n      this.editedItem = { ...item }\n      this.dialogDelete = true\n    },\n\n    deleteItemConfirm() {\n      this.$store.dispatch('VatStore/deleteTerm', this.vats[this.editedIndex].id)\n      this.$store.dispatch('VatStore/list')\n      this.closeDelete()\n    },\n\n    close() {\n      this.dialog = false\n      this.$nextTick(() => {\n        this.editedItem = { ...this.defaultItem }\n        this.editedIndex = -1\n      })\n    },\n\n    closeDelete() {\n      this.dialogDelete = false\n      this.$nextTick(() => {\n        this.editedItem = { ...this.defaultItem }\n        this.editedIndex = -1\n      })\n    },\n\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.users[this.editedIndex], this.editedItem)\n      } else {\n        this.users.push(this.editedItem)\n      }\n      this.close()\n    },\n  },\n}\n</script>\n"]}]}