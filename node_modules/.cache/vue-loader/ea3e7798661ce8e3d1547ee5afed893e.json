{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/master-files/finish-products/UnitAndPackingForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/master-files/finish-products/UnitAndPackingForm.vue","mtime":1664792701506},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbWRpQWNjb3VudEVkaXQsCiAgbWRpRGVsZXRlQ2lyY2xlLAogIG1kaUluZm9ybWF0aW9uLAogIG1kaVRleHRCb3hQbHVzLAp9IGZyb20gJ0BtZGkvanMnCmltcG9ydCB7CiAgY29tcHV0ZWQsIHJlZiwgdG9SZWYsCn0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVbml0QW5kUGFja2luZ0Zvcm0nLAogIHByb3BzOiB7CiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICgoKSA9PiBmYWxzZSksCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogKCgpID0+ICdDcmVhdGUnKSwKICAgIH0sCiAgICBleGlzdGluZ1VuaXRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgZGVmYXVsdDogKCgpID0+IFtdKSwKICAgIH0sCiAgICBpdGVtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgY29uc3QgaXNEaXNhYmxlZCA9IHRvUmVmKHByb3BzLCAnZGlzYWJsZWQnKQogICAgY29uc3QgcHJvZHVjdERhdGEgPSB0b1JlZihwcm9wcywgJ3Byb2R1Y3QnKQogICAgY29uc3QgaXRlbUZvcm1Nb2RhbCA9IHJlZihmYWxzZSkKICAgIGNvbnN0IGVycm9ycyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLkZpbmlzaFByb2R1Y3RTdG9yZS5lcnJvcnMpCiAgICBjb25zdCBmb3JtRGF0YSA9IHJlZih7fSkKICAgIGNvbnN0IGZvcm1UaXRsZSA9IHJlZignQWRkIFVuaXQgYW5kIFBhY2tpbmcnKQogICAgY29uc3QgdW5pdEl0ZW1zID0gdG9SZWYocHJvcHMsICdleGlzdGluZ1VuaXRzJykKCiAgICBjb25zdCB1bml0c0xpc3QgPSBjb21wdXRlZCgoKSA9PiBzdG9yZS5zdGF0ZS5Vbml0UGFja2luZ1N0b3JlLmxpc3QpCiAgICBjb25zdCBjdXJyZW50SXRlbSA9IHJlZih7fSkKCiAgICBjb25zdCB1bml0cyA9IHJlZihbXSkKCiAgICBjb25zdCBhZGRJdGVtID0gKCkgPT4gewogICAgICBjb25zdCBleGlzdCA9IHVuaXRJdGVtcy52YWx1ZS5maW5kKHJvd0l0ZW0gPT4gcm93SXRlbS5pZCA9PT0gY3VycmVudEl0ZW0udmFsdWUudW5pdF9pZCkKCiAgICAgIGlmIChleGlzdCA9PT0gdW5kZWZpbmVkIHx8IGV4aXN0ID09PSBudWxsKSB7CiAgICAgICAgY29uc3QgdW5pdCA9IHVuaXRzTGlzdC52YWx1ZS5maW5kKGl0ZW0gPT4gY3VycmVudEl0ZW0udmFsdWUudW5pdF9pZCA9PT0gaXRlbS5pZCkKCiAgICAgICAgZW1pdCgnYWRkZWRVbml0UGFja2luZycsIHsKICAgICAgICAgIG5hbWU6IHVuaXQubmFtZSwKICAgICAgICAgIHBpdm90OiB7CiAgICAgICAgICAgIHVuaXRfcGFja2luZ19pZDogdW5pdC5pZCwKICAgICAgICAgICAgcGFja2luZzogY3VycmVudEl0ZW0udmFsdWUucGFja2luZywKICAgICAgICAgIH0sCiAgICAgICAgICBpZDogdW5pdC5pZCwKICAgICAgICB9KQogICAgICB9CgogICAgICBjdXJyZW50SXRlbS52YWx1ZS5wYWNraW5nID0gbnVsbAogICAgICBjdXJyZW50SXRlbS52YWx1ZS51bml0X2lkID0gbnVsbAogICAgICBpdGVtRm9ybU1vZGFsLnZhbHVlID0gZmFsc2UKICAgIH0KCiAgICBjb25zdCBkZWxldGVJdGVtID0gaXRlbSA9PiB7CiAgICAgIGNvbnN0IGluZGV4SXRlbSA9IHVuaXRJdGVtcy52YWx1ZS5maW5kSW5kZXgodW5pdEl0ZW0gPT4gdW5pdEl0ZW0uaWQgPT09IGl0ZW0uaWQpCiAgICAgIHVuaXRJdGVtcy52YWx1ZS5zcGxpY2UoaW5kZXhJdGVtLCAxKQogICAgICBpdGVtRm9ybU1vZGFsLnZhbHVlID0gZmFsc2UKICAgIH0KCiAgICBjb25zdCBjYW5jZWwgPSAoKSA9PiB7CiAgICAgIGl0ZW1Gb3JtTW9kYWwudmFsdWUgPSBmYWxzZQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIHVuaXRzTGlzdCwKICAgICAgZXJyb3JzLAogICAgICBhZGRJdGVtLAogICAgICBjYW5jZWwsCiAgICAgIGRlbGV0ZUl0ZW0sCiAgICAgIGlzRGlzYWJsZWQsCiAgICAgIGZvcm1UaXRsZSwKICAgICAgY3VycmVudEl0ZW0sCiAgICAgIHVuaXRJdGVtcywKICAgICAgZm9ybURhdGEsCiAgICAgIGl0ZW1Gb3JtTW9kYWwsCiAgICAgIHVuaXRzLAogICAgICBoZWFkZXJzOiBbCiAgICAgICAgeyB0ZXh0OiAnSUQnLCBzb3J0YWJsZTogdHJ1ZSwgdmFsdWU6ICdwaXZvdC51bml0X3BhY2tpbmdfaWQnIH0sCiAgICAgICAgeyB0ZXh0OiAnVW5pdCBOYW1lJywgc29ydGFibGU6IHRydWUsIHZhbHVlOiAnbmFtZScgfSwKICAgICAgICB7IHRleHQ6ICdQYWNraW5nJywgdmFsdWU6ICdwaXZvdC5wYWNraW5nJyB9LAogICAgICAgIHsgdGV4dDogJ0FjdGlvbnMnLCB2YWx1ZTogJ2FjdGlvbnMnIH0sCiAgICAgIF0sCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpQWNjb3VudEVkaXQsCiAgICAgICAgbWRpRGVsZXRlQ2lyY2xlLAogICAgICAgIG1kaUluZm9ybWF0aW9uLAogICAgICAgIG1kaVRleHRCb3hQbHVzLAogICAgICB9LAogICAgfQogIH0sCn0K"},{"version":3,"sources":["UnitAndPackingForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UnitAndPackingForm.vue","sourceRoot":"src/views/pages/master-files/finish-products","sourcesContent":["<template>\n  <v-row>\n    <v-col\n      cols=\"12\"\n    >\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"unitItems\"\n        :items-per-page=\"5\"\n      >\n        <template v-slot:top>\n          <v-toolbar\n            flat\n            color=\"primary\"\n          >\n            <v-dialog\n              v-model=\"itemFormModal\"\n              width=\"1200px\"\n              height=\"500px\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  elevation=\"10\"\n                  dark\n                  class=\"mb-2\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                >\n                  Add Unit\n                </v-btn>\n              </template>\n              <v-card>\n                <v-card-title>\n                  <span class=\"headline\">{{ formTitle }}</span>\n                </v-card-title>\n                <v-card-text>\n                  <v-form>\n                    <v-row>\n                      <v-col cols=\"12\">\n                        <v-alert\n                          color=\"primary\"\n                          text\n                          style=\"margin-bottom: -10px\"\n                        >\n                          <div class=\"d-flex align-start\">\n                            <v-icon color=\"primary\">\n                              {{ icons.mdiTextBoxPlus }}\n                            </v-icon>\n                            <div class=\"ms-3\">\n                              <p class=\"text-base font-weight-medium mb-1\">\n                                Unit and Packing\n                              </p>\n                            </div>\n                          </div>\n                        </v-alert>\n                      </v-col>\n                      <v-col\n                        cols=\"6\"\n                      >\n                        <v-select\n                          v-model=\"currentItem.unit_id\"\n                          :items=\"unitsList\"\n                          item-text=\"name\"\n                          item-value=\"id\"\n                          :error-messages=\"errors.unit_id\"\n                          label=\"Unit\"\n                        >\n                        </v-select>\n                      </v-col>\n                      <v-col\n                        cols=\"6\"\n                      >\n                        <v-text-field\n                          v-model=\"currentItem.packing\"\n                          outlined\n                          dense\n                          type=\"number\"\n                          min=\"0\"\n                          step=\"1\"\n                          onfocus=\"this.previousValue = this.value\"\n                          onkeydown=\"this.previousValue = this.value\"\n                          oninput=\"validity.valid || (value = this.previousValue)\"\n                          hide-details=\"auto\"\n                          :error-messages=\"errors.packing\"\n                          label=\"Packing\"\n                        ></v-text-field>\n                      </v-col>\n                      <v-col\n                        cols=\"12\"\n                        class=\"d-flex\"\n                      >\n                        <v-btn\n                          v-if=\"currentItem.unit_id && currentItem.packing\"\n                          color=\"primary\"\n                          class=\"me-3 mt-4\"\n                          @click=\"addItem\"\n                        >\n                          Submit\n                        </v-btn>\n                        <v-btn\n                          outlined\n                          class=\"me-3 mt-4\"\n                          type=\"reset\"\n                          @click.prevent=\"cancel\"\n                        >\n                          Cancel\n                        </v-btn>\n                      </v-col>\n                    </v-row>\n                  </v-form>\n                </v-card-text>\n              </v-card>\n            </v-dialog>\n          </v-toolbar>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon\n            small\n            @click=\"deleteItem(item)\"\n          >\n            {{ icons.mdiDeleteCircle }}\n          </v-icon>\n        </template>\n      </v-data-table>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport {\n  mdiAccountEdit,\n  mdiDeleteCircle,\n  mdiInformation,\n  mdiTextBoxPlus,\n} from '@mdi/js'\nimport {\n  computed, ref, toRef,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  name: 'UnitAndPackingForm',\n  props: {\n    disabled: {\n      type: Boolean,\n      required: false,\n      default: (() => false),\n    },\n    mode: {\n      type: String,\n      required: false,\n      default: (() => 'Create'),\n    },\n    existingUnits: {\n      type: Array,\n      required: true,\n      default: (() => []),\n    },\n    items: {\n      type: Array,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    const isDisabled = toRef(props, 'disabled')\n    const productData = toRef(props, 'product')\n    const itemFormModal = ref(false)\n    const errors = computed(() => store.state.FinishProductStore.errors)\n    const formData = ref({})\n    const formTitle = ref('Add Unit and Packing')\n    const unitItems = toRef(props, 'existingUnits')\n\n    const unitsList = computed(() => store.state.UnitPackingStore.list)\n    const currentItem = ref({})\n\n    const units = ref([])\n\n    const addItem = () => {\n      const exist = unitItems.value.find(rowItem => rowItem.id === currentItem.value.unit_id)\n\n      if (exist === undefined || exist === null) {\n        const unit = unitsList.value.find(item => currentItem.value.unit_id === item.id)\n\n        emit('addedUnitPacking', {\n          name: unit.name,\n          pivot: {\n            unit_packing_id: unit.id,\n            packing: currentItem.value.packing,\n          },\n          id: unit.id,\n        })\n      }\n\n      currentItem.value.packing = null\n      currentItem.value.unit_id = null\n      itemFormModal.value = false\n    }\n\n    const deleteItem = item => {\n      const indexItem = unitItems.value.findIndex(unitItem => unitItem.id === item.id)\n      unitItems.value.splice(indexItem, 1)\n      itemFormModal.value = false\n    }\n\n    const cancel = () => {\n      itemFormModal.value = false\n    }\n\n    return {\n      unitsList,\n      errors,\n      addItem,\n      cancel,\n      deleteItem,\n      isDisabled,\n      formTitle,\n      currentItem,\n      unitItems,\n      formData,\n      itemFormModal,\n      units,\n      headers: [\n        { text: 'ID', sortable: true, value: 'pivot.unit_packing_id' },\n        { text: 'Unit Name', sortable: true, value: 'name' },\n        { text: 'Packing', value: 'pivot.packing' },\n        { text: 'Actions', value: 'actions' },\n      ],\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n        mdiInformation,\n        mdiTextBoxPlus,\n      },\n    }\n  },\n}\n</script>\n\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n</style>\n"]}]}