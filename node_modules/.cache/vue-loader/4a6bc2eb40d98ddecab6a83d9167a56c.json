{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/orders/OrderItems.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/orders/OrderItems.vue","mtime":1665474415968},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbWRpQWNjb3VudEVkaXQsCiAgbWRpRGVsZXRlQ2lyY2xlLAogIG1kaUluZm9ybWF0aW9uLAogIG1kaVRleHRCb3hQbHVzLAp9IGZyb20gJ0BtZGkvanMnCmltcG9ydCB7CiAgY29tcHV0ZWQsIHJlZiwgdG9SZWYsIHdhdGNoLAp9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3JkZXJJdGVtcycsCiAgcHJvcHM6IHsKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogKCgpID0+IGZhbHNlKSwKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiAoKCkgPT4gJ0NyZWF0ZScpLAogICAgfSwKICAgIGl0ZW1zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogIH0sCiAgc2V0dXAocHJvcHMsIHsgZW1pdCB9KSB7CiAgICBzdG9yZS5kaXNwYXRjaCgnVW5pdFBhY2tpbmdTdG9yZS9saXN0JykKICAgIGNvbnN0IGlzRGlzYWJsZWQgPSB0b1JlZihwcm9wcywgJ2Rpc2FibGVkJykKICAgIGNvbnN0IG1vZGVEYXRhID0gdG9SZWYocHJvcHMsICdtb2RlJykKICAgIGNvbnN0IGl0ZW1Gb3JtTW9kYWwgPSByZWYoZmFsc2UpCiAgICBjb25zdCBmb3JtRGF0YSA9IHJlZih7fSkKICAgIGNvbnN0IGZvcm1UaXRsZSA9IHJlZignQWRkIEl0ZW0nKQogICAgY29uc3Qgb3JkZXJJdGVtcyA9IHJlZihbXSkKICAgIGNvbnN0IHByb2R1Y3RzID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuRmluaXNoUHJvZHVjdFN0b3JlLmxpc3QpCiAgICBjb25zdCB1bml0cyA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLlVuaXRQYWNraW5nU3RvcmUubGlzdCkKICAgIGNvbnN0IGZpbHRlcmVkVW5pdHMgPSByZWYoW10pCiAgICBjb25zdCBjdXJyZW50SXRlbSA9IHJlZih7CiAgICAgIHByb2R1Y3RfaWQ6IG51bGwsCiAgICAgIHF1YW50aXR5OiBudWxsLAogICAgICBwcmljZTogbnVsbCwKICAgICAgdG90YWxfYW1vdW50OiAwLAogICAgICB1bml0OiBudWxsLAogICAgICBuYW1lOiBudWxsLAogICAgICBza3U6IG51bGwsCiAgICAgIHNsdWc6IG51bGwsCiAgICB9KQoKICAgIGNvbnN0IHByb2R1Y3QgPSByZWYoewogICAgICBuYW1lOiBudWxsLAogICAgICBzbHVnOiBudWxsLAogICAgICBza3U6IG51bGwsCiAgICB9KQogICAgY29uc3QgdG90YWxBbW91bnQgPSByZWYoMCkKICAgIGNvbnN0IGl0ZW1zUHJvcCA9IHRvUmVmKHByb3BzLCAnaXRlbXMnKQoKICAgIGNvbnN0IHNhbGVzT3JkZXJUb3RhbEFtb3VudCA9IHJlZigwKQoKICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0VkaXQnKSB7CiAgICAgIHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSA9IDAKCiAgICAgIG9yZGVySXRlbXMudmFsdWUgPSBpdGVtc1Byb3AudmFsdWUubWFwKG9yZGVySXRlbSA9PiB7CiAgICAgICAgY29uc3QgcHJvZHVjdFJhdyA9IHByb2R1Y3RzLnZhbHVlLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBvcmRlckl0ZW0ucHJvZHVjdF9pZCkKCiAgICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gcGFyc2VGbG9hdChzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUpICsgcGFyc2VGbG9hdChvcmRlckl0ZW0udG90YWxfYW1vdW50KQogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgIG9yZGVySXRlbS5uYW1lID0gcHJvZHVjdFJhdz8ubmFtZQogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgIG9yZGVySXRlbS5zbHVnID0gcHJvZHVjdFJhdz8uc2x1ZwogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgIG9yZGVySXRlbS5za3UgPSBwcm9kdWN0UmF3Py5za3UKCiAgICAgICAgcmV0dXJuIG9yZGVySXRlbQogICAgICB9KQoKICAgICAgZW1pdCgndG90YWxBbW91bnQnLCBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUpCiAgICB9CgogICAgd2F0Y2goc2FsZXNPcmRlclRvdGFsQW1vdW50LCB2YWx1ZSA9PiB7CiAgICAgIGVtaXQoJ3RvdGFsQW1vdW50JywgdmFsdWUpCiAgICB9KQogICAgd2F0Y2goaXRlbXNQcm9wLCAoKSA9PiB7CiAgICAgIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0VkaXQnKSB7CiAgICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gMAoKICAgICAgICBvcmRlckl0ZW1zLnZhbHVlID0gaXRlbXNQcm9wLnZhbHVlLm1hcChvcmRlckl0ZW0gPT4gewogICAgICAgICAgY29uc3QgcHJvZHVjdFJhdyA9IHByb2R1Y3RzLnZhbHVlLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBvcmRlckl0ZW0ucHJvZHVjdF9pZCkKCiAgICAgICAgICBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUgPSBwYXJzZUZsb2F0KHNhbGVzT3JkZXJUb3RhbEFtb3VudC52YWx1ZSkgKyBwYXJzZUZsb2F0KG9yZGVySXRlbS50b3RhbF9hbW91bnQpCgogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCiAgICAgICAgICBvcmRlckl0ZW0ubmFtZSA9IHByb2R1Y3RSYXc/Lm5hbWUKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgICAgb3JkZXJJdGVtLnNsdWcgPSBwcm9kdWN0UmF3Py5zbHVnCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICAgIG9yZGVySXRlbS5za3UgPSBwcm9kdWN0UmF3Py5za3UKCiAgICAgICAgICByZXR1cm4gb3JkZXJJdGVtCiAgICAgICAgfSkKICAgICAgfSBlbHNlIGlmIChtb2RlRGF0YS52YWx1ZSA9PT0gJ0NyZWF0ZScgJiYgaXRlbXNQcm9wLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIG9yZGVySXRlbXMudmFsdWUgPSBbXQogICAgICB9CiAgICB9KQoKICAgIHdhdGNoKG9yZGVySXRlbXMsICgpID0+IHsKICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gMAoKICAgICAgb3JkZXJJdGVtcy52YWx1ZS5mb3JFYWNoKG9yZGVySXRlbSA9PiB7CiAgICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gcGFyc2VGbG9hdChzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUpICsgcGFyc2VGbG9hdChvcmRlckl0ZW0udG90YWxfYW1vdW50KQogICAgICB9KQoKICAgICAgaWYgKG9yZGVySXRlbXMudmFsdWUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgc2FsZXNPcmRlclRvdGFsQW1vdW50LnZhbHVlID0gMAogICAgICB9CiAgICB9KQoKICAgIHdhdGNoKGN1cnJlbnRJdGVtLnZhbHVlLCAoKSA9PiB7CiAgICAgIGlmIChjdXJyZW50SXRlbS52YWx1ZS5wcm9kdWN0X2lkKSB7CiAgICAgICAgY29uc3QgcHJvZHVjdFJhdyA9IHByb2R1Y3RzLnZhbHVlLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBjdXJyZW50SXRlbS52YWx1ZS5wcm9kdWN0X2lkKQogICAgICAgIHByb2R1Y3QudmFsdWUubmFtZSA9IHByb2R1Y3RSYXcubmFtZQogICAgICAgIHByb2R1Y3QudmFsdWUuc2x1ZyA9IHByb2R1Y3RSYXcuc2x1ZwogICAgICAgIHByb2R1Y3QudmFsdWUuc2t1ID0gcHJvZHVjdFJhdy5za3UKCiAgICAgICAgZmlsdGVyZWRVbml0cy52YWx1ZSA9IHVuaXRzLnZhbHVlLmZpbHRlcih1bml0ID0+IHsKICAgICAgICAgIGlmICh1bml0LmlkID09PSBwcm9kdWN0UmF3LnVuaXRfaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHVuaXQKICAgICAgICAgIH0KCiAgICAgICAgICBwcm9kdWN0UmF3LnVuaXRzLmZvckVhY2gocHJvZHVjdFVuaXQgPT4gewogICAgICAgICAgICBpZiAodW5pdC5pZCA9PT0gcHJvZHVjdFVuaXQuaWQpIHsKICAgICAgICAgICAgICByZXR1cm4gdW5pdAogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGlmIChjdXJyZW50SXRlbS52YWx1ZS5xdWFudGl0eSAmJiBjdXJyZW50SXRlbS52YWx1ZS5wcmljZSkgewogICAgICAgIHRvdGFsQW1vdW50LnZhbHVlID0gcGFyc2VGbG9hdChjdXJyZW50SXRlbS52YWx1ZS5xdWFudGl0eSAqIGN1cnJlbnRJdGVtLnZhbHVlLnByaWNlKQogICAgICB9IGVsc2UgewogICAgICAgIHRvdGFsQW1vdW50LnZhbHVlID0gMAogICAgICB9CiAgICB9KQoKICAgIHdhdGNoKHRvdGFsQW1vdW50LCAoKSA9PiB7CiAgICAgIGN1cnJlbnRJdGVtLnZhbHVlLnRvdGFsX2Ftb3VudCA9IHRvdGFsQW1vdW50LnZhbHVlCiAgICB9KQoKICAgIHdhdGNoKHByb2R1Y3QudmFsdWUsICgpID0+IHsKICAgICAgY3VycmVudEl0ZW0udmFsdWUubmFtZSA9IHByb2R1Y3QudmFsdWUubmFtZQogICAgICBjdXJyZW50SXRlbS52YWx1ZS5zbHVnID0gcHJvZHVjdC52YWx1ZS5zbHVnCiAgICAgIGN1cnJlbnRJdGVtLnZhbHVlLnNrdSA9IHByb2R1Y3QudmFsdWUuc2t1CiAgICB9KQoKICAgIGNvbnN0IGFkZEl0ZW0gPSBhZGRBZ2FpbiA9PiB7CiAgICAgIG9yZGVySXRlbXMudmFsdWUucHVzaCh7CiAgICAgICAgcHJvZHVjdF9pZDogY3VycmVudEl0ZW0udmFsdWUucHJvZHVjdF9pZCwKICAgICAgICBxdWFudGl0eTogY3VycmVudEl0ZW0udmFsdWUucXVhbnRpdHksCiAgICAgICAgcHJpY2U6IGN1cnJlbnRJdGVtLnZhbHVlLnByaWNlLAogICAgICAgIHRvdGFsX2Ftb3VudDogY3VycmVudEl0ZW0udmFsdWUudG90YWxfYW1vdW50LAogICAgICAgIHVuaXQ6IGN1cnJlbnRJdGVtLnZhbHVlLnVuaXQsCiAgICAgICAgbmFtZTogY3VycmVudEl0ZW0udmFsdWUubmFtZSwKICAgICAgICBza3U6IGN1cnJlbnRJdGVtLnZhbHVlLnNrdSwKICAgICAgICBzbHVnOiBjdXJyZW50SXRlbS52YWx1ZS5zbHVnLAogICAgICB9KQoKICAgICAgZW1pdCgndG90YWxBbW91bnQnLCBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUpCiAgICAgIGVtaXQoJ2FkZEl0ZW0nLCBvcmRlckl0ZW1zLnZhbHVlKQoKICAgICAgaXRlbUZvcm1Nb2RhbC52YWx1ZSA9IGZhbHNlCgogICAgICAvLyBNYW51YWxseSBzZXQgZWFjaCBwcm9wZXJ0eSB0byBudWxsIGFuZCBkb24ndCBhc3NpZ24gYSBjb21wbGV0ZWx5IG5ldyBvYmplY3QgaXQgd2lsbCBydWluIHRoZSB3YXRjaCBjb21wb25lbnQKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgZmlsdGVyZWRVbml0cy52YWx1ZSA9IFtdCiAgICAgICAgY3VycmVudEl0ZW0udmFsdWUucHJvZHVjdF9pZCA9IG51bGwKICAgICAgICBjdXJyZW50SXRlbS52YWx1ZS5xdWFudGl0eSA9IG51bGwKICAgICAgICBjdXJyZW50SXRlbS52YWx1ZS5wcmljZSA9IG51bGwKICAgICAgICBjdXJyZW50SXRlbS52YWx1ZS51bml0ID0gbnVsbAogICAgICAgIGN1cnJlbnRJdGVtLnZhbHVlLnRvdGFsX2Ftb3VudCA9IDAKICAgICAgICBwcm9kdWN0LnZhbHVlLm5hbWUgPSBudWxsCiAgICAgICAgcHJvZHVjdC52YWx1ZS5za3UgPSBudWxsCiAgICAgICAgcHJvZHVjdC52YWx1ZS5zbHVnID0gbnVsbAogICAgICB9LCA1MDApCgogICAgICBpZiAoYWRkQWdhaW4gPT09IHRydWUpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGl0ZW1Gb3JtTW9kYWwudmFsdWUgPSB0cnVlCiAgICAgICAgfSwgNTAwKQogICAgICB9CiAgICB9CgogICAgY29uc3QgZGVsZXRlSXRlbSA9IGl0ZW0gPT4gewogICAgICBjb25zdCBpbmRleCA9IG9yZGVySXRlbXMudmFsdWUuZmluZEluZGV4KG9yZGVySXRlbSA9PiAob3JkZXJJdGVtLnByb2R1Y3RfaWQgPT09IGl0ZW0ucHJvZHVjdF9pZCAmJiBvcmRlckl0ZW0udG90YWxfYW1vdW50ID09PSBpdGVtLnRvdGFsX2Ftb3VudCkpCiAgICAgIG9yZGVySXRlbXMudmFsdWUuc3BsaWNlKGluZGV4LCAxKQogICAgICBlbWl0KCdhZGRJdGVtJywgb3JkZXJJdGVtcy52YWx1ZSkKICAgICAgZW1pdCgndG90YWxBbW91bnQnLCBzYWxlc09yZGVyVG90YWxBbW91bnQudmFsdWUpCiAgICB9CgogICAgY29uc3QgY2FuY2VsID0gKCkgPT4gewogICAgICBpdGVtRm9ybU1vZGFsLnZhbHVlID0gZmFsc2UKICAgICAgY3VycmVudEl0ZW0udmFsdWUucHJvZHVjdF9pZCA9IG51bGwKICAgICAgY3VycmVudEl0ZW0udmFsdWUucXVhbnRpdHkgPSBudWxsCiAgICAgIGN1cnJlbnRJdGVtLnZhbHVlLnByaWNlID0gbnVsbAogICAgICBjdXJyZW50SXRlbS52YWx1ZS51bml0ID0gbnVsbAogICAgICBjdXJyZW50SXRlbS52YWx1ZS50b3RhbF9hbW91bnQgPSAwCiAgICAgIHByb2R1Y3QudmFsdWUubmFtZSA9IG51bGwKICAgICAgcHJvZHVjdC52YWx1ZS5za3UgPSBudWxsCiAgICAgIHByb2R1Y3QudmFsdWUuc2x1ZyA9IG51bGwKICAgIH0KCiAgICByZXR1cm4gewogICAgICBmaWx0ZXJlZFVuaXRzLAogICAgICBpc0Rpc2FibGVkLAogICAgICBzYWxlc09yZGVyVG90YWxBbW91bnQsCiAgICAgIGFkZEl0ZW0sCiAgICAgIGNhbmNlbCwKICAgICAgZm9ybVRpdGxlLAogICAgICBjdXJyZW50SXRlbSwKICAgICAgb3JkZXJJdGVtcywKICAgICAgZGVsZXRlSXRlbSwKICAgICAgZm9ybURhdGEsCiAgICAgIGl0ZW1Gb3JtTW9kYWwsCiAgICAgIHRvdGFsQW1vdW50LAogICAgICBwcm9kdWN0cywKICAgICAgaGVhZGVyczogWwogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICdJdGVtIENvZGUnLAogICAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogJ3NrdScsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAnTmFtZScsCiAgICAgICAgICB2YWx1ZTogJ25hbWUnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ1F1YW50aXR5JywKICAgICAgICAgIHZhbHVlOiAncXVhbnRpdHknLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ1VuaXQnLAogICAgICAgICAgdmFsdWU6ICd1bml0JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICdQcmljZScsCiAgICAgICAgICB2YWx1ZTogJ3ByaWNlJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6ICdUb3RhbCBBbW91bnQnLAogICAgICAgICAgdmFsdWU6ICd0b3RhbF9hbW91bnQnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ0FjdGlvbnMnLAogICAgICAgICAgdmFsdWU6ICdhY3Rpb25zJywKICAgICAgICB9LAogICAgICBdLAogICAgICB1c2VyRGF0YTogWwogICAgICAgIHsKICAgICAgICAgIGlkOiAxLAogICAgICAgICAgZnVsbF9uYW1lOiAnVGVzdCcsCiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZ21haWwuY29tJywKICAgICAgICAgIGV4cGVyaWVuY2U6ICd0ZXN0JywKICAgICAgICAgIGFnZTogMjMsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgaWNvbnM6IHsKICAgICAgICBtZGlBY2NvdW50RWRpdCwKICAgICAgICBtZGlEZWxldGVDaXJjbGUsCiAgICAgICAgbWRpSW5mb3JtYXRpb24sCiAgICAgICAgbWRpVGV4dEJveFBsdXMsCiAgICAgIH0sCiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["OrderItems.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrderItems.vue","sourceRoot":"src/views/pages/sales/orders","sourcesContent":["<template>\n  <v-row>\n    <v-col cols=\"12\">\n      <v-alert\n        color=\"success\"\n        text\n        style=\"margin-bottom: -30px\"\n      >\n        <div class=\"d-flex align-start\">\n          <v-icon color=\"success\">\n            {{ icons.mdiInformation }}\n          </v-icon>\n          <div class=\"ms-3\">\n            <p class=\"text-base font-weight-medium mb-1\">\n              Items\n            </p>\n          </div>\n        </div>\n      </v-alert>\n    </v-col>\n    <v-col\n      cols=\"12\"\n    >\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"orderItems\"\n        :items-per-page=\"5\"\n      >\n        <template v-slot:top>\n          <v-toolbar\n            flat\n          >\n            <v-card-text>\n              <v-row>\n                <v-col\n                  class=\"mt-4\"\n                  cols=\"4\"\n                >\n                  <v-currency-field\n                    v-model=\"salesOrderTotalAmount\"\n                    outlined\n                    class=\"text-green\"\n                    disabled\n                    dense\n                    hide-details=\"auto\"\n                    label=\"Sales Order Total Amount\"\n                  ></v-currency-field>\n                </v-col>\n                <v-col\n                  cols=\"4\"\n                  offset-md=\"4\"\n                >\n                </v-col>\n              </v-row>\n            </v-card-text>\n            <v-dialog\n              v-model=\"itemFormModal\"\n              width=\"1200px\"\n              height=\"500px\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn\n                  v-if=\"isDisabled === false\"\n                  elevation=\"10\"\n                  color=\"success\"\n                  dark\n                  class=\"mb-2\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                >\n                  Add Item\n                </v-btn>\n              </template>\n              <v-card>\n                <v-card-title>\n                  <span class=\"headline\">{{ formTitle }}</span>\n                </v-card-title>\n                <v-card-text>\n                  <v-form>\n                    <v-row>\n                      <v-col cols=\"12\">\n                        <v-alert\n                          color=\"primary\"\n                          text\n                          style=\"margin-bottom: -10px\"\n                        >\n                          <div class=\"d-flex align-start\">\n                            <v-icon color=\"primary\">\n                              {{ icons.mdiTextBoxPlus }}\n                            </v-icon>\n                            <div class=\"ms-3\">\n                              <p class=\"text-base font-weight-medium mb-1\">\n                                Item\n                              </p>\n                            </div>\n                          </div>\n                        </v-alert>\n                      </v-col>\n                      <v-col\n                        cols=\"4\"\n                      >\n                        <v-select\n                          v-model=\"currentItem.product_id\"\n                          :items=\"products\"\n                          item-text=\"name\"\n                          item-value=\"id\"\n                          label=\"Item\"\n                        >\n                        </v-select>\n                      </v-col>\n                      <v-col\n                        cols=\"4\"\n                      >\n                        <v-select\n                          v-model=\"currentItem.unit\"\n                          :items=\"filteredUnits\"\n                          item-text=\"name\"\n                          item-value=\"name\"\n                          label=\"Unit\"\n                          outlined\n                          dense\n                          clearable\n                          hide-details=\"auto\"\n                        ></v-select>\n                      </v-col>\n                      <v-col\n                        cols=\"4\"\n                      >\n                        <v-text-field\n                          v-model=\"currentItem.quantity\"\n                          outlined\n                          dense\n                          type=\"number\"\n                          min=\"0\"\n                          step=\"1\"\n                          onfocus=\"this.previousValue = this.value\"\n                          onkeydown=\"this.previousValue = this.value\"\n                          oninput=\"validity.valid || (value = this.previousValue)\"\n                          hide-details=\"auto\"\n                          label=\"Quantity\"\n                        ></v-text-field>\n                      </v-col>\n                      <v-col\n                        cols=\"4\"\n                      >\n                        <v-currency-field\n                          v-model=\"currentItem.price\"\n                          outlined\n                          prefix=\"PHP\"\n                          dense\n                          class=\"text-green\"\n                          hide-details=\"auto\"\n                          label=\"Price\"\n                        ></v-currency-field>\n                      </v-col>\n                      <v-col\n                        cols=\"4\"\n                      >\n                        <v-currency-field\n                          v-model=\"currentItem.total_amount\"\n                          disabled\n                          outlined\n                          prefix=\"PHP\"\n                          class=\"text-green\"\n                          dense\n                          hide-details=\"auto\"\n                          label=\"Total Amount\"\n                        ></v-currency-field>\n                      </v-col>\n                      <v-col\n                        cols=\"12\"\n                        class=\"d-flex\"\n                      >\n                        <v-btn\n                          v-if=\"currentItem.quantity && currentItem.price && currentItem.product_id\"\n                          color=\"primary\"\n                          class=\"me-3 mt-4\"\n                          @click=\"addItem(false)\"\n                        >\n                          Submit\n                        </v-btn>\n                        <v-btn\n                          v-if=\"currentItem.quantity && currentItem.price && currentItem.product_id\"\n                          color=\"info\"\n                          class=\"me-3 mt-4\"\n                          @click=\"addItem(true)\"\n                        >\n                          Submit And Add Item Again\n                        </v-btn>\n                        <v-btn\n                          outlined\n                          class=\"me-3 mt-4\"\n                          type=\"reset\"\n                          @click.prevent=\"cancel\"\n                        >\n                          Cancel\n                        </v-btn>\n                      </v-col>\n                    </v-row>\n                  </v-form>\n                </v-card-text>\n              </v-card>\n            </v-dialog>\n          </v-toolbar>\n        </template>\n        <template #[`item.total_amount`]=\"{item}\">\n          <div class=\"d-flex justify-center text-green text--primary\">\n            <span class=\"text-green\">{{ item.total_amount }}</span>\n          </div>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <v-icon\n            v-if=\"isDisabled === false\"\n            small\n            @click=\"deleteItem(item)\"\n          >\n            {{ icons.mdiDeleteCircle }}\n          </v-icon>\n        </template>\n        <template #item.price=\"{ item }\">\n          <v-currency-field\n            v-model=\"item.price\"\n            prefix=\"PHP\"\n            class=\"text-green\"\n            disabled\n          >\n          </v-currency-field>\n        </template>\n        <template #item.total_amount=\"{ item }\">\n          <v-currency-field\n            v-model=\"item.total_amount\"\n            prefix=\"PHP\"\n            class=\"text-green\"\n            disabled\n          >\n          </v-currency-field>\n        </template>\n      </v-data-table>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport {\n  mdiAccountEdit,\n  mdiDeleteCircle,\n  mdiInformation,\n  mdiTextBoxPlus,\n} from '@mdi/js'\nimport {\n  computed, ref, toRef, watch,\n} from '@vue/composition-api'\nimport store from '@/store'\n\nexport default {\n  name: 'OrderItems',\n  props: {\n    disabled: {\n      type: Boolean,\n      required: false,\n      default: (() => false),\n    },\n    mode: {\n      type: String,\n      required: false,\n      default: (() => 'Create'),\n    },\n    items: {\n      type: Array,\n      required: false,\n      default: null,\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('UnitPackingStore/list')\n    const isDisabled = toRef(props, 'disabled')\n    const modeData = toRef(props, 'mode')\n    const itemFormModal = ref(false)\n    const formData = ref({})\n    const formTitle = ref('Add Item')\n    const orderItems = ref([])\n    const products = computed(() => store.state.FinishProductStore.list)\n    const units = computed(() => store.state.UnitPackingStore.list)\n    const filteredUnits = ref([])\n    const currentItem = ref({\n      product_id: null,\n      quantity: null,\n      price: null,\n      total_amount: 0,\n      unit: null,\n      name: null,\n      sku: null,\n      slug: null,\n    })\n\n    const product = ref({\n      name: null,\n      slug: null,\n      sku: null,\n    })\n    const totalAmount = ref(0)\n    const itemsProp = toRef(props, 'items')\n\n    const salesOrderTotalAmount = ref(0)\n\n    if (modeData.value === 'Edit') {\n      salesOrderTotalAmount.value = 0\n\n      orderItems.value = itemsProp.value.map(orderItem => {\n        const productRaw = products.value.find(item => item.id === orderItem.product_id)\n\n        salesOrderTotalAmount.value = parseFloat(salesOrderTotalAmount.value) + parseFloat(orderItem.total_amount)\n        // eslint-disable-next-line no-param-reassign\n        orderItem.name = productRaw?.name\n        // eslint-disable-next-line no-param-reassign\n        orderItem.slug = productRaw?.slug\n        // eslint-disable-next-line no-param-reassign\n        orderItem.sku = productRaw?.sku\n\n        return orderItem\n      })\n\n      emit('totalAmount', salesOrderTotalAmount.value)\n    }\n\n    watch(salesOrderTotalAmount, value => {\n      emit('totalAmount', value)\n    })\n    watch(itemsProp, () => {\n      if (modeData.value === 'Edit') {\n        salesOrderTotalAmount.value = 0\n\n        orderItems.value = itemsProp.value.map(orderItem => {\n          const productRaw = products.value.find(item => item.id === orderItem.product_id)\n\n          salesOrderTotalAmount.value = parseFloat(salesOrderTotalAmount.value) + parseFloat(orderItem.total_amount)\n\n          // eslint-disable-next-line no-param-reassign\n          orderItem.name = productRaw?.name\n          // eslint-disable-next-line no-param-reassign\n          orderItem.slug = productRaw?.slug\n          // eslint-disable-next-line no-param-reassign\n          orderItem.sku = productRaw?.sku\n\n          return orderItem\n        })\n      } else if (modeData.value === 'Create' && itemsProp.value.length === 0) {\n        orderItems.value = []\n      }\n    })\n\n    watch(orderItems, () => {\n      salesOrderTotalAmount.value = 0\n\n      orderItems.value.forEach(orderItem => {\n        salesOrderTotalAmount.value = parseFloat(salesOrderTotalAmount.value) + parseFloat(orderItem.total_amount)\n      })\n\n      if (orderItems.value.length === 0) {\n        salesOrderTotalAmount.value = 0\n      }\n    })\n\n    watch(currentItem.value, () => {\n      if (currentItem.value.product_id) {\n        const productRaw = products.value.find(item => item.id === currentItem.value.product_id)\n        product.value.name = productRaw.name\n        product.value.slug = productRaw.slug\n        product.value.sku = productRaw.sku\n\n        filteredUnits.value = units.value.filter(unit => {\n          if (unit.id === productRaw.unit_id) {\n            return unit\n          }\n\n          productRaw.units.forEach(productUnit => {\n            if (unit.id === productUnit.id) {\n              return unit\n            }\n          })\n        })\n      }\n\n      if (currentItem.value.quantity && currentItem.value.price) {\n        totalAmount.value = parseFloat(currentItem.value.quantity * currentItem.value.price)\n      } else {\n        totalAmount.value = 0\n      }\n    })\n\n    watch(totalAmount, () => {\n      currentItem.value.total_amount = totalAmount.value\n    })\n\n    watch(product.value, () => {\n      currentItem.value.name = product.value.name\n      currentItem.value.slug = product.value.slug\n      currentItem.value.sku = product.value.sku\n    })\n\n    const addItem = addAgain => {\n      orderItems.value.push({\n        product_id: currentItem.value.product_id,\n        quantity: currentItem.value.quantity,\n        price: currentItem.value.price,\n        total_amount: currentItem.value.total_amount,\n        unit: currentItem.value.unit,\n        name: currentItem.value.name,\n        sku: currentItem.value.sku,\n        slug: currentItem.value.slug,\n      })\n\n      emit('totalAmount', salesOrderTotalAmount.value)\n      emit('addItem', orderItems.value)\n\n      itemFormModal.value = false\n\n      // Manually set each property to null and don't assign a completely new object it will ruin the watch component\n      setTimeout(() => {\n        filteredUnits.value = []\n        currentItem.value.product_id = null\n        currentItem.value.quantity = null\n        currentItem.value.price = null\n        currentItem.value.unit = null\n        currentItem.value.total_amount = 0\n        product.value.name = null\n        product.value.sku = null\n        product.value.slug = null\n      }, 500)\n\n      if (addAgain === true) {\n        setTimeout(() => {\n          itemFormModal.value = true\n        }, 500)\n      }\n    }\n\n    const deleteItem = item => {\n      const index = orderItems.value.findIndex(orderItem => (orderItem.product_id === item.product_id && orderItem.total_amount === item.total_amount))\n      orderItems.value.splice(index, 1)\n      emit('addItem', orderItems.value)\n      emit('totalAmount', salesOrderTotalAmount.value)\n    }\n\n    const cancel = () => {\n      itemFormModal.value = false\n      currentItem.value.product_id = null\n      currentItem.value.quantity = null\n      currentItem.value.price = null\n      currentItem.value.unit = null\n      currentItem.value.total_amount = 0\n      product.value.name = null\n      product.value.sku = null\n      product.value.slug = null\n    }\n\n    return {\n      filteredUnits,\n      isDisabled,\n      salesOrderTotalAmount,\n      addItem,\n      cancel,\n      formTitle,\n      currentItem,\n      orderItems,\n      deleteItem,\n      formData,\n      itemFormModal,\n      totalAmount,\n      products,\n      headers: [\n        {\n          text: 'Item Code',\n          sortable: true,\n          value: 'sku',\n        },\n        {\n          text: 'Name',\n          value: 'name',\n        },\n        {\n          text: 'Quantity',\n          value: 'quantity',\n        },\n        {\n          text: 'Unit',\n          value: 'unit',\n        },\n        {\n          text: 'Price',\n          value: 'price',\n        },\n        {\n          text: 'Total Amount',\n          value: 'total_amount',\n        },\n        {\n          text: 'Actions',\n          value: 'actions',\n        },\n      ],\n      userData: [\n        {\n          id: 1,\n          full_name: 'Test',\n          email: 'test@gmail.com',\n          experience: 'test',\n          age: 23,\n        },\n      ],\n      icons: {\n        mdiAccountEdit,\n        mdiDeleteCircle,\n        mdiInformation,\n        mdiTextBoxPlus,\n      },\n    }\n  },\n}\n</script>\n\n<style>\n.text-green input {\n  color: chartreuse !important;\n}\n</style>\n"]}]}