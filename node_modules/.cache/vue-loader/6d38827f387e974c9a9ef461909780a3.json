{"remainingRequest":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/projects/enco-fe/src/views/pages/sales/collections/PaymentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/projects/enco-fe/src/views/pages/sales/collections/PaymentForm.vue","mtime":1665663313835},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/babel-loader/lib/index.js","mtime":1665368576151},{"path":"/Users/mark/projects/enco-fe/node_modules/cache-loader/dist/cjs.js","mtime":1665368576185},{"path":"/Users/mark/projects/enco-fe/node_modules/vue-loader/lib/index.js","mtime":1665368593779}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvbXB1dGVkLCByZWYsIHRvUmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7IG1kaUN1cnJlbmN5U2lnbiwgbWRpRGF0YWJhc2VBcnJvd0xlZnQgfSBmcm9tICdAbWRpL2pzJwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGF5bWVudEZvcm0nLAogIHByb3BzOiB7CiAgICB0b3RhbEFtb3VudDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogKCgpID0+IDApLAogICAgfSwKICB9LAogIHNldHVwKHByb3BzLCB7IGVtaXQgfSkgewogICAgc3RvcmUuZGlzcGF0Y2goJ0FjY291bnRTdG9yZS9saXN0JykKICAgIGNvbnN0IHRvdGFsQW1vdW50VG9QYXkgPSB0b1JlZihwcm9wcywgJ3RvdGFsQW1vdW50JykKICAgIGNvbnN0IGFjY291bnRzID0gY29tcHV0ZWQoKCkgPT4gc3RvcmUuc3RhdGUuQWNjb3VudFN0b3JlLmFjY291bnRzKQogICAgY29uc3QgdHlwZXMgPSBbCiAgICAgIHsgdmFsdWU6ICdjYXNoX3BheW1lbnQnLCB0aXRsZTogJ0Nhc2ggUGF5bWVudCcgfSwKICAgICAgeyB2YWx1ZTogJ29ubGluZV9wYXltZW50JywgdGl0bGU6ICdPbmxpbmUgUGF5bWVudCcgfSwKICAgICAgeyB2YWx1ZTogJ2NoZWNrX3BheW1lbnQnLCB0aXRsZTogJ0NoZWNrIFBheW1lbnQnIH0sCiAgICBdCiAgICBjb25zdCBkYXRlUG9zdGVkID0gcmVmKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApKQogICAgY29uc3QgZm9ybURhdGEgPSByZWYoewogICAgICBhbW91bnQ6IDAsCiAgICB9KQoKICAgIGNvbnN0IGVycm9ycyA9IHJlZih7CiAgICAgIGFjY291bnRfaWQ6IG51bGwsCiAgICAgIGFtb3VudDogbnVsbCwKICAgIH0pCgogICAgY29uc3QgY29weVRvdGFsQW1vdW50ID0gKCkgPT4gewogICAgICBmb3JtRGF0YS52YWx1ZS5hbW91bnQgPSB0b3RhbEFtb3VudFRvUGF5LnZhbHVlCiAgICB9CgogICAgY29uc3QgY2hlY2tUeXBlcyA9IFsKICAgICAgJ0xvY2FsJywKICAgICAgJ1JlZ2lvbmFsJywKICAgIF0KCiAgICBjb25zdCBwYXltZW50VHlwZXNNYXBwaW5nID0gewogICAgICBjYXNoX3BheW1lbnQ6ICdDYXNoIFBheW1lbnQnLAogICAgICBjaGVja19wYXltZW50OiAnQ2hlY2sgUGF5bWVudCcsCiAgICAgIG9ubGluZV9wYXltZW50OiAnT25saW5lIFBheW1lbnQnLAogICAgfQoKICAgIGNvbnN0IGhhc0Vycm9yID0gcmVmKDApCgogICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICBjb25zdCBwYXltZW50ID0gewogICAgICAgIHR5cGU6IGZvcm1EYXRhLnZhbHVlLnR5cGUsCiAgICAgICAgYWNjb3VudF9pZDogZm9ybURhdGEudmFsdWUuYWNjb3VudF9pZCwKICAgICAgICBwYXltZW50X3R5cGU6IHBheW1lbnRUeXBlc01hcHBpbmdbZm9ybURhdGEudmFsdWUudHlwZV0sCiAgICAgICAgYW1vdW50OiBmb3JtRGF0YS52YWx1ZS5hbW91bnQsCiAgICAgICAgcGF5bWVudF9kYXRlOiBkYXRlUG9zdGVkLnZhbHVlLAogICAgICAgIG1vZGVfb2ZfdHJhbnNmZXI6IGZvcm1EYXRhLnZhbHVlLm1vZGVfb2ZfdHJhbnNmZXIsCiAgICAgICAgcmVmZXJlbmNlX251bWJlcjogZm9ybURhdGEudmFsdWUudHJhbnNhY3Rpb25fbnVtYmVyID8/IGZvcm1EYXRhLnZhbHVlLmNoZWNrX251bWJlciwKICAgICAgICB0cmFuc2FjdGlvbl9udW1iZXI6IGZvcm1EYXRhLnZhbHVlLnRyYW5zYWN0aW9uX251bWJlciwKICAgICAgICBjaGVja19udW1iZXI6IGZvcm1EYXRhLnZhbHVlLmNoZWNrX251bWJlciwKICAgICAgICBiYW5rOiBmb3JtRGF0YS52YWx1ZS5iYW5rLAogICAgICAgIGJhbmtfYWNjb3VudF9udW1iZXI6IGZvcm1EYXRhLnZhbHVlLmJhbmtfYWNjb3VudF9udW1iZXIsCiAgICAgICAgY2hlY2tfdHlwZTogZm9ybURhdGEudmFsdWUuY2hlY2tfdHlwZSwKICAgICAgfQoKICAgICAgaWYgKHBheW1lbnQudHlwZSA9PT0gJ29ubGluZV9wYXltZW50JykgewogICAgICAgIGlmICghZm9ybURhdGEudmFsdWUubW9kZV9vZl90cmFuc2ZlcikgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLm1vZGVfb2ZfdHJhbnNmZXIgPSAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlIC09IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS5tb2RlX29mX3RyYW5zZmVyID0gbnVsbAogICAgICAgIH0KCiAgICAgICAgaWYgKCFmb3JtRGF0YS52YWx1ZS50cmFuc2FjdGlvbl9udW1iZXIpIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlICs9IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS50cmFuc2FjdGlvbl9udW1iZXIgPSAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlIC09IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS50cmFuc2FjdGlvbl9udW1iZXIgPSBudWxsCiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocGF5bWVudC50eXBlID09PSAnY2hlY2tfcGF5bWVudCcpIHsKICAgICAgICBpZiAoIWZvcm1EYXRhLnZhbHVlLmNoZWNrX251bWJlcikgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLmNoZWNrX251bWJlciA9ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLmNoZWNrX251bWJlciA9IG51bGwKICAgICAgICB9CiAgICAgICAgaWYgKCFmb3JtRGF0YS52YWx1ZS5iYW5rKSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSArPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUuYmFuayA9ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLicKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgLT0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLmJhbmsgPSBudWxsCiAgICAgICAgfQogICAgICAgIGlmICghZm9ybURhdGEudmFsdWUuYmFua19hY2NvdW50X251bWJlcikgewogICAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgICAgZXJyb3JzLnZhbHVlLmJhbmtfYWNjb3VudF9udW1iZXIgPSAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlIC09IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS5iYW5rX2FjY291bnRfbnVtYmVyID0gbnVsbAogICAgICAgIH0KICAgICAgICBpZiAoIWZvcm1EYXRhLnZhbHVlLmNoZWNrX3R5cGUpIHsKICAgICAgICAgIGhhc0Vycm9yLnZhbHVlICs9IDEKICAgICAgICAgIGVycm9ycy52YWx1ZS5jaGVja190eXBlID0gJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBoYXNFcnJvci52YWx1ZSAtPSAxCiAgICAgICAgICBlcnJvcnMudmFsdWUuY2hlY2tfdHlwZSA9IG51bGwKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghcGF5bWVudC5hY2NvdW50X2lkKSB7CiAgICAgICAgaGFzRXJyb3IudmFsdWUgKz0gMQogICAgICAgIGVycm9ycy52YWx1ZS5hY2NvdW50X2lkID0gJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJwogICAgICB9IGVsc2UgewogICAgICAgIGhhc0Vycm9yLnZhbHVlIC09IDEKICAgICAgICBlcnJvcnMudmFsdWUuYWNjb3VudF9pZCA9IG51bGwKICAgICAgfQoKICAgICAgaWYgKCFwYXltZW50LmFtb3VudCB8fCBwYXltZW50LmFtb3VudCA9PT0gMCkgewogICAgICAgIGhhc0Vycm9yLnZhbHVlICs9IDEKICAgICAgICBlcnJvcnMudmFsdWUuYW1vdW50ID0gJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJwogICAgICB9IGVsc2UgewogICAgICAgIGhhc0Vycm9yLnZhbHVlIC09IDEKICAgICAgICBlcnJvcnMudmFsdWUuYW1vdW50ID0gbnVsbAogICAgICB9CgogICAgICBpZiAocGF5bWVudC5hY2NvdW50X2lkICYmIGhhc0Vycm9yLnZhbHVlIDw9IDApIHsKICAgICAgICBlbWl0KCdhZGRlZFBheW1lbnQnLCBwYXltZW50KQoKICAgICAgICBmb3JtRGF0YS52YWx1ZSA9IHsKICAgICAgICAgIGFtb3VudDogMCwKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBvbkNoYW5nZU9mUGF5bWVudFR5cGUgPSAoKSA9PiB7CiAgICAgIGVycm9ycy52YWx1ZSA9IHsKICAgICAgICBhY2NvdW50X2lkOiBudWxsLAogICAgICB9CiAgICB9CgogICAgY29uc3QgY2FuY2VsID0gKCkgPT4gewogICAgICBlbWl0KCd0b2dnbGVNb2RhbCcpCiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgb25DaGFuZ2VPZlBheW1lbnRUeXBlLAogICAgICBlcnJvcnMsCiAgICAgIGNoZWNrVHlwZXMsCiAgICAgIHN1Ym1pdCwKICAgICAgY2FuY2VsLAogICAgICBhY2NvdW50cywKICAgICAgY29weVRvdGFsQW1vdW50LAogICAgICBkYXRlUG9zdGVkLAogICAgICBmb3JtRGF0YSwKICAgICAgdHlwZXMsCiAgICAgIHRvdGFsQW1vdW50VG9QYXksCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpQ3VycmVuY3lTaWduLAogICAgICAgIG1kaURhdGFiYXNlQXJyb3dMZWZ0LAogICAgICB9LAogICAgfQogIH0sCn0K"},{"version":3,"sources":["PaymentForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4cA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PaymentForm.vue","sourceRoot":"src/views/pages/sales/collections","sourcesContent":["<template>\n  <v-card class=\"pa-2\">\n    <v-card-text>\n      <v-row v-if=\"totalAmountToPay <= 0\">\n        <v-col\n          cols=\"12\"\n        >\n          <v-alert\n            color=\"primary\"\n            text\n            style=\"margin-bottom: -10px\"\n          >\n            <div class=\"d-flex align-start\">\n              <v-icon color=\"primary\">\n                {{ icons.mdiCurrencySign }}\n              </v-icon>\n              <div class=\"ms-3\">\n                <p class=\"text-base font-weight-medium mb-1\">\n                  Total Amount to Pay was already covered.\n                </p>\n              </div>\n            </div>\n          </v-alert>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"totalAmountToPay > 0\">\n        <v-col\n          cols=\"12\"\n        >\n          <v-alert\n            color=\"success\"\n            text\n            style=\"margin-bottom: -10px\"\n          >\n            <div class=\"d-flex align-start\">\n              <v-icon color=\"success\">\n                {{ icons.mdiCurrencySign }}\n              </v-icon>\n              <div class=\"ms-3\">\n                <p class=\"text-base font-weight-medium mb-1\">\n                  Add Payment\n                </p>\n              </div>\n            </div>\n          </v-alert>\n        </v-col>\n      </v-row>\n      <v-row class=\"mt-2\" v-if=\"totalAmountToPay > 0\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Payment Type</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mr-16\"\n        >\n          <v-select\n            v-model=\"formData.type\"\n            :items=\"types\"\n            item-text=\"title\"\n            item-value=\"value\"\n            label=\"Payment Type\"\n            outlined\n            dense\n            clearable\n            hide-details=\"auto\"\n            @change=\"onChangeOfPaymentType\"\n          ></v-select>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Account</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mr-16\"\n        >\n          <v-select\n            v-model=\"formData.account_id\"\n            :items=\"accounts\"\n            item-text=\"account_title\"\n            item-value=\"id\"\n            label=\"Account\"\n            outlined\n            :error-messages=\"errors.account_id\"\n            dense\n            clearable\n            hide-details=\"auto\"\n          ></v-select>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type === 'cash_payment'\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Date</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"pr-8 pl-8 ml-n4\"\n        >\n          <v-menu\n            v-model=\"formData.paymentDate\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            :disabled=\"formData.status === 'Posted'\"\n            max-width=\"290px\"\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"datePosted\"\n                label=\"Date\"\n                persistent-hint\n                :prepend-icon=\"icons.mdiCalendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              v-model=\"datePosted\"\n              no-title\n              color=\"primary\"\n              @input=\"formData.paymentDate = false\"\n            ></v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"3\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Amount </label>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"formData.amount\"\n            :max=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            :error-messages=\"errors.amount\"\n            class=\"text-green mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-btn\n            class=\"mt-n8\"\n            small\n            color=\"success\"\n            @click.prevent=\"copyTotalAmount\"\n          >\n            Copy Total Amount\n          </v-btn>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            disabled=\"\"\n            class=\"text-green ml-n12  mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type === 'online_payment'\">\n        <v-col\n          cols=\"3\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Date</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"pr-8 pl-8 ml-n4\"\n        >\n          <v-menu\n            v-model=\"formData.paymentDate\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            :disabled=\"formData.status === 'Posted'\"\n            max-width=\"290px\"\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"datePosted\"\n                label=\"Date\"\n                persistent-hint\n                :prepend-icon=\"icons.mdiCalendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              v-model=\"datePosted\"\n              no-title\n              color=\"primary\"\n              @input=\"formData.paymentDate = false\"\n            ></v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"3\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Mode of Transfer</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.mode_of_transfer\"\n            :error-messages=\"errors.mode_of_transfer\"\n            class=\"mt-n8\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Transaction Number</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.transaction_number\"\n            :error-messages=\"errors.transaction_number\"\n            class=\"mt-n8\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Amount </label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-currency-field\n            v-model=\"formData.amount\"\n            :max=\"totalAmountToPay\"\n            :error-messages=\"errors.amount\"\n            prefix=\"PHP\"\n            class=\"text-green mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n        <v-col cols=\"2\">\n          <v-btn\n            class=\"mt-n8\"\n            small\n            color=\"success\"\n            @click.prevent=\"copyTotalAmount\"\n          >\n            <v-icon>\n              {{ icons.mdiDatabaseArrowLeft }}\n            </v-icon>\n          </v-btn>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            disabled=\"\"\n            class=\"text-green ml-n12  mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n      </v-row>\n      <v-row v-if=\"formData.type === 'check_payment'\">\n        <v-col\n          cols=\"3\"\n          class=\"mt-4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Date</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"pr-8 pl-8\"\n        >\n          <v-menu\n            v-model=\"formData.paymentDate\"\n            :close-on-content-click=\"false\"\n            transition=\"scale-transition\"\n            offset-y\n            :disabled=\"formData.status === 'Posted'\"\n            max-width=\"290px\"\n            min-width=\"auto\"\n          >\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"datePosted\"\n                label=\"Date\"\n                persistent-hint\n                :prepend-icon=\"icons.mdiCalendar\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              ></v-text-field>\n            </template>\n\n            <v-date-picker\n              v-model=\"datePosted\"\n              no-title\n              color=\"primary\"\n              @input=\"formData.paymentDate = false\"\n            ></v-date-picker>\n          </v-menu>\n        </v-col>\n        <v-col cols=\"3\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Bank Check</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.bank\"\n            class=\"mt-n8\"\n            :error-messages=\"errors.bank\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Bank Account Number</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.bank_account_number\"\n            class=\"mt-n8\"\n            :error-messages=\"errors.bank_account_number\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-n4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Check Type</label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mt-n4\"\n        >\n          <v-select\n            v-model=\"formData.check_type\"\n            :items=\"checkTypes\"\n            :error-messages=\"errors.check_type\"\n            label=\"Check Type\"\n            outlined\n            dense\n            clearable\n            hide-details=\"auto\"\n          ></v-select>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-4\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Check Number</label>\n        </v-col>\n        <v-col cols=\"4\">\n          <v-text-field\n            v-model=\"formData.check_number\"\n            label=\"Check Type\"\n            :error-messages=\"errors.check_number\"\n            dense\n            hide-details=\"auto\"\n            class=\"mt-4\"\n          >\n          </v-text-field>\n        </v-col>\n        <v-col cols=\"4\"></v-col>\n        <v-col\n          cols=\"3\"\n          class=\"mt-2\"\n        >\n          <label for=\"firstnameHorizontalIcons\">Amount </label>\n        </v-col>\n        <v-col\n          cols=\"4\"\n          class=\"mt-6\"\n        >\n          <v-currency-field\n            v-model=\"formData.amount\"\n            :max=\"totalAmountToPay\"\n            :error-messages=\"errors.amount\"\n            prefix=\"PHP\"\n            class=\"text-green mt-n8\"\n          >\n          </v-currency-field>\n        </v-col>\n        <v-col cols=\"2\">\n          <v-btn\n            class=\"mt-2\"\n            small\n            color=\"success\"\n            @click.prevent=\"copyTotalAmount\"\n          >\n            <v-icon>\n              {{ icons.mdiDatabaseArrowLeft }}\n            </v-icon>\n          </v-btn>\n        </v-col>\n        <v-col cols=\"3\">\n          <v-currency-field\n            v-model=\"totalAmountToPay\"\n            prefix=\"PHP\"\n            disabled=\"\"\n            class=\"text-green ml-n12  mt-n2\"\n          >\n          </v-currency-field>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col\n          offset-md=\"5\"\n          cols=\"12\"\n          class=\"mt-6\"\n        >\n          <v-btn\n            v-if=\"totalAmountToPay > 0\"\n            color=\"primary\"\n            @click=\"submit\"\n          >\n            Submit\n          </v-btn>\n          <v-btn\n            type=\"reset\"\n            outlined\n            color=\"error\"\n            class=\"mx-2\"\n            @click.prevent=\"cancel\"\n          >\n            Cancel\n          </v-btn>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { computed, ref, toRef } from '@vue/composition-api'\nimport { mdiCurrencySign, mdiDatabaseArrowLeft } from '@mdi/js'\nimport store from '@/store'\n\nexport default {\n  name: 'PaymentForm',\n  props: {\n    totalAmount: {\n      type: Number,\n      required: false,\n      default: (() => 0),\n    },\n  },\n  setup(props, { emit }) {\n    store.dispatch('AccountStore/list')\n    const totalAmountToPay = toRef(props, 'totalAmount')\n    const accounts = computed(() => store.state.AccountStore.accounts)\n    const types = [\n      { value: 'cash_payment', title: 'Cash Payment' },\n      { value: 'online_payment', title: 'Online Payment' },\n      { value: 'check_payment', title: 'Check Payment' },\n    ]\n    const datePosted = ref(new Date().toISOString().substr(0, 10))\n    const formData = ref({\n      amount: 0,\n    })\n\n    const errors = ref({\n      account_id: null,\n      amount: null,\n    })\n\n    const copyTotalAmount = () => {\n      formData.value.amount = totalAmountToPay.value\n    }\n\n    const checkTypes = [\n      'Local',\n      'Regional',\n    ]\n\n    const paymentTypesMapping = {\n      cash_payment: 'Cash Payment',\n      check_payment: 'Check Payment',\n      online_payment: 'Online Payment',\n    }\n\n    const hasError = ref(0)\n\n    const submit = () => {\n      const payment = {\n        type: formData.value.type,\n        account_id: formData.value.account_id,\n        payment_type: paymentTypesMapping[formData.value.type],\n        amount: formData.value.amount,\n        payment_date: datePosted.value,\n        mode_of_transfer: formData.value.mode_of_transfer,\n        reference_number: formData.value.transaction_number ?? formData.value.check_number,\n        transaction_number: formData.value.transaction_number,\n        check_number: formData.value.check_number,\n        bank: formData.value.bank,\n        bank_account_number: formData.value.bank_account_number,\n        check_type: formData.value.check_type,\n      }\n\n      if (payment.type === 'online_payment') {\n        if (!formData.value.mode_of_transfer) {\n          hasError.value += 1\n          errors.value.mode_of_transfer = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.mode_of_transfer = null\n        }\n\n        if (!formData.value.transaction_number) {\n          hasError.value += 1\n          errors.value.transaction_number = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.transaction_number = null\n        }\n      }\n\n      if (payment.type === 'check_payment') {\n        if (!formData.value.check_number) {\n          hasError.value += 1\n          errors.value.check_number = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.check_number = null\n        }\n        if (!formData.value.bank) {\n          hasError.value += 1\n          errors.value.bank = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.bank = null\n        }\n        if (!formData.value.bank_account_number) {\n          hasError.value += 1\n          errors.value.bank_account_number = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.bank_account_number = null\n        }\n        if (!formData.value.check_type) {\n          hasError.value += 1\n          errors.value.check_type = 'This field is required.'\n        } else {\n          hasError.value -= 1\n          errors.value.check_type = null\n        }\n      }\n\n      if (!payment.account_id) {\n        hasError.value += 1\n        errors.value.account_id = 'This field is required.'\n      } else {\n        hasError.value -= 1\n        errors.value.account_id = null\n      }\n\n      if (!payment.amount || payment.amount === 0) {\n        hasError.value += 1\n        errors.value.amount = 'This field is required.'\n      } else {\n        hasError.value -= 1\n        errors.value.amount = null\n      }\n\n      if (payment.account_id && hasError.value <= 0) {\n        emit('addedPayment', payment)\n\n        formData.value = {\n          amount: 0,\n        }\n      }\n    }\n\n    const onChangeOfPaymentType = () => {\n      errors.value = {\n        account_id: null,\n      }\n    }\n\n    const cancel = () => {\n      emit('toggleModal')\n    }\n\n    return {\n      onChangeOfPaymentType,\n      errors,\n      checkTypes,\n      submit,\n      cancel,\n      accounts,\n      copyTotalAmount,\n      datePosted,\n      formData,\n      types,\n      totalAmountToPay,\n      icons: {\n        mdiCurrencySign,\n        mdiDatabaseArrowLeft,\n      },\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}